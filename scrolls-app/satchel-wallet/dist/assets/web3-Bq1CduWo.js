const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-5riUZR2z.js","assets/hooks.module-Dz_XB4AG.js","assets/react-DlWwq_Dl.js","assets/query-kpRafehQ.js","assets/index-BEnFPcoa.js"])))=>i.map(i=>d[i]);
var X0=t=>{throw TypeError(t)};var sh=(t,e,n)=>e.has(t)||X0("Cannot "+n);var q=(t,e,n)=>(sh(t,e,"read from private field"),n?n.call(t):e.get(t)),ce=(t,e,n)=>e.has(t)?X0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),se=(t,e,n,r)=>(sh(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ue=(t,e,n)=>(sh(t,e,"access private method"),n);var Wc=(t,e,n,r)=>({set _(s){se(t,e,s,n)},get _(){return q(t,e,r)}});import{g as il,r as Rt,a as wp}from"./react-DlWwq_Dl.js";import{u as kw}from"./query-kpRafehQ.js";const ku=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],Of=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],Uw=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],Mw=[...Uw,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],HE=[...Uw,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],eg=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],tg=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],Lw=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],ng=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],NV=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}];function Tn(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new tx(t.type);return`${t.name}(${ol(t.inputs,{includeName:e})})`}function ol(t,{includeName:e=!1}={}){return t?t.map(n=>VE(n,{includeName:e})).join(e?", ":","):""}function VE(t,{includeName:e}){return t.type.startsWith("tuple")?`(${ol(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function Dn(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function De(t){return Dn(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const jw="2.37.5";let Xo={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${jw}`},G=class Cf extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Cf?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Cf&&n.cause.docsPath||n.docsPath,i=(a=Xo.getDocsUrl)==null?void 0:a.call(Xo,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Xo.version?[`Version: ${Xo.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=jw}walk(e){return Fw(this,e)}};function Fw(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?Fw(t.cause,e):e?null:t}class KE extends G{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class rg extends G{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class zw extends G{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${ol(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class gc extends G{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class GE extends G{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class WE extends G{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${De(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class qw extends G{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class ZE extends G{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class sg extends G{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class Hw extends G{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class YE extends G{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class Vw extends G{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class ig extends G{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class po extends G{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class Kw extends G{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class QE extends G{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class JE extends G{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Tn(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Tn(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let Gw=class extends G{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class Pa extends G{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${ol(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class al extends G{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Tn(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class XE extends G{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class ex extends G{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let Ww=class extends G{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class tx extends G{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class nx extends G{constructor(e){super(`Type "${e}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}let mt=class extends G{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},Zw=class extends G{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},Yw=class extends G{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class og extends G{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Sr(t,{dir:e,size:n=32}={}){return typeof t=="string"?cs(t,{dir:e,size:n}):rx(t,{dir:e,size:n})}function cs(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new Yw({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function rx(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new Yw({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let Qw=class extends G{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},sx=class extends G{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}};class ix extends G{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let ox=class extends G{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Wt(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function gn(t,{size:e}){if(De(t)>e)throw new ox({givenSize:De(t),maxSize:e})}function lt(t,e={}){const{signed:n}=e;e.size&&gn(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function ax(t,e={}){let n=t;if(e.size&&(gn(n,{size:e.size}),n=Wt(n)),Wt(n)==="0x00")return!1;if(Wt(n)==="0x01")return!0;throw new ix(n)}function fn(t,e={}){return Number(lt(t,e))}function qV(t,e={}){let n=dn(t);return e.size&&(gn(n,{size:e.size}),n=Wt(n,{dir:"right"})),new TextDecoder().decode(n)}const cx=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Zt(t,e={}){return typeof t=="number"||typeof t=="bigint"?Y(t,e):typeof t=="string"?go(t,e):typeof t=="boolean"?vp(t,e):Ve(t,e)}function vp(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(gn(n,{size:e.size}),Sr(n,{size:e.size})):n}function Ve(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=cx[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(gn(r,{size:e.size}),Sr(r,{dir:"right",size:e.size})):r}function Y(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new Qw({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Sr(a,{size:r}):a}const ux=new TextEncoder;function go(t,e={}){const n=ux.encode(t);return Ve(n,e)}const lx=new TextEncoder;function Uo(t,e={}){return typeof t=="number"||typeof t=="bigint"?fx(t,e):typeof t=="boolean"?hx(t,e):Dn(t)?dn(t,e):Ls(t,e)}function hx(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(gn(n,{size:e.size}),Sr(n,{size:e.size})):n}const or={zero:48,nine:57,A:65,F:70,a:97,f:102};function ag(t){if(t>=or.zero&&t<=or.nine)return t-or.zero;if(t>=or.A&&t<=or.F)return t-(or.A-10);if(t>=or.a&&t<=or.f)return t-(or.a-10)}function dn(t,e={}){let n=t;e.size&&(gn(n,{size:e.size}),n=Sr(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=ag(r.charCodeAt(a++)),u=ag(r.charCodeAt(a++));if(c===void 0||u===void 0)throw new G(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+u}return i}function fx(t,e){const n=Y(t,e);return dn(n)}function Ls(t,e={}){const n=lx.encode(t);return typeof e.size=="number"?(gn(n,{size:e.size}),Sr(n,{dir:"right",size:e.size})):n}const Zc=BigInt(2**32-1),cg=BigInt(32);function dx(t,e=!1){return e?{h:Number(t&Zc),l:Number(t>>cg&Zc)}:{h:Number(t>>cg&Zc)|0,l:Number(t&Zc)|0}}function px(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=dx(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const gx=(t,e,n)=>t<<n|e>>>32-n,yx=(t,e,n)=>e<<n|t>>>32-n,mx=(t,e,n)=>e<<n-32|t>>>64-n,bx=(t,e,n)=>t<<n-32|e>>>64-n,Ei=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function wx(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Aa(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ks(t,...e){if(!wx(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function vx(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Aa(t.outputLen),Aa(t.blockLen)}function yo(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Jw(t,e){Ks(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Ex(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function mo(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function ih(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function jn(t,e){return t<<32-e|t>>>e}const xx=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function $x(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Ix(t){for(let e=0;e<t.length;e++)t[e]=$x(t[e]);return t}const ug=xx?t=>t:Ix;function _x(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function cl(t){return typeof t=="string"&&(t=_x(t)),Ks(t),t}function Sx(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Ks(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let Ep=class{};function Xw(t){const e=r=>t().update(cl(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Px(t=32){if(Ei&&typeof Ei.getRandomValues=="function")return Ei.getRandomValues(new Uint8Array(t));if(Ei&&typeof Ei.randomBytes=="function")return Uint8Array.from(Ei.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const Ax=BigInt(0),ea=BigInt(1),Ox=BigInt(2),Cx=BigInt(7),Tx=BigInt(256),Dx=BigInt(113),e1=[],t1=[],n1=[];for(let t=0,e=ea,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],e1.push(2*(5*r+n)),t1.push((t+1)*(t+2)/2%64);let s=Ax;for(let i=0;i<7;i++)e=(e<<ea^(e>>Cx)*Dx)%Tx,e&Ox&&(s^=ea<<(ea<<BigInt(i))-ea);n1.push(s)}const r1=px(n1,!0),Bx=r1[0],Nx=r1[1],lg=(t,e,n)=>n>32?mx(t,e,n):gx(t,e,n),hg=(t,e,n)=>n>32?bx(t,e,n):yx(t,e,n);function Rx(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],h=lg(u,l,1)^n[a],f=hg(u,l,1)^n[a+1];for(let d=0;d<50;d+=10)t[o+d]^=h,t[o+d+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=t1[o],c=lg(s,i,a),u=hg(s,i,a),l=e1[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Bx[r],t[1]^=Nx[r]}mo(n)}let kx=class s1 extends Ep{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Aa(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Ex(this.state)}clone(){return this._cloneInto()}keccak(){ug(this.state32),Rx(this.state32,this.rounds),ug(this.state32),this.posOut=0,this.pos=0}update(e){yo(this),e=cl(e),Ks(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){yo(this,!1),Ks(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Aa(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Jw(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,mo(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new s1(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Ux=(t,e,n)=>Xw(()=>new kx(e,t,n)),i1=Ux(1,136,256/8);function ht(t,e){const n=e||"hex",r=i1(Dn(t,{strict:!1})?Uo(t):t);return n==="bytes"?r:Zt(r)}let ul=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Mx=/^0x[a-fA-F0-9]{40}$/,oh=new ul(8192);function Ke(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(oh.has(r))return oh.get(r);const s=Mx.test(t)?t.toLowerCase()===t?!0:n?ll(t)===t:!0:!1;return oh.set(r,s),s}const ah=new ul(8192);function ll(t,e){if(ah.has(`${t}.${e}`))return ah.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=ht(Ls(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return ah.set(`${t}.${e}`,i),i}function Et(t,e){if(!Ke(t,{strict:!1}))throw new mt({address:t});return ll(t,e)}let fg=class extends G{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}},o1=class extends G{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}},Lx=class extends G{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}};const jx={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Lx({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new o1({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new fg({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new fg({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function xp(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(jx);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function Gs(t,e,n,{strict:r}={}){return Dn(t,{strict:!1})?Tf(t,e,n,{strict:r}):u1(t,e,n,{strict:r})}function a1(t,e){if(typeof e=="number"&&e>0&&e>De(t)-1)throw new Zw({offset:e,position:"start",size:De(t)})}function c1(t,e,n){if(typeof e=="number"&&typeof n=="number"&&De(t)!==n-e)throw new Zw({offset:n,position:"end",size:De(t)})}function u1(t,e,n,{strict:r}={}){a1(t,e);const s=t.slice(e,n);return r&&c1(s,e,n),s}function Tf(t,e,n,{strict:r}={}){a1(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&c1(s,e,n),s}function Fx(t,e={}){typeof e.size<"u"&&gn(t,{size:e.size});const n=Ve(t,e);return lt(n,e)}function zx(t,e={}){let n=t;if(typeof e.size<"u"&&(gn(n,{size:e.size}),n=Wt(n)),n.length>1||n[0]>1)throw new sx(n);return!!n[0]}function Pr(t,e={}){typeof e.size<"u"&&gn(t,{size:e.size});const n=Ve(t,e);return fn(n,e)}function qx(t,e={}){let n=t;return typeof e.size<"u"&&(gn(n,{size:e.size}),n=Wt(n,{dir:"right"})),new TextDecoder().decode(n)}function Bn(t){return typeof t[0]=="string"?kt(t):Hx(t)}function Hx(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function kt(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}const Vx=/^(.*)\[([0-9]*)\]$/,l1=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,$p=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function kr(t,e){if(t.length!==e.length)throw new qw({expectedLength:t.length,givenLength:e.length});const n=Kx({params:t,values:e}),r=_p(n);return r.length===0?"0x":r}function Kx({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(Ip({param:t[r],value:e[r]}));return n}function Ip({param:t,value:e}){const n=Sp(t.type);if(n){const[r,s]=n;return Wx(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return Xx(e,{param:t});if(t.type==="address")return Gx(e);if(t.type==="bool")return Yx(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=$p.exec(t.type)??[];return Qx(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return Zx(e,{param:t});if(t.type==="string")return Jx(e);throw new XE(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function _p(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=De(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(Y(e+s,{size:32})),r.push(a),s+=De(a)):n.push(a)}return Bn([...n,...r])}function Gx(t){if(!Ke(t))throw new mt({address:t});return{dynamic:!1,encoded:cs(t.toLowerCase())}}function Wx(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new Ww(t);if(!r&&t.length!==e)throw new GE({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=Ip({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=_p(i);if(r){const a=Y(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Bn([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Bn(i.map(({encoded:o})=>o))}}function Zx(t,{param:e}){const[,n]=e.type.split("bytes"),r=De(t);if(!n){let s=t;return r%32!==0&&(s=cs(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Bn([cs(Y(r,{size:32})),s])}}if(r!==Number.parseInt(n,10))throw new WE({expectedSize:Number.parseInt(n,10),value:t});return{dynamic:!1,encoded:cs(t,{dir:"right"})}}function Yx(t){if(typeof t!="boolean")throw new G(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:cs(vp(t))}}function Qx(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new Qw({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Y(t,{size:32,signed:e})}}function Jx(t){const e=go(t),n=Math.ceil(De(e)/32),r=[];for(let s=0;s<n;s++)r.push(cs(Gs(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Bn([cs(Y(De(e),{size:32})),...r])}}function Xx(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=Ip({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?_p(r):Bn(r.map(({encoded:s})=>s))}}function Sp(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function yc(t,e){const n=typeof e=="string"?dn(e):e,r=xp(n);if(De(n)===0&&t.length>0)throw new gc;if(De(e)&&De(e)<32)throw new zw({data:typeof e=="string"?e:Ve(e),params:t,size:De(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,u]=eo(r,a,{staticPosition:0});s+=u,i.push(c)}return i}function eo(t,e,{staticPosition:n}){const r=Sp(e.type);if(r){const[s,i]=r;return t8(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return i8(t,e,{staticPosition:n});if(e.type==="address")return e8(t);if(e.type==="bool")return n8(t);if(e.type.startsWith("bytes"))return r8(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return s8(t,e);if(e.type==="string")return o8(t,{staticPosition:n});throw new ex(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const dg=32,Df=32;function e8(t){const e=t.readBytes(32);return[ll(Ve(u1(e,-20))),32]}function t8(t,e,{length:n,staticPosition:r}){if(!n){const o=Pr(t.readBytes(Df)),a=r+o,c=a+dg;t.setPosition(a);const u=Pr(t.readBytes(dg)),l=Oa(e);let h=0;const f=[];for(let d=0;d<u;++d){t.setPosition(c+(l?d*32:h));const[p,g]=eo(t,e,{staticPosition:c});h+=g,f.push(p)}return t.setPosition(r+32),[f,32]}if(Oa(e)){const o=Pr(t.readBytes(Df)),a=r+o,c=[];for(let u=0;u<n;++u){t.setPosition(a+u*32);const[l]=eo(t,e,{staticPosition:a});c.push(l)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=eo(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function n8(t){return[zx(t.readBytes(32),{size:32}),32]}function r8(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Pr(t.readBytes(32));t.setPosition(n+o);const a=Pr(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Ve(c),32]}return[Ve(t.readBytes(Number.parseInt(s,10),32)),32]}function s8(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),s=t.readBytes(32);return[r>48?Fx(s,{signed:n}):Pr(s,{signed:n}),32]}function i8(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(Oa(e)){const o=Pr(t.readBytes(Df)),a=n+o;for(let c=0;c<e.components.length;++c){const u=e.components[c];t.setPosition(a+i);const[l,h]=eo(t,u,{staticPosition:a});i+=h,s[r?c:u==null?void 0:u.name]=l}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,u]=eo(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=u}return[s,i]}function o8(t,{staticPosition:e}){const n=Pr(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Pr(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=qx(Wt(i));return t.setPosition(e+32),[o,32]}function Oa(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(Oa);const n=Sp(t.type);return!!(n&&Oa({...t,type:n[1]}))}const a8=t=>ht(Uo(t));function c8(t){return a8(t)}const u8="1.1.0";let Ut=class Bf extends Error{constructor(e,n={}){var o;const r=n.cause instanceof Bf?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof Bf&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${u8}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function Ur(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const h1=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,f1=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,d1=/^\(.+?\).*?$/,pg=/^tuple(?<array>(\[(\d*)\])*)$/;function Nf(t){let e=t.type;if(pg.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=Nf(i),s<n-1&&(e+=", ")}const r=Ur(pg,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,Nf({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Hi(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=Nf(s),r!==n-1&&(e+=", ")}return e}function Uu(t){var e;return t.type==="function"?`function ${t.name}(${Hi(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Hi(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Hi(t.inputs)})`:t.type==="error"?`error ${t.name}(${Hi(t.inputs)})`:t.type==="constructor"?`constructor(${Hi(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const p1=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function l8(t){return p1.test(t)}function h8(t){return Ur(p1,t)}const g1=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function f8(t){return g1.test(t)}function d8(t){return Ur(g1,t)}const y1=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function p8(t){return y1.test(t)}function g8(t){return Ur(y1,t)}const m1=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function hl(t){return m1.test(t)}function y8(t){return Ur(m1,t)}const b1=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function m8(t){return b1.test(t)}function b8(t){return Ur(b1,t)}const w1=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function w8(t){return w1.test(t)}function v8(t){return Ur(w1,t)}const E8=/^receive\(\) external payable$/;function x8(t){return E8.test(t)}const gg=new Set(["memory","indexed","storage","calldata"]),$8=new Set(["indexed"]),Rf=new Set(["calldata","memory","storage"]);class I8 extends Ut{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class _8 extends Ut{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class S8 extends Ut{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class P8 extends Ut{constructor({params:e}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class A8 extends Ut{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class O8 extends Ut{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class C8 extends Ut{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class T8 extends Ut{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class D8 extends Ut{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Mo extends Ut{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class B8 extends Ut{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class N8 extends Ut{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class R8 extends Ut{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class k8 extends Ut{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function U8(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const ch=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function kf(t,e={}){if(p8(t))return M8(t,e);if(f8(t))return L8(t,e);if(l8(t))return j8(t,e);if(m8(t))return F8(t,e);if(w8(t))return z8(t);if(x8(t))return{type:"receive",stateMutability:"payable"};throw new B8({signature:t})}function M8(t,e={}){const n=g8(t);if(!n)throw new Mo({signature:t,type:"function"});const r=Kt(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Dr(r[a],{modifiers:Rf,structs:e,type:"function"}));const o=[];if(n.returns){const a=Kt(n.returns),c=a.length;for(let u=0;u<c;u++)o.push(Dr(a[u],{modifiers:Rf,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function L8(t,e={}){const n=d8(t);if(!n)throw new Mo({signature:t,type:"event"});const r=Kt(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Dr(r[o],{modifiers:$8,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function j8(t,e={}){const n=h8(t);if(!n)throw new Mo({signature:t,type:"error"});const r=Kt(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Dr(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function F8(t,e={}){const n=b8(t);if(!n)throw new Mo({signature:t,type:"constructor"});const r=Kt(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Dr(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function z8(t){const e=v8(t);if(!e)throw new Mo({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const q8=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,H8=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,V8=/^u?int$/;function Dr(t,e){var h,f;const n=U8(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(ch.has(n))return ch.get(n);const r=d1.test(t),s=Ur(r?H8:q8,t);if(!s)throw new A8({param:t});if(s.name&&G8(s.name))throw new O8({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,u={};if(r){c="tuple";const d=Kt(s.type),p=[],g=d.length;for(let y=0;y<g;y++)p.push(Dr(d[y],{structs:a}));u={components:p}}else if(s.type in a)c="tuple",u={components:a[s.type]};else if(V8.test(s.type))c=`${s.type}256`;else if(s.type==="address payable")c="address";else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!v1(c))throw new S8({type:c});if(s.modifier){if(!((f=(h=e==null?void 0:e.modifiers)==null?void 0:h.has)!=null&&f.call(h,s.modifier)))throw new C8({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(Rf.has(s.modifier)&&!W8(c,!!s.array))throw new T8({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const l={type:`${c}${s.array??""}`,...i,...o,...u};return ch.set(n,l),l}function Kt(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?Kt(a,[...e,n.trim()]):Kt(a,e,`${n}${o}`,r);case"(":return Kt(a,e,`${n}${o}`,r+1);case")":return Kt(a,e,`${n}${o}`,r-1);default:return Kt(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new k8({current:n,depth:r});return e.push(n.trim()),e}function v1(t){return t==="address"||t==="bool"||t==="function"||t==="string"||h1.test(t)||f1.test(t)}const K8=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function G8(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||h1.test(t)||f1.test(t)||K8.test(t)}function W8(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function Pp(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!hl(a))continue;const c=y8(a);if(!c)throw new Mo({signature:a,type:"struct"});const u=c.properties.split(";"),l=[],h=u.length;for(let f=0;f<h;f++){const p=u[f].trim();if(!p)continue;const g=Dr(p,{type:"struct"});l.push(g)}if(!l.length)throw new N8({signature:a});e[c.name]=l}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=E1(c,e)}return r}const Z8=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function E1(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(d1.test(o.type))r.push(o);else{const c=Ur(Z8,o.type);if(!(c!=null&&c.type))throw new D8({abiParameter:o});const{array:u,type:l}=c;if(l in e){if(n.has(l))throw new R8({type:l});r.push({...o,type:`tuple${u??""}`,components:E1(e[l]??[],e,new Set([...n,l]))})}else if(v1(l))r.push(o);else throw new _8({type:l})}}return r}function x1(t){const e=Pp(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];hl(i)||n.push(kf(i,e))}return n}function yg(t){let e;if(typeof t=="string")e=kf(t);else{const n=Pp(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!hl(i)){e=kf(i,n);break}}}if(!e)throw new I8({signature:t});return e}function mg(t){const e=[];if(typeof t=="string"){const n=Kt(t),r=n.length;for(let s=0;s<r;s++)e.push(Dr(n[s],{modifiers:gg}))}else{const n=Pp(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(hl(i))continue;const o=Kt(i),a=o.length;for(let c=0;c<a;c++)e.push(Dr(o[c],{modifiers:gg,structs:n}))}}if(e.length===0)throw new P8({params:t});return e}function Y8(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new G("Unable to normalize signature.");return s}const Q8=t=>{const e=typeof t=="string"?t:Uu(t);return Y8(e)};function $1(t){return c8(Q8(t))}const fl=$1,mc=t=>Gs($1(t),0,4);function li(t){const{abi:e,args:n=[],name:r}=t,s=Dn(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?mc(a)===r:a.type==="event"?fl(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((u,l)=>{const h="inputs"in a&&a.inputs[l];return h?Uf(u,h):!1})){if(o&&"inputs"in o&&o.inputs){const u=I1(a.inputs,o.inputs,n);if(u)throw new JE({abiItem:a,type:u[0]},{abiItem:o,type:u[1]})}o=a}}return o||i[0]}function Uf(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Ke(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>Uf(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>Uf(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function I1(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return I1(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Ke(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Ke(n[r],{strict:!1}):!1)return o}}const uh="/docs/contract/decodeFunctionResult";function hi(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=li({abi:e,args:n,name:r});if(!a)throw new po(r,{docsPath:uh});i=a}if(i.type!=="function")throw new po(void 0,{docsPath:uh});if(!i.outputs)throw new Kw(i.name,{docsPath:uh});const o=yc(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const bg="/docs/contract/encodeFunctionData";function J8(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=li({abi:e,args:n,name:r});if(!i)throw new po(r,{docsPath:bg});s=i}if(s.type!=="function")throw new po(void 0,{docsPath:bg});return{abi:[s],functionName:mc(Tn(s))}}function Un(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:J8(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?kr(s.inputs,e??[]):void 0;return kt([i,o??"0x"])}class Mf extends G{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class _1 extends G{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class dl extends G{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}function Lo({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new Mf({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new Mf({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function Yt(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const X8={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},S1={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},e$={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function P1(t){const{abi:e,data:n}=t,r=Gs(n,0,4);if(r==="0x")throw new gc;const i=[...e||[],S1,e$].find(o=>o.type==="error"&&r===mc(Tn(o)));if(!i)throw new Hw(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?yc(i.inputs,Gs(n,4)):void 0,errorName:i.name}}const He=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function A1({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?He(e[i]):e[i]}`).join(", ")})`}const t$={gwei:9,wei:18},n$={ether:-9,wei:9};function O1(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function C1(t,e="wei"){return O1(t,t$[e])}function On(t,e="wei"){return O1(t,n$[e])}class r$ extends G{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class s$ extends G{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function wg(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function i$(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=wg(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=wg(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function pl(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class o$ extends G{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class a$ extends G{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class c$ extends G{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",pl(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class u$ extends G{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class T1 extends G{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class D1 extends G{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class l$ extends G{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const h$=t=>t,bc=t=>t;class B1 extends G{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:h,value:f,stateOverride:d}){var y;const p=n?Yt(n):void 0;let g=pl({from:p==null?void 0:p.address,to:h,value:typeof f<"u"&&`${C1(f)} ${((y=s==null?void 0:s.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${On(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${On(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${On(u)} gwei`,nonce:l});d&&(g+=`
${i$(d)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class N1 extends G{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=li({abi:n,args:r,name:o}),u=c?A1({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,l=c?Tn(c,{includeName:!0}):void 0,h=pl({address:s&&h$(s),function:l,args:u&&u!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${u}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],h&&"Contract Call:",h].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class Lf extends G{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=P1({abi:e,data:n});const{abiItem:l,errorName:h,args:f}=o;if(h==="Error")c=f[0];else if(h==="Panic"){const[d]=f;c=X8[d]}else{const d=l?Tn(l,{includeName:!0}):void 0,p=l&&f?A1({abiItem:l,args:f,includeFunctionName:!1,includeName:!1}):void 0;a=[d?`Error: ${d}`:"",p&&p!=="()"?`       ${[...Array((h==null?void 0:h.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(l){i=l}else s&&(c=s);let u;i instanceof Hw&&(u=i.signature,a=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=u}}class f$ extends G{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class d$ extends G{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class gl extends G{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function Ap(t){var n,r,s,i,o,a;if(!(t instanceof G))return!1;const e=t.walk(c=>c instanceof Lf);return e instanceof Lf?((n=e.data)==null?void 0:n.errorName)==="HttpError"||((r=e.data)==null?void 0:r.errorName)==="ResolverError"||((s=e.data)==null?void 0:s.errorName)==="ResolverNotContract"||((i=e.data)==null?void 0:i.errorName)==="ResolverNotFound"||((o=e.data)==null?void 0:o.errorName)==="ReverseAddressMismatch"||((a=e.data)==null?void 0:a.errorName)==="UnsupportedResolverProfile":!1}function p$(t){const{abi:e,data:n}=t,r=Gs(n,0,4),s=e.find(i=>i.type==="function"&&r===mc(Tn(i)));if(!s)throw new QE(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?yc(s.inputs,Gs(n,4)):void 0}}const lh="/docs/contract/encodeErrorResult";function vg(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=li({abi:e,args:r,name:n});if(!c)throw new sg(n,{docsPath:lh});s=c}if(s.type!=="error")throw new sg(void 0,{docsPath:lh});const i=Tn(s),o=mc(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new ZE(s.name,{docsPath:lh});a=kr(s.inputs,r)}return kt([o,a])}const hh="/docs/contract/encodeFunctionResult";function g$(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=li({abi:e,name:n});if(!o)throw new po(n,{docsPath:hh});s=o}if(s.type!=="function")throw new po(void 0,{docsPath:hh});if(!s.outputs)throw new Kw(s.name,{docsPath:hh});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new Ww(r)})();return kr(s.outputs,i)}const wc="x-batch-gateway:true";async function R1(t){const{data:e,ccipRequest:n}=t,{args:[r]}=p$({abi:Of,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(wc)?await R1({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=y$(c)}})),g$({abi:Of,functionName:"query",result:[s,i]})}function y$(t){return t.name==="HttpRequestError"&&t.status?vg({abi:Of,errorName:"HttpError",args:[t.status,t.shortMessage]}):vg({abi:[S1],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function k1(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Dn(e)?e:null}function jf(t){let e=new Uint8Array(32).fill(0);if(!t)return Ve(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=k1(n[r]),i=s?Uo(s):ht(Ls(n[r]),"bytes");e=ht(Bn([e,i]),"bytes")}return Ve(e)}function m$(t){return`[${t.slice(2)}]`}function b$(t){const e=new Uint8Array(32).fill(0);return t?k1(t)||ht(Ls(t)):Ve(e)}function Op(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(Ls(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=Ls(s[i]);o.byteLength>255&&(o=Ls(m$(b$(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}function ne(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}class js extends G{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${bc(o)}`,e&&`Request body: ${He(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class Cp extends G{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${bc(r)}`,`Request body: ${He(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class Eg extends G{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${bc(n)}`,`Request body: ${He(e)}`],name:"TimeoutError"})}}const w$=-1;class Mt extends G{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof Cp?e.code:n??w$}}class Xt extends Mt{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Ca extends Mt{constructor(e){super(e,{code:Ca.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Ca,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Ta extends Mt{constructor(e){super(e,{code:Ta.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Ta,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Da extends Mt{constructor(e,{method:n}={}){super(e,{code:Da.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Da,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Ba extends Mt{constructor(e){super(e,{code:Ba.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Ba,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Ws extends Mt{constructor(e){super(e,{code:Ws.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Ws,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Zs extends Mt{constructor(e){super(e,{code:Zs.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Zs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Na extends Mt{constructor(e){super(e,{code:Na.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Na,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class us extends Mt{constructor(e){super(e,{code:us.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(us,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class bo extends Mt{constructor(e){super(e,{code:bo.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(bo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Ps extends Mt{constructor(e,{method:n}={}){super(e,{code:Ps.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Ps,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class wo extends Mt{constructor(e){super(e,{code:wo.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(wo,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Ra extends Mt{constructor(e){super(e,{code:Ra.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Ra,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Oe extends Xt{constructor(e){super(e,{code:Oe.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Oe,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class ka extends Xt{constructor(e){super(e,{code:ka.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(ka,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Ua extends Xt{constructor(e,{method:n}={}){super(e,{code:Ua.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Ua,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Ma extends Xt{constructor(e){super(e,{code:Ma.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Ma,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class La extends Xt{constructor(e){super(e,{code:La.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(La,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class pn extends Xt{constructor(e){super(e,{code:pn.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(pn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class ja extends Xt{constructor(e){super(e,{code:ja.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(ja,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Fa extends Xt{constructor(e){super(e,{code:Fa.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Fa,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class za extends Xt{constructor(e){super(e,{code:za.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(za,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class qa extends Xt{constructor(e){super(e,{code:qa.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(qa,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Ha extends Xt{constructor(e){super(e,{code:Ha.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Ha,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Va extends Xt{constructor(e){super(e,{code:Va.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Va,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Ka extends Xt{constructor(e){super(e,{code:Ka.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Ka,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class v$ extends Mt{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const E$=3;function vo(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof gl?t:t instanceof G?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:u,details:l,message:h,shortMessage:f}=a,d=t instanceof gc?new f$({functionName:i}):[E$,Ws.code].includes(c)&&(u||l||h||f)?new Lf({abi:e,data:typeof u=="object"?u.data:u,functionName:i,message:a instanceof Cp?l:f??h}):t;return new N1(d,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}const x$="modulepreload",$$=function(t){return"/"+t},xg={},fi=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=$$(c),c in xg)return;xg[c]=!0;const u=c.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${l}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":x$,u||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,d)=>{h.addEventListener("load",f),h.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tp=BigInt(0),Ff=BigInt(1);function vc(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Dp(t){if(!vc(t))throw new Error("Uint8Array expected")}function Ga(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Yc(t){const e=t.toString(16);return e.length&1?"0"+e:e}function U1(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Tp:BigInt("0x"+t)}const M1=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",I$=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Wa(t){if(Dp(t),M1)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=I$[t[n]];return e}const ar={_0:48,_9:57,A:65,F:70,a:97,f:102};function $g(t){if(t>=ar._0&&t<=ar._9)return t-ar._0;if(t>=ar.A&&t<=ar.F)return t-(ar.A-10);if(t>=ar.a&&t<=ar.f)return t-(ar.a-10)}function Mu(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(M1)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=$g(t.charCodeAt(i)),a=$g(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Fs(t){return U1(Wa(t))}function L1(t){return Dp(t),U1(Wa(Uint8Array.from(t).reverse()))}function Ec(t,e){return Mu(t.toString(16).padStart(e*2,"0"))}function j1(t,e){return Ec(t,e).reverse()}function an(t,e,n){let r;if(typeof e=="string")try{r=Mu(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(vc(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function Lu(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Dp(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const fh=t=>typeof t=="bigint"&&Tp<=t;function Bp(t,e,n){return fh(t)&&fh(e)&&fh(n)&&e<=t&&t<n}function to(t,e,n,r){if(!Bp(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function _$(t){let e;for(e=0;t>Tp;t>>=Ff,e+=1);return e}const yl=t=>(Ff<<BigInt(t))-Ff,dh=t=>new Uint8Array(t),Ig=t=>Uint8Array.from(t);function S$(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=dh(t),s=dh(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...h)=>n(s,r,...h),c=(h=dh(0))=>{s=a(Ig([0]),h),r=a(),h.length!==0&&(s=a(Ig([1]),h),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){r=a();const d=r.slice();f.push(d),h+=r.length}return Lu(...f)};return(h,f)=>{o(),c(h);let d;for(;!(d=f(u()));)c();return o(),d}}const P$={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||vc(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function ml(t,e,n={}){const r=(s,i,o)=>{const a=P$[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function _g(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const A$="0.1.1";function O$(){return A$}let fe=class zf extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof zf){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof zf&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${O$()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return F1(this,e)}};function F1(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?F1(t.cause,e):e?null:t}function xc(t,e){if(Wi(t)>e)throw new K$({givenSize:Wi(t),maxSize:e})}const cr={zero:48,nine:57,A:65,F:70,a:97,f:102};function Sg(t){if(t>=cr.zero&&t<=cr.nine)return t-cr.zero;if(t>=cr.A&&t<=cr.F)return t-(cr.A-10);if(t>=cr.a&&t<=cr.f)return t-(cr.a-10)}function C$(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new G$({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function z1(t,e={}){const{dir:n="left"}=e;let r=t,s=0;for(let i=0;i<r.length-1&&r[n==="left"?i:r.length-i-1].toString()==="0";i++)s++;return r=n==="left"?r.slice(s):r.slice(0,r.length-s),r}function bl(t,e){if(Qt(t)>e)throw new X$({givenSize:Qt(t),maxSize:e})}function T$(t,e){if(typeof e=="number"&&e>0&&e>Qt(t)-1)throw new Q1({offset:e,position:"start",size:Qt(t)})}function D$(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Qt(t)!==n-e)throw new Q1({offset:n,position:"end",size:Qt(t)})}function q1(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new eI({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const B$="#__bigint";function H1(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+B$:s,n)}const N$=new TextDecoder,R$=new TextEncoder;function k$(t){return t instanceof Uint8Array?t:typeof t=="string"?V1(t):U$(t)}function U$(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function V1(t,e={}){const{size:n}=e;let r=t;n&&(bl(t,n),r=Qs(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const u=Sg(s.charCodeAt(c++)),l=Sg(s.charCodeAt(c++));if(u===void 0||l===void 0)throw new fe(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=u*16+l}return o}function M$(t,e={}){const{size:n}=e,r=R$.encode(t);return typeof n=="number"?(xc(r,n),L$(r,n)):r}function L$(t,e){return C$(t,{dir:"right",size:e})}function Wi(t){return t.length}function j$(t,e,n,r={}){const{strict:s}=r;return t.slice(e,n)}function F$(t,e={}){const{size:n}=e;typeof n<"u"&&xc(t,n);const r=Rn(t,e);return W1(r,e)}function z$(t,e={}){const{size:n}=e;let r=t;if(typeof n<"u"&&(xc(r,n),r=K1(r)),r.length>1||r[0]>1)throw new V$(r);return!!r[0]}function Ar(t,e={}){const{size:n}=e;typeof n<"u"&&xc(t,n);const r=Rn(t,e);return Z1(r,e)}function q$(t,e={}){const{size:n}=e;let r=t;return typeof n<"u"&&(xc(r,n),r=H$(r)),N$.decode(r)}function K1(t){return z1(t,{dir:"left"})}function H$(t){return z1(t,{dir:"right"})}class V$ extends fe{constructor(e){super(`Bytes value \`${e}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}let K$=class extends fe{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},G$=class extends fe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const W$=new TextEncoder,Z$=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Y$(t,e={}){const{strict:n=!1}=e;if(!t)throw new Pg(t);if(typeof t!="string")throw new Pg(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new Ag(t);if(!t.startsWith("0x"))throw new Ag(t)}function Nn(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function Q$(t){return t instanceof Uint8Array?Rn(t):Array.isArray(t)?Rn(new Uint8Array(t)):t}function G1(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(bl(n,e.size),Ys(n,e.size)):n}function Rn(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Z$[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(bl(r,e.size),Qs(r,e.size)):r}function vt(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const u=typeof t=="bigint"?"n":"";throw new Y1({max:i?`${i}${u}`:void 0,min:`${o}${u}`,signed:n,size:r,value:`${t}${u}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Ys(c,r):c}function Np(t,e={}){return Rn(W$.encode(t),e)}function Ys(t,e){return q1(t,{dir:"left",size:e})}function Qs(t,e){return q1(t,{dir:"right",size:e})}function nr(t,e,n,r={}){const{strict:s}=r;T$(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&D$(i,e,n),i}function Qt(t){return Math.ceil((t.length-2)/2)}function W1(t,e={}){const{signed:n}=e;e.size&&bl(t,e.size);const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n)-1n,o=i>>1n;return r<=o?r:r-i-1n}function Z1(t,e={}){const{signed:n,size:r}=e;return Number(!n&&!r?t:W1(t,e))}function J$(t,e={}){const{strict:n=!1}=e;try{return Y$(t,{strict:n}),!0}catch{return!1}}let Y1=class extends fe{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class Pg extends fe{constructor(e){super(`Value \`${typeof e=="object"?H1(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class Ag extends fe{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let X$=class extends fe{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class Q1 extends fe{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let eI=class extends fe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function tI(t){return{address:t.address,amount:vt(t.amount),index:vt(t.index),validatorIndex:vt(t.validatorIndex)}}function J1(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:vt(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:vt(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:vt(t.gasLimit)},...typeof t.number=="bigint"&&{number:vt(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:vt(t.prevRandao)},...typeof t.time=="bigint"&&{time:vt(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(tI)}}}const nI="0x82ad56cb",X1="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",rI="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",sI="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",Rp="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033",ph="/docs/contract/encodeDeployData";function kp(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new KE({docsPath:ph});if(!("inputs"in s))throw new rg({docsPath:ph});if(!s.inputs||s.inputs.length===0)throw new rg({docsPath:ph});const i=kr(s.inputs,n);return kt([r,i])}class As extends G{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(As,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(As,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Js extends G{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${On(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Js,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class qf extends G{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${On(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(qf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Hf extends G{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(Hf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Vf extends G{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(Vf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Kf extends G{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(Kf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class Gf extends G{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(Gf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Wf extends G{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Wf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Zf extends G{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(Zf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class Yf extends G{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(Yf,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Za extends G{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${On(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${On(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Za,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class wl extends G{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function Up(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof G?t.walk(s=>(s==null?void 0:s.code)===As.code):t;return r instanceof G?new As({cause:t,message:r.details}):As.nodeMessage.test(n)?new As({cause:t,message:t.details}):Js.nodeMessage.test(n)?new Js({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):qf.nodeMessage.test(n)?new qf({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):Hf.nodeMessage.test(n)?new Hf({cause:t,nonce:e==null?void 0:e.nonce}):Vf.nodeMessage.test(n)?new Vf({cause:t,nonce:e==null?void 0:e.nonce}):Kf.nodeMessage.test(n)?new Kf({cause:t,nonce:e==null?void 0:e.nonce}):Gf.nodeMessage.test(n)?new Gf({cause:t}):Wf.nodeMessage.test(n)?new Wf({cause:t,gas:e==null?void 0:e.gas}):Zf.nodeMessage.test(n)?new Zf({cause:t,gas:e==null?void 0:e.gas}):Yf.nodeMessage.test(n)?new Yf({cause:t}):Za.nodeMessage.test(n)?new Za({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new wl({cause:t})}function ev(t,{docsPath:e,...n}){const r=(()=>{const s=Up(t,n);return s instanceof wl?t:s})();return new B1(r,{docsPath:e,...n})}function Mp(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}function Lp(t,e){return({exclude:n,format:r})=>({exclude:n,format:s=>{const i=e(s);if(n)for(const o of n)delete i[o];return{...i,...r(s)}},type:t})}const iI={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function vl(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=oI(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Ve(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=Y(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=Y(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Y(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Y(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Y(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Y(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=iI[t.type]),typeof t.value<"u"&&(e.value=Y(t.value)),e}function oI(t){return t.map(e=>({address:e.address,r:e.r?Y(BigInt(e.r)):e.r,s:e.s?Y(BigInt(e.s)):e.s,chainId:Y(e.chainId),nonce:Y(e.nonce),...typeof e.yParity<"u"?{yParity:Y(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Y(e.v)}:{}}))}function jp(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const gh=new Map;function tv({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const l=c();o();const h=l.map(({args:f})=>f);h.length!==0&&t(h).then(f=>{s&&Array.isArray(f)&&f.sort(s);for(let d=0;d<l.length;d++){const{resolve:p}=l[d];p==null||p([f[d],f])}}).catch(f=>{for(let d=0;d<l.length;d++){const{reject:p}=l[d];p==null||p(f)}})},o=()=>gh.delete(e),a=()=>c().map(({args:l})=>l),c=()=>gh.get(e)||[],u=l=>gh.set(e,[...c(),l]);return{flush:o,async schedule(l){const{promise:h,resolve:f,reject:d}=jp();return(n==null?void 0:n([...a(),l]))&&i(),c().length>0?(u({args:l,resolve:f,reject:d}),h):(u({args:l,resolve:f,reject:d}),setTimeout(i,r),h)}}}function Og(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new og({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new og({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function aI(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=Y(e)),n!==void 0&&(o.nonce=Y(n)),r!==void 0&&(o.state=Og(r)),s!==void 0){if(o.state)throw new s$;o.stateDiff=Og(s)}return o}function Fp(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Ke(n,{strict:!1}))throw new mt({address:n});if(e[n])throw new r$({address:n});e[n]=aI(r)}return e}const El=2n**256n-1n;function $c(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Yt(e):void 0;if(o&&!Ke(o.address))throw new mt({address:o.address});if(i&&!Ke(i))throw new mt({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new o$;if(r&&r>El)throw new Js({maxFeePerGas:r});if(s&&r&&s>r)throw new Za({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function Ic(t,e){var F,R,$,_;const{account:n=t.account,authorizationList:r,batch:s=!!((F=t.batch)!=null&&F.multicall),blockNumber:i,blockTag:o=t.experimental_blockTag??"latest",accessList:a,blobs:c,blockOverrides:u,code:l,data:h,factory:f,factoryData:d,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:x,nonce:v,to:E,value:I,stateOverride:S,...P}=e,C=n?Yt(n):void 0;if(l&&(f||d))throw new G("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(l&&E)throw new G("Cannot provide both `code` & `to` as parameters.");const O=l&&h,j=f&&d&&E&&h,k=O||j,L=O?nv({code:l,data:h}):j?lI({data:h,factory:f,factoryData:d,to:E}):h;try{$c(e);const D=(typeof i=="bigint"?Y(i):void 0)||o,N=u?J1(u):void 0,U=Fp(S),z=(_=($=(R=t.chain)==null?void 0:R.formatters)==null?void 0:$.transactionRequest)==null?void 0:_.format,Q=(z||vl)({...Mp(P,{format:z}),from:C==null?void 0:C.address,accessList:a,authorizationList:r,blobs:c,data:L,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:x,nonce:v,to:k?void 0:E,value:I});if(s&&cI({request:Q})&&!U&&!N)try{return await uI(t,{...Q,blockNumber:i,blockTag:o})}catch(te){if(!(te instanceof _1)&&!(te instanceof Mf))throw te}const W=(()=>{const te=[Q,D];return U&&N?[...te,U,N]:U?[...te,U]:N?[...te,{},N]:te})(),ee=await t.request({method:"eth_call",params:W});return ee==="0x"?{data:void 0}:{data:ee}}catch(B){const D=hI(B),{offchainLookup:N,offchainLookupSignature:U}=await fi(async()=>{const{offchainLookup:z,offchainLookupSignature:V}=await Promise.resolve().then(()=>j3);return{offchainLookup:z,offchainLookupSignature:V}},void 0);if(t.ccipRead!==!1&&(D==null?void 0:D.slice(0,10))===U&&E)return{data:await N(t,{data:D,to:E})};throw k&&(D==null?void 0:D.slice(0,10))==="0x101bb98d"?new d$({factory:f}):ev(B,{...e,account:C,chain:t.chain})}}function cI({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(nI)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function uI(t,e){var g;const{batchSize:n=1024,deployless:r=!1,wait:s=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:i,blockTag:o=t.experimental_blockTag??"latest",data:a,to:c}=e,u=(()=>{if(r)return null;if(e.multicallAddress)return e.multicallAddress;if(t.chain)return Lo({blockNumber:i,chain:t.chain,contract:"multicall3"});throw new _1})(),h=(typeof i=="bigint"?Y(i):void 0)||o,{schedule:f}=tv({id:`${t.uid}.${h}`,wait:s,shouldSplitBatch(y){return y.reduce((x,{data:v})=>x+(v.length-2),0)>n*2},fn:async y=>{const w=y.map(E=>({allowFailure:!0,callData:E.data,target:E.to})),x=Un({abi:ku,args:[w],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{...u===null?{data:nv({code:Rp,data:x})}:{to:u,data:x}},h]});return hi({abi:ku,args:[w],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:d,success:p}]=await f({data:a,to:c});if(!p)throw new gl({data:d});return d==="0x"?{data:void 0}:{data:d}}function nv(t){const{code:e,data:n}=t;return kp({abi:x1(["constructor(bytes, bytes)"]),bytecode:X1,args:[e,n]})}function lI(t){const{data:e,factory:n,factoryData:r,to:s}=t;return kp({abi:x1(["constructor(address, bytes, address, bytes)"]),bytecode:rI,args:[s,e,n,r]})}function hI(t){var n;if(!(t instanceof G))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function kn(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Un({abi:n,args:s,functionName:i});try{const{data:c}=await ne(t,Ic,"call")({...o,data:a,to:r});return hi({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw vo(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function fI(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Lo({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),l=c==null?void 0:c.ensTlds;if(l&&!l.some(f=>i.endsWith(f)))return null;const h=s!=null?[jf(i),BigInt(s)]:[jf(i)];try{const f=Un({abi:tg,functionName:"addr",args:h}),d={address:u,abi:Mw,functionName:"resolveWithGateways",args:[Zt(Op(i)),f,o??[wc]],blockNumber:n,blockTag:r},g=await ne(t,kn,"readContract")(d);if(g[0]==="0x")return null;const y=hi({abi:tg,args:h,functionName:"addr",data:g[0]});return y==="0x"||Wt(y)==="0x00"?null:y}catch(f){if(a)throw f;if(Ap(f))return null;throw f}}class dI extends G{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class ta extends G{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class zp extends G{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class pI extends G{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const gI=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,yI=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,mI=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,bI=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function wI(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function Cg(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function rv({uri:t,gatewayUrls:e}){const n=mI.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=Cg(e==null?void 0:e.ipfs,"https://ipfs.io"),s=Cg(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(gI),{protocol:o,subpath:a,target:c,subtarget:u=""}=(i==null?void 0:i.groups)||{},l=o==="ipns:/"||a==="ipns/",h=o==="ipfs:/"||a==="ipfs/"||yI.test(t);if(t.startsWith("http")&&!l&&!h){let d=t;return e!=null&&e.arweave&&(d=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:d,isOnChain:!1,isEncoded:!1}}if((l||h)&&c)return{uri:`${r}/${l?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let f=t.replace(bI,"");if(f.startsWith("<svg")&&(f=`data:image/svg+xml;base64,${btoa(f)}`),f.startsWith("data:")||f.startsWith("{"))return{uri:f,isOnChain:!0,isEncoded:!1};throw new zp({uri:t})}function sv(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new dI({data:t});return t.image||t.image_url||t.image_data}async function vI({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await qp({gatewayUrls:t,uri:sv(n)})}catch{throw new zp({uri:e})}}async function qp({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=rv({uri:e,gatewayUrls:t});if(r||await wI(n))return n;throw new zp({uri:e})}function EI(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new ta({reason:"Only EIP-155 supported"});if(!o)throw new ta({reason:"Chain ID not found"});if(!c)throw new ta({reason:"Contract address not found"});if(!s)throw new ta({reason:"Token ID not found"});if(!a)throw new ta({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o,10),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function xI(t,{nft:e}){if(e.namespace==="erc721")return kn(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return kn(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new pI({namespace:e.namespace})}async function $I(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?II(t,{gatewayUrls:e,record:n}):qp({uri:n,gatewayUrls:e})}async function II(t,{gatewayUrls:e,record:n}){const r=EI(n),s=await xI(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=rv({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const u=a?atob(i.replace("data:application/json;base64,","")):i,l=JSON.parse(u);return qp({uri:sv(l),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),vI({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function iv(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Lo({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),l=c==null?void 0:c.ensTlds;if(l&&!l.some(h=>i.endsWith(h)))return null;try{const h={address:u,abi:Mw,args:[Zt(Op(i)),Un({abi:eg,functionName:"text",args:[jf(i),s]}),o??[wc]],functionName:"resolveWithGateways",blockNumber:n,blockTag:r},d=await ne(t,kn,"readContract")(h);if(d[0]==="0x")return null;const p=hi({abi:eg,functionName:"text",data:d[0]});return p===""?null:p}catch(h){if(a)throw h;if(Ap(h))return null;throw h}}async function _I(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await ne(t,iv,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await $I(t,{record:c,gatewayUrls:r})}catch{return null}}async function SI(t,e){const{address:n,blockNumber:r,blockTag:s,coinType:i=60n,gatewayUrls:o,strict:a}=e,{chain:c}=t,u=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Lo({blockNumber:r,chain:c,contract:"ensUniversalResolver"})})();try{const l={address:u,abi:HE,args:[n,i,o??[wc]],functionName:"reverseWithGateways",blockNumber:r,blockTag:s},h=ne(t,kn,"readContract"),[f]=await h(l);return f||null}catch(l){if(a)throw l;if(Ap(l))return null;throw l}}async function PI(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return Lo({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(u=>s.endsWith(u)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await ne(t,kn,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Zt(Op(s))],blockNumber:n,blockTag:r});return c}async function ov(t,e){var y,w,x;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:h,to:f,value:d,...p}=e,g=n?Yt(n):void 0;try{$c(e);const E=(typeof r=="bigint"?Y(r):void 0)||s,I=(x=(w=(y=t.chain)==null?void 0:y.formatters)==null?void 0:w.transactionRequest)==null?void 0:x.format,P=(I||vl)({...Mp(p,{format:I}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:h,to:f,value:d}),C=await t.request({method:"eth_createAccessList",params:[P,E]});return{accessList:C.accessList,gasUsed:BigInt(C.gasUsed)}}catch(v){throw ev(v,{...e,account:g,chain:t.chain})}}function xl(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function AI(t){const e=xl(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}class OI extends G{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const Tg="/docs/contract/encodeEventTopics";function _c(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const u=li({abi:e,name:n});if(!u)throw new ig(n,{docsPath:Tg});s=u}if(s.type!=="event")throw new ig(void 0,{docsPath:Tg});const i=Tn(s),o=fl(i);let a=[];if(r&&"inputs"in s){const u=(c=s.inputs)==null?void 0:c.filter(h=>"indexed"in h&&h.indexed),l=Array.isArray(r)?r:Object.values(r).length>0?(u==null?void 0:u.map(h=>r[h.name]))??[]:[];l.length>0&&(a=(u==null?void 0:u.map((h,f)=>Array.isArray(l[f])?l[f].map((d,p)=>Dg({param:h,value:l[f][p]})):typeof l[f]<"u"&&l[f]!==null?Dg({param:h,value:l[f]}):null))??[])}return[o,...a]}function Dg({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return ht(Uo(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new OI(t.type);return kr([t],[e])}async function av(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,u=xl(t,{method:"eth_newFilter"}),l=i?_c({abi:r,args:s,eventName:i}):void 0,h=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?Y(o):o,toBlock:typeof c=="bigint"?Y(c):c,topics:l}]});return{abi:r,args:s,eventName:i,id:h,request:u(h),strict:!!a,type:"event"}}async function cv(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),u=xl(t,{method:"eth_newFilter"});let l=[];c&&(l=[c.flatMap(d=>_c({abi:[d],eventName:d.name,args:n}))],r&&(l=l[0]));const h=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?Y(i):i,toBlock:typeof a=="bigint"?Y(a):a,...l.length?{topics:l}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:h,request:u(h),strict:!!o,toBlock:a,type:"event"}}async function uv(t){const e=xl(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}function CI(t){const e=ht(`0x${t.substring(4)}`).substring(26);return ll(`0x${e}`)}async function TI({hash:t,signature:e}){const n=Dn(t)?t:Zt(t),{secp256k1:r}=await fi(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>rS);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:u,s:l,v:h,yParity:f}=e,d=Number(f??h),p=Bg(d);return new r.Signature(lt(u),lt(l)).addRecoveryBit(p)}const o=Dn(e)?e:Zt(e);if(De(o)!==65)throw new Error("invalid signature length");const a=fn(`0x${o.slice(130)}`),c=Bg(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Bg(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function lv({hash:t,signature:e}){return CI(await TI({hash:t,signature:e}))}function ds(t,e="hex"){const n=hv(t),r=xp(new Uint8Array(n.length));return n.encode(r),e==="hex"?Ve(r.bytes):r.bytes}function hv(t){return Array.isArray(t)?DI(t.map(e=>hv(e))):BI(t)}function DI(t){const e=t.reduce((s,i)=>s+i.length,0),n=fv(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function BI(t){const e=typeof t=="string"?dn(t):t,n=fv(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function fv(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new G("Length is too large.")}function NI(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=ht(kt(["0x05",ds([e?Y(e):"0x",s,n?Y(n):"0x"])]));return r==="bytes"?dn(i):i}async function dv(t){const{authorization:e,signature:n}=t;return lv({hash:NI(e),signature:n??e})}class RI extends G{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:h,value:f}){var p;const d=pl({from:n==null?void 0:n.address,to:h,value:typeof f<"u"&&`${C1(f)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${On(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${On(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${On(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",d].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function kI(t,{docsPath:e,...n}){const r=(()=>{const s=Up(t,n);return s instanceof wl?t:s})();return new RI(r,{docsPath:e,...n})}class UI extends G{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class Hp extends G{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class MI extends G{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${On(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class pv extends G{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const gv={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function $l(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?fn(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?fn(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?gv[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=jI(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}const LI=Lp("transaction",$l);function jI(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function Vp(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:$l(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}const FI=Lp("block",Vp);async function tr(t,{blockHash:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest",includeTransactions:s}={}){var u,l,h;const i=s??!1,o=n!==void 0?Y(n):void 0;let a=null;if(e?a=await t.request({method:"eth_getBlockByHash",params:[e,i]},{dedupe:!0}):a=await t.request({method:"eth_getBlockByNumber",params:[o||r,i]},{dedupe:!!o}),!a)throw new pv({blockHash:e,blockNumber:n});return(((h=(l=(u=t.chain)==null?void 0:u.formatters)==null?void 0:l.block)==null?void 0:h.format)||Vp)(a)}async function Kp(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function zI(t,e){return yv(t,e)}async function yv(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const u=n||await ne(t,tr,"getBlock")({}),l=await a({block:u,client:t,request:s});if(l===null)throw new Error;return l}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return lt(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):ne(t,tr,"getBlock")({}),ne(t,Kp,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new Hp;const u=c-a.baseFeePerGas;return u<0n?0n:u}}async function qI(t,e){return Qf(t,e)}async function Qf(t,e){var f,d;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new UI;const c=10**(((f=o.toString().split(".")[1])==null?void 0:f.length)??0),u=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),l=n||await ne(t,tr,"getBlock")({});if(typeof((d=r==null?void 0:r.fees)==null?void 0:d.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:u,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new Hp;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await yv(t,{block:l,chain:r,request:s}),g=u(l.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??u(await ne(t,Kp,"getGasPrice")({}))}}async function Gp(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?Y(r):n]},{dedupe:!!r});return fn(s)}function Wp(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>dn(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Ve(i))}function Zp(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>dn(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>dn(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Ve(o))}function HI(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function VI(t,e,n){return t&e^~t&n}function KI(t,e,n){return t&e^t&n^e&n}let GI=class extends Ep{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=ih(this.buffer)}update(e){yo(this),e=cl(e),Ks(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=ih(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){yo(this),Jw(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,mo(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let h=o;h<s;h++)n[h]=0;HI(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=ih(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,l[h],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Lr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),WI=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),jr=new Uint32Array(64);let ZI=class extends GI{constructor(e=32){super(64,e,8,!1),this.A=Lr[0]|0,this.B=Lr[1]|0,this.C=Lr[2]|0,this.D=Lr[3]|0,this.E=Lr[4]|0,this.F=Lr[5]|0,this.G=Lr[6]|0,this.H=Lr[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let h=0;h<16;h++,n+=4)jr[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const f=jr[h-15],d=jr[h-2],p=jn(f,7)^jn(f,18)^f>>>3,g=jn(d,17)^jn(d,19)^d>>>10;jr[h]=g+jr[h-7]+p+jr[h-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let h=0;h<64;h++){const f=jn(a,6)^jn(a,11)^jn(a,25),d=l+f+VI(a,c,u)+WI[h]+jr[h]|0,g=(jn(r,2)^jn(r,13)^jn(r,22))+KI(r,s,i)|0;l=u,u=c,c=a,a=o+d|0,o=i,i=s,s=r,r=d+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,c,u,l)}roundClean(){mo(jr)}destroy(){this.set(0,0,0,0,0,0,0,0),mo(this.buffer)}};const mv=Xw(()=>new ZI),YI=mv;function QI(t,e){return YI(Dn(t,{strict:!1})?Uo(t):t)}function JI(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=QI(e);return s.set([n],0),r==="bytes"?s:Ve(s)}function bv(t){const{commitments:e,version:n}=t,r=t.to??(typeof e[0]=="string"?"hex":"bytes"),s=[];for(const i of e)s.push(JI({commitment:i,to:r,version:n}));return s}const Ng=6,wv=32,Yp=4096,vv=wv*Yp,Rg=vv*Ng-1-1*Yp*Ng,Ev=1;class XI extends G{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class xv extends G{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class e3 extends G{constructor({hash:e,size:n}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}}class t3 extends G{constructor({hash:e,version:n}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${Ev}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}function n3(t){const e=t.to??(typeof t.data=="string"?"hex":"bytes"),n=typeof t.data=="string"?dn(t.data):t.data,r=De(n);if(!r)throw new xv;if(r>Rg)throw new XI({maxSize:Rg,size:r});const s=[];let i=!0,o=0;for(;i;){const a=xp(new Uint8Array(vv));let c=0;for(;c<Yp;){const u=n.slice(o,o+(wv-1));if(a.pushByte(0),a.pushBytes(u),u.length<31){a.pushByte(128),i=!1;break}c++,o+=31}s.push(a)}return e==="bytes"?s.map(a=>a.bytes):s.map(a=>Ve(a.bytes))}function $v(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??n3({data:e,to:r}),i=t.commitments??Wp({blobs:s,kzg:n,to:r}),o=t.proofs??Zp({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function Iv(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new c$({transaction:t})}async function Qp(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return fn(e)}const r3=["blobVersionedHashes","chainId","fees","gas","nonce","type"],kg=new Map;async function _v(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:u=r3,type:l}=e,h=n&&Yt(n),f={...e,...h?{from:h==null?void 0:h.address}:{}};let d;async function p(){return d||(d=await ne(t,tr,"getBlock")({blockTag:"latest"}),d)}let g;async function y(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await ne(t,Qp,"getChainId")({}),g))}if(u.includes("nonce")&&typeof a>"u"&&h)if(c){const w=await y();f.nonce=await c.consume({address:h.address,chainId:w,client:t})}else f.nonce=await ne(t,Gp,"getTransactionCount")({address:h.address,blockTag:"pending"});if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&r&&o){const w=Wp({blobs:r,kzg:o});if(u.includes("blobVersionedHashes")){const x=bv({commitments:w,to:"hex"});f.blobVersionedHashes=x}if(u.includes("sidecars")){const x=Zp({blobs:r,commitments:w,kzg:o}),v=$v({blobs:r,commitments:w,proofs:x,to:"hex"});f.sidecars=v}}if(u.includes("chainId")&&(f.chainId=await y()),(u.includes("fees")||u.includes("type"))&&typeof l>"u")try{f.type=Iv(f)}catch{let w=kg.get(t.uid);if(typeof w>"u"){const x=await p();w=typeof(x==null?void 0:x.baseFeePerGas)=="bigint",kg.set(t.uid,w)}f.type=w?"eip1559":"legacy"}if(u.includes("fees"))if(f.type!=="legacy"&&f.type!=="eip2930"){if(typeof f.maxFeePerGas>"u"||typeof f.maxPriorityFeePerGas>"u"){const w=await p(),{maxFeePerGas:x,maxPriorityFeePerGas:v}=await Qf(t,{block:w,chain:s,request:f});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new MI({maxPriorityFeePerGas:v});f.maxPriorityFeePerGas=v,f.maxFeePerGas=x}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new Hp;if(typeof e.gasPrice>"u"){const w=await p(),{gasPrice:x}=await Qf(t,{block:w,chain:s,request:f,type:"legacy"});f.gasPrice=x}}return u.includes("gas")&&typeof i>"u"&&(f.gas=await ne(t,Jp,"estimateGas")({...f,account:h&&{address:h.address,type:"json-rpc"}})),$c(f),delete f.parameters,f}async function Sv(t,{address:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest"}){const s=typeof n=="bigint"?Y(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function Jp(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Yt(n):void 0;try{let R=function(_){const{block:B,request:D,rpcStateOverride:N}=_;return t.request({method:"eth_estimateGas",params:N?[D,B??t.experimental_blockTag??"latest",N]:B?[D,B]:[D]})};const{accessList:a,authorizationList:c,blobs:u,blobVersionedHashes:l,blockNumber:h,blockTag:f,data:d,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:x,nonce:v,value:E,stateOverride:I,...S}=await _v(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),C=(typeof h=="bigint"?Y(h):void 0)||f,O=Fp(I),j=await(async()=>{if(S.to)return S.to;if(c&&c.length>0)return await dv({authorization:c[0]}).catch(()=>{throw new G("`to` is required. Could not infer from `authorizationList`")})})();$c(e);const k=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,F=(k||vl)({...Mp(S,{format:k}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:u,blobVersionedHashes:l,data:d,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:x,nonce:v,to:j,value:E});let $=BigInt(await R({block:C,request:F,rpcStateOverride:O}));if(c){const _=await Sv(t,{address:F.from}),B=await Promise.all(c.map(async D=>{const{address:N}=D,U=await R({block:C,request:{authorizationList:void 0,data:d,from:r==null?void 0:r.address,to:N,value:Y(_)},rpcStateOverride:O}).catch(()=>100000n);return 2n*BigInt(U)}));$+=B.reduce((D,N)=>D+N,0n)}return $}catch(a){throw kI(a,{...e,account:r,chain:t.chain})}}async function s3(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=Un({abi:n,args:s,functionName:i});try{return await ne(t,Jp,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(u){const l=a.account?Yt(a.account):void 0;throw vo(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:l==null?void 0:l.address})}}async function i3(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}const o3=new Map,a3=new Map;function c3(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,o3),r=e(t,a3);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function u3(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=c3(e),s=r.response.get();if(s&&n>0&&Date.now()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const l3=t=>`blockNumber.${t}`;async function Sc(t,{cacheTime:e=t.cacheTime}={}){const n=await u3(()=>t.request({method:"eth_blockNumber"}),{cacheKey:l3(t.uid),cacheTime:e});return BigInt(n)}async function h3(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?Y(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),fn(i)}async function Jf(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?Y(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}function jo(t,e){if(!Ke(t,{strict:!1}))throw new mt({address:t});if(!Ke(e,{strict:!1}))throw new mt({address:e});return t.toLowerCase()===e.toLowerCase()}const Ug="/docs/contract/decodeEventLog";function Xp(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new YE({docsPath:Ug});const c=e.find(g=>g.type==="event"&&o===fl(Tn(g)));if(!(c&&"name"in c)||c.type!=="event")throw new Vw(o,{docsPath:Ug});const{name:u,inputs:l}=c,h=l==null?void 0:l.some(g=>!("name"in g&&g.name)),f=h?[]:{},d=l.map((g,y)=>[g,y]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<d.length;g++){const[y,w]=d[g],x=a[g];if(!x)throw new al({abiItem:c,param:y});f[h?w:y.name||w]=f3({param:y,value:x})}const p=l.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=yc(p,n);if(g)if(h)for(let y=0;y<l.length;y++)f[y]=f[y]??g.shift();else for(let y=0;y<p.length;y++)f[p[y].name]=g[y]}catch(g){if(i)throw g instanceof zw||g instanceof o1?new Pa({abiItem:c,data:n,params:p,size:De(n)}):g}else if(i)throw new Pa({abiItem:c,data:"0x",params:p,size:0})}return{eventName:u,args:Object.values(f).length>0?f:void 0}}function f3({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(yc([t],e)||[])[0]}function e0(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(l=>l.type==="event"&&o.topics[0]===fl(l));if(!c)return null;const u=Xp({...o,abi:[c],strict:s});return i&&!i.includes(u.eventName)||!d3({args:u.args,inputs:c.inputs,matchArgs:n})?null:{...u,...o}}catch(c){let u,l;if(c instanceof Vw)return null;if(c instanceof Pa||c instanceof al){if(s)return null;u=c.abiItem.name,l=(a=c.abiItem.inputs)==null?void 0:a.some(h=>!("name"in h&&h.name))}return{...o,args:l?[]:{},eventName:u}}}).filter(Boolean)}function d3(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?jo(o,a):i.type==="string"||i.type==="bytes"?ht(Uo(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(u=>s(a,u,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(u=>u.name===i);return a?(Array.isArray(o)?o:[o]).some(u=>s(a,u,e[i])):!1}):!1}function Br(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function t0(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const u=c??!1,l=o??(i?[i]:void 0);let h=[];l&&(h=[l.flatMap(g=>_c({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(h=h[0]));let f;n?f=await t.request({method:"eth_getLogs",params:[{address:e,topics:h,blockHash:n}]}):f=await t.request({method:"eth_getLogs",params:[{address:e,topics:h,fromBlock:typeof r=="bigint"?Y(r):r,toBlock:typeof s=="bigint"?Y(s):s}]});const d=f.map(p=>Br(p));return l?e0({abi:l,args:a,logs:d,strict:u}):d}async function Pv(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:u}=e,l=o?li({abi:n,name:o}):void 0,h=l?void 0:n.filter(f=>f.type==="event");return ne(t,t0,"getLogs")({address:r,args:s,blockHash:i,event:l,events:h,fromBlock:a,toBlock:c,strict:u})}class p3 extends G{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function g3(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,u,l,h]=await ne(t,kn,"readContract")({abi:y3,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:u,salt:l},extensions:h,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new p3({address:n}):o}}const y3=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function m3(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function b3(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?Y(n):void 0,o=await t.request({method:"eth_feeHistory",params:[Y(e),i||r,s]},{dedupe:!!i});return m3(o)}async function Il(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>Br(i));return!("abi"in e)||!e.abi?s:e0({abi:e.abi,logs:s,strict:n})}async function w3(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>Br(i));return e.abi?e0({abi:e.abi,logs:s,strict:n}):s}function nK(t,e){if(t.length!==e.length)throw new qw({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(Av(s,i))}return kt(n)}function Av(t,e,n=!1){if(t==="address"){const o=e;if(!Ke(o))throw new mt({address:o});return Sr(o.toLowerCase(),{size:n?32:null})}if(t==="string")return go(e);if(t==="bytes")return e;if(t==="bool")return Sr(vp(e),{size:n?32:1});const r=t.match($p);if(r){const[o,a,c="256"]=r,u=Number.parseInt(c,10)/8;return Y(e,{size:n?32:u,signed:a==="int"})}const s=t.match(l1);if(s){const[o,a]=s;if(Number.parseInt(a,10)!==(e.length-2)/2)throw new Gw({expectedSize:Number.parseInt(a,10),givenSize:(e.length-2)/2});return Sr(e,{dir:"right",size:n?32:null})}const i=t.match(Vx);if(i&&Array.isArray(e)){const[o,a]=i,c=[];for(let u=0;u<e.length;u++)c.push(Av(a,e[u],!0));return c.length===0?"0x":kt(c)}throw new nx(t)}function v3(t){const{authorizationList:e}=t;if(e)for(const n of e){const{chainId:r}=n,s=n.address;if(!Ke(s))throw new mt({address:s});if(r<0)throw new dl({chainId:r})}n0(t)}function E3(t){const{blobVersionedHashes:e}=t;if(e){if(e.length===0)throw new xv;for(const n of e){const r=De(n),s=fn(Gs(n,0,1));if(r!==32)throw new e3({hash:n,size:r});if(s!==Ev)throw new t3({hash:n,version:s})}}n0(t)}function n0(t){const{chainId:e,maxPriorityFeePerGas:n,maxFeePerGas:r,to:s}=t;if(e<=0)throw new dl({chainId:e});if(s&&!Ke(s))throw new mt({address:s});if(r&&r>El)throw new Js({maxFeePerGas:r});if(n&&r&&n>r)throw new Za({maxFeePerGas:r,maxPriorityFeePerGas:n})}function x3(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=t;if(e<=0)throw new dl({chainId:e});if(i&&!Ke(i))throw new mt({address:i});if(n||s)throw new G("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>El)throw new Js({maxFeePerGas:r})}function $3(t){const{chainId:e,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=t;if(i&&!Ke(i))throw new mt({address:i});if(typeof e<"u"&&e<=0)throw new dl({chainId:e});if(n||s)throw new G("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>El)throw new Js({maxFeePerGas:r})}function _l(t){if(!t||t.length===0)return[];const e=[];for(let n=0;n<t.length;n++){const{address:r,storageKeys:s}=t[n];for(let i=0;i<s.length;i++)if(s[i].length-2!==64)throw new u$({storageKey:s[i]});if(!Ke(r,{strict:!1}))throw new mt({address:r});e.push([r,s])}return e}function I3(t,e){const n=Iv(t);return n==="eip1559"?P3(t,e):n==="eip2930"?A3(t,e):n==="eip4844"?S3(t,e):n==="eip7702"?_3(t,e):O3(t,e)}function _3(t,e){const{authorizationList:n,chainId:r,gas:s,nonce:i,to:o,value:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:l,data:h}=t;v3(t);const f=_l(l),d=C3(n);return kt(["0x04",ds([Y(r),i?Y(i):"0x",u?Y(u):"0x",c?Y(c):"0x",s?Y(s):"0x",o??"0x",a?Y(a):"0x",h??"0x",f,d,...Pc(t,e)])])}function S3(t,e){const{chainId:n,gas:r,nonce:s,to:i,value:o,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:l,data:h}=t;E3(t);let f=t.blobVersionedHashes,d=t.sidecars;if(t.blobs&&(typeof f>"u"||typeof d>"u")){const v=typeof t.blobs[0]=="string"?t.blobs:t.blobs.map(S=>Ve(S)),E=t.kzg,I=Wp({blobs:v,kzg:E});if(typeof f>"u"&&(f=bv({commitments:I})),typeof d>"u"){const S=Zp({blobs:v,commitments:I,kzg:E});d=$v({blobs:v,commitments:I,proofs:S})}}const p=_l(l),g=[Y(n),s?Y(s):"0x",u?Y(u):"0x",c?Y(c):"0x",r?Y(r):"0x",i??"0x",o?Y(o):"0x",h??"0x",p,a?Y(a):"0x",f??[],...Pc(t,e)],y=[],w=[],x=[];if(d)for(let v=0;v<d.length;v++){const{blob:E,commitment:I,proof:S}=d[v];y.push(E),w.push(I),x.push(S)}return kt(["0x03",ds(d?[g,y,w,x]:g)])}function P3(t,e){const{chainId:n,gas:r,nonce:s,to:i,value:o,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:u,data:l}=t;n0(t);const h=_l(u),f=[Y(n),s?Y(s):"0x",c?Y(c):"0x",a?Y(a):"0x",r?Y(r):"0x",i??"0x",o?Y(o):"0x",l??"0x",h,...Pc(t,e)];return kt(["0x02",ds(f)])}function A3(t,e){const{chainId:n,gas:r,data:s,nonce:i,to:o,value:a,accessList:c,gasPrice:u}=t;x3(t);const l=_l(c),h=[Y(n),i?Y(i):"0x",u?Y(u):"0x",r?Y(r):"0x",o??"0x",a?Y(a):"0x",s??"0x",l,...Pc(t,e)];return kt(["0x01",ds(h)])}function O3(t,e){const{chainId:n=0,gas:r,data:s,nonce:i,to:o,value:a,gasPrice:c}=t;$3(t);let u=[i?Y(i):"0x",c?Y(c):"0x",r?Y(r):"0x",o??"0x",a?Y(a):"0x",s??"0x"];if(e){const l=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+e.v-27n);const d=27n+(e.v===27n?0n:1n);if(e.v!==d)throw new a$({v:e.v});return d})(),h=Wt(e.r),f=Wt(e.s);u=[...u,Y(l),h==="0x00"?"0x":h,f==="0x00"?"0x":f]}else n>0&&(u=[...u,Y(n),"0x","0x"]);return ds(u)}function Pc(t,e){const n=e??t,{v:r,yParity:s}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];const i=Wt(n.r),o=Wt(n.s);return[typeof s=="number"?s?Y(1):"0x":r===0n?"0x":r===1n?Y(1):r===27n?"0x":Y(1),i==="0x00"?"0x":i,o==="0x00"?"0x":o]}function C3(t){if(!t||t.length===0)return[];const e=[];for(const n of t){const{chainId:r,nonce:s,...i}=n,o=n.address;e.push([r?Zt(r):"0x",o,s?Zt(s):"0x",...Pc({},i)])}return e}async function T3({address:t,authorization:e,signature:n}){return jo(Et(t),await dv({authorization:e,signature:n}))}const Qc=new ul(8192);function D3(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(Qc.get(n))return Qc.get(n);const r=t().finally(()=>Qc.delete(n));return Qc.set(n,r),r}async function ju(t){return new Promise(e=>setTimeout(e,t))}function Ya(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:u})=>{const l=typeof e=="function"?e({count:a,error:u}):e;l&&await ju(l),o({count:a+1})};try{const u=await t();s(u)}catch(u){if(a<n&&await r({count:a,error:u}))return c({error:u});i(u)}};o()})}function B3(t,e={}){return async(n,r={})=>{var h;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:u}=n;if((h=i==null?void 0:i.exclude)!=null&&h.includes(u))throw new Ps(new Error("method not supported"),{method:u});if(i!=null&&i.include&&!i.include.includes(u))throw new Ps(new Error("method not supported"),{method:u});const l=s?go(`${c}.${He(n)}`):void 0;return D3(()=>Ya(async()=>{try{return await t(n)}catch(f){const d=f;switch(d.code){case Ca.code:throw new Ca(d);case Ta.code:throw new Ta(d);case Da.code:throw new Da(d,{method:n.method});case Ba.code:throw new Ba(d);case Ws.code:throw new Ws(d);case Zs.code:throw new Zs(d);case Na.code:throw new Na(d);case us.code:throw new us(d);case bo.code:throw new bo(d);case Ps.code:throw new Ps(d,{method:n.method});case wo.code:throw new wo(d);case Ra.code:throw new Ra(d);case Oe.code:throw new Oe(d);case ka.code:throw new ka(d);case Ua.code:throw new Ua(d);case Ma.code:throw new Ma(d);case La.code:throw new La(d);case pn.code:throw new pn(d);case ja.code:throw new ja(d);case Fa.code:throw new Fa(d);case za.code:throw new za(d);case qa.code:throw new qa(d);case Ha.code:throw new Ha(d);case Va.code:throw new Va(d);case Ka.code:throw new Ka(d);case 5e3:throw new Oe(d);default:throw f instanceof G?f:new v$(d)}}},{delay:({count:f,error:d})=>{var p;if(d&&d instanceof js){const g=(p=d==null?void 0:d.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g,10)*1e3}return~~(1<<f)*o},retryCount:a,shouldRetry:({error:f})=>N3(f)}),{enabled:s,id:l})}}function N3(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===wo.code||t.code===Ws.code:t instanceof js&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}class R3 extends G{constructor({callbackSelector:e,cause:n,data:r,extraData:s,sender:i,urls:o}){var a;super(n.shortMessage||"An error occurred while fetching for an offchain result.",{cause:n,metaMessages:[...n.metaMessages||[],(a=n.metaMessages)!=null&&a.length?"":[],"Offchain Gateway Call:",o&&["  Gateway URL(s):",...o.map(c=>`    ${bc(c)}`)],`  Sender: ${i}`,`  Data: ${r}`,`  Callback selector: ${e}`,`  Extra data: ${s}`].flat(),name:"OffchainLookupError"})}}class k3 extends G{constructor({result:e,url:n}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${bc(n)}`,`Response: ${He(e)}`],name:"OffchainLookupResponseMalformedError"})}}class U3 extends G{constructor({sender:e,to:n}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${n}`,`OffchainLookup sender address: ${e}`],name:"OffchainLookupSenderMismatchError"})}}const M3="0x556f1830",Ov={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function L3(t,{blockNumber:e,blockTag:n,data:r,to:s}){const{args:i}=P1({data:r,abi:[Ov]}),[o,a,c,u,l]=i,{ccipRead:h}=t,f=h&&typeof(h==null?void 0:h.request)=="function"?h.request:Cv;try{if(!jo(s,o))throw new U3({sender:o,to:s});const d=a.includes(wc)?await R1({data:c,ccipRequest:f}):await f({data:c,sender:o,urls:a}),{data:p}=await Ic(t,{blockNumber:e,blockTag:n,data:Bn([u,kr([{type:"bytes"},{type:"bytes"}],[d,l])]),to:s});return p}catch(d){throw new R3({callbackSelector:u,cause:d,data:r,extraData:l,sender:o,urls:a})}}async function Cv({data:t,sender:e,urls:n}){var s;let r=new Error("An unknown error occurred.");for(let i=0;i<n.length;i++){const o=n[i],a=o.includes("{data}")?"GET":"POST",c=a==="POST"?{data:t,sender:e}:void 0,u=a==="POST"?{"Content-Type":"application/json"}:{};try{const l=await fetch(o.replace("{sender}",e.toLowerCase()).replace("{data}",t),{body:JSON.stringify(c),headers:u,method:a});let h;if((s=l.headers.get("Content-Type"))!=null&&s.startsWith("application/json")?h=(await l.json()).data:h=await l.text(),!l.ok){r=new js({body:c,details:h!=null&&h.error?He(h.error):l.statusText,headers:l.headers,status:l.status,url:o});continue}if(!Dn(h)){r=new k3({result:h,url:o});continue}return h}catch(l){r=new js({body:c,details:l.message,url:o})}}throw r}const j3=Object.freeze(Object.defineProperty({__proto__:null,ccipRequest:Cv,offchainLookup:L3,offchainLookupAbiItem:Ov,offchainLookupSignature:M3},Symbol.toStringTag,{value:"Module"}));function di(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const Tv={"0x0":"reverted","0x1":"success"};function Dv(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>Br(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?fn(t.transactionIndex):null,status:t.status?Tv[t.status]:null,type:t.type?gv[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const F3=Lp("transactionReceipt",Dv);function rK(t){const{source:e}=t,n=new Map,r=new ul(8192),s=new Map,i=({address:o,chainId:a})=>`${o}.${a}`;return{async consume({address:o,chainId:a,client:c}){const u=i({address:o,chainId:a}),l=this.get({address:o,chainId:a,client:c});this.increment({address:o,chainId:a});const h=await l;return await e.set({address:o,chainId:a},h),r.set(u,h),h},async increment({address:o,chainId:a}){const c=i({address:o,chainId:a}),u=n.get(c)??0;n.set(c,u+1)},async get({address:o,chainId:a,client:c}){const u=i({address:o,chainId:a});let l=s.get(u);return l||(l=(async()=>{try{const f=await e.get({address:o,chainId:a,client:c}),d=r.get(u)??0;return d>0&&f<=d?d+1:(r.delete(u),f)}finally{this.reset({address:o,chainId:a})}})(),s.set(u,l)),(n.get(u)??0)+await l},reset({address:o,chainId:a}){const c=i({address:o,chainId:a});n.delete(c),s.delete(c)}}}function Bv(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function z3(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const Mg=z3();function q3(t,e={}){return{async request(n){var f;const{body:r,fetchFn:s=e.fetchFn??fetch,onRequest:i=e.onRequest,onResponse:o=e.onResponse,timeout:a=e.timeout??1e4}=n,c={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:u,method:l,signal:h}=c;try{const d=await Bv(async({signal:g})=>{const y={...c,body:Array.isArray(r)?He(r.map(E=>({jsonrpc:"2.0",id:E.id??Mg.take(),...E}))):He({jsonrpc:"2.0",id:r.id??Mg.take(),...r}),headers:{"Content-Type":"application/json",...u},method:l||"POST",signal:h||(a>0?g:null)},w=new Request(t,y),x=await(i==null?void 0:i(w,y))??{...y,url:t};return await s(x.url??t,x)},{errorInstance:new Eg({body:r,url:t}),timeout:a,signal:!0});o&&await o(d);let p;if((f=d.headers.get("Content-Type"))!=null&&f.startsWith("application/json"))p=await d.json();else{p=await d.text();try{p=JSON.parse(p||"{}")}catch(g){if(d.ok)throw g;p={error:p}}}if(!d.ok)throw new js({body:r,details:He(p.error)||d.statusText,headers:d.headers,status:d.status,url:t});return p}catch(d){throw d instanceof js||d instanceof Eg?d:new js({body:r,cause:d,url:t})}}}}const H3=`Ethereum Signed Message:
`;function V3(t){const e=typeof t=="string"?go(t):typeof t.raw=="string"?t.raw:Ve(t.raw),n=go(`${H3}${De(e)}`);return Bn([n,e])}function Nv(t,e){return ht(V3(t),e)}class K3 extends G{constructor({domain:e}){super(`Invalid domain "${He(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class G3 extends G{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class W3 extends G{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Z3(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:u,type:l}=c,h=a[u],f=l.match($p);if(f&&(typeof h=="number"||typeof h=="bigint")){const[g,y,w]=f;Y(h,{signed:y==="int",size:Number.parseInt(w,10)/8})}if(l==="address"&&typeof h=="string"&&!Ke(h))throw new mt({address:h});const d=l.match(l1);if(d){const[g,y]=d;if(y&&De(h)!==Number.parseInt(y,10))throw new Gw({expectedSize:Number.parseInt(y,10),givenSize:De(h)})}const p=s[l];p&&(Q3(l),i(p,h))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new K3({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new G3({primaryType:r,types:s})}function Y3({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Q3(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new W3({type:t})}function J3(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:Y3({domain:e}),...t.types};Z3({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(X3({domain:e,types:s})),r!=="EIP712Domain"&&i.push(Rv({data:n,primaryType:r,types:s})),ht(Bn(i))}function X3({domain:t,types:e}){return Rv({data:t,primaryType:"EIP712Domain",types:e})}function Rv({data:t,primaryType:e,types:n}){const r=kv({data:t,primaryType:e,types:n});return ht(r)}function kv({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[e_({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=Mv({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return kr(r,s)}function e_({primaryType:t,types:e}){const n=Zt(t_({primaryType:t,types:e}));return ht(n)}function t_({primaryType:t,types:e}){let n="";const r=Uv({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function Uv({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])Uv({primaryType:i.type,types:e},n);return n}function Mv({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},ht(kv({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},ht(r)];if(n==="string")return[{type:"bytes32"},ht(Zt(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>Mv({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},ht(kr(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}const n_="0x6492649264926492649264926492649264926492649264926492649264926492";let r_=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const s_={checksum:new r_(8192)},yh=s_.checksum;function Lv(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=i1(k$(t));return n==="Bytes"?r:Rn(r)}const i_=/^0x[a-fA-F0-9]{40}$/;function Sl(t,e={}){const{strict:n=!0}=e;if(!i_.test(t))throw new Lg({address:t,cause:new o_});if(n){if(t.toLowerCase()===t)return;if(jv(t)!==t)throw new Lg({address:t,cause:new a_})}}function jv(t){if(yh.has(t))return yh.get(t);Sl(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=Lv(M$(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return yh.set(t,s),s}function Xf(t,e={}){const{strict:n=!0}=e??{};try{return Sl(t,{strict:n}),!0}catch{return!1}}class Lg extends fe{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class o_ extends fe{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class a_ extends fe{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const c_=/^(.*)\[([0-9]*)\]$/,u_=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Fv=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,jg=2n**256n-1n;function no(t,e,n){const{checksumAddress:r,staticPosition:s}=n,i=i0(e.type);if(i){const[o,a]=i;return h_(t,{...e,type:a},{checksumAddress:r,length:o,staticPosition:s})}if(e.type==="tuple")return g_(t,e,{checksumAddress:r,staticPosition:s});if(e.type==="address")return l_(t,{checksum:r});if(e.type==="bool")return f_(t);if(e.type.startsWith("bytes"))return d_(t,e,{staticPosition:s});if(e.type.startsWith("uint")||e.type.startsWith("int"))return p_(t,e);if(e.type==="string")return y_(t,{staticPosition:s});throw new a0(e.type)}const Fg=32,ed=32;function l_(t,e={}){const{checksum:n=!1}=e,r=t.readBytes(32);return[(i=>n?jv(i):i)(Rn(j$(r,-20))),32]}function h_(t,e,n){const{checksumAddress:r,length:s,staticPosition:i}=n;if(!s){const c=Ar(t.readBytes(ed)),u=i+c,l=u+Fg;t.setPosition(u);const h=Ar(t.readBytes(Fg)),f=Qa(e);let d=0;const p=[];for(let g=0;g<h;++g){t.setPosition(l+(f?g*32:d));const[y,w]=no(t,e,{checksumAddress:r,staticPosition:l});d+=w,p.push(y)}return t.setPosition(i+32),[p,32]}if(Qa(e)){const c=Ar(t.readBytes(ed)),u=i+c,l=[];for(let h=0;h<s;++h){t.setPosition(u+h*32);const[f]=no(t,e,{checksumAddress:r,staticPosition:u});l.push(f)}return t.setPosition(i+32),[l,32]}let o=0;const a=[];for(let c=0;c<s;++c){const[u,l]=no(t,e,{checksumAddress:r,staticPosition:i+o});o+=l,a.push(u)}return[a,o]}function f_(t){return[z$(t.readBytes(32),{size:32}),32]}function d_(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Ar(t.readBytes(32));t.setPosition(n+o);const a=Ar(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Rn(c),32]}return[Rn(t.readBytes(Number.parseInt(s,10),32)),32]}function p_(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256",10),s=t.readBytes(32);return[r>48?F$(s,{signed:n}):Ar(s,{signed:n}),32]}function g_(t,e,n){const{checksumAddress:r,staticPosition:s}=n,i=e.components.length===0||e.components.some(({name:c})=>!c),o=i?[]:{};let a=0;if(Qa(e)){const c=Ar(t.readBytes(ed)),u=s+c;for(let l=0;l<e.components.length;++l){const h=e.components[l];t.setPosition(u+a);const[f,d]=no(t,h,{checksumAddress:r,staticPosition:u});a+=d,o[i?l:h==null?void 0:h.name]=f}return t.setPosition(s+32),[o,32]}for(let c=0;c<e.components.length;++c){const u=e.components[c],[l,h]=no(t,u,{checksumAddress:r,staticPosition:s});o[i?c:u==null?void 0:u.name]=l,a+=h}return[o,a]}function y_(t,{staticPosition:e}){const n=Ar(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Ar(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=q$(K1(i));return t.setPosition(e+32),[o,32]}function m_({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(r0({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function r0({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=i0(r.type);if(s){const[i,o]=s;return w_(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return I_(n,{checksumAddress:t,parameter:r});if(r.type==="address")return b_(n,{checksum:t});if(r.type==="bool")return E_(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=Fv.exec(r.type)??[];return x_(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return v_(n,{type:r.type});if(r.type==="string")return $_(n);throw new a0(r.type)}function s0(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Qt(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(vt(e+s,{size:32})),r.push(a),s+=Qt(a)):n.push(a)}return Nn(...n,...r)}function b_(t,e){const{checksum:n=!1}=e;return Sl(t,{strict:n}),{dynamic:!1,encoded:Ys(t.toLowerCase())}}function w_(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new B_(t);if(!i&&t.length!==r)throw new D_({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const u=r0({checksumAddress:n,parameter:s,value:t[c]});u.dynamic&&(o=!0),a.push(u)}if(i||o){const c=s0(a);if(i){const u=vt(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Nn(u,c):u}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Nn(...a.map(({encoded:c})=>c))}}function v_(t,{type:e}){const[,n]=e.split("bytes"),r=Qt(t);if(!n){let s=t;return r%32!==0&&(s=Qs(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Nn(Ys(vt(r,{size:32})),s)}}if(r!==Number.parseInt(n,10))throw new qv({expectedSize:Number.parseInt(n,10),value:t});return{dynamic:!1,encoded:Qs(t)}}function E_(t){if(typeof t!="boolean")throw new fe(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Ys(G1(t))}}function x_(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new Y1({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:vt(t,{size:32,signed:e})}}function $_(t){const e=Np(t),n=Math.ceil(Qt(e)/32),r=[];for(let s=0;s<n;s++)r.push(Qs(nr(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Nn(Qs(vt(Qt(e),{size:32})),...r)}}function I_(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,u=r0({checksumAddress:n,parameter:a,value:t[c]});i.push(u),u.dynamic&&(s=!0)}return{dynamic:s,encoded:s?s0(i):Nn(...i.map(({encoded:o})=>o))}}function i0(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function Qa(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(Qa);const n=i0(t.type);return!!(n&&Qa({...t,type:n[1]}))}const __={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new A_({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new P_({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new zg({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new zg({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function S_(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(__);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}class zg extends fe{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}class P_ extends fe{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}class A_ extends fe{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}function O_(t,e,n={}){const{as:r="Array",checksumAddress:s=!1}=n,i=typeof e=="string"?V1(e):e,o=S_(i);if(Wi(i)===0&&t.length>0)throw new T_;if(Wi(i)&&Wi(i)<32)throw new C_({data:typeof e=="string"?e:Rn(e),parameters:t,size:Wi(i)});let a=0;const c=r==="Array"?[]:{};for(let u=0;u<t.length;++u){const l=t[u];o.setPosition(a);const[h,f]=no(o,l,{checksumAddress:s,staticPosition:0});a+=f,r==="Array"?c.push(h):c[l.name??u]=h}return c}function o0(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new Hv({expectedLength:t.length,givenLength:e.length});const s=m_({checksumAddress:r,parameters:t,values:e}),i=s0(s);return i.length===0?"0x":i}function td(t,e){if(t.length!==e.length)throw new Hv({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(td.encode(s,i))}return Nn(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return Sl(c),Ys(c.toLowerCase(),s?32:0)}if(n==="string")return Np(r);if(n==="bytes")return r;if(n==="bool")return Ys(G1(r),s?32:1);const i=n.match(Fv);if(i){const[c,u,l="256"]=i,h=Number.parseInt(l,10)/8;return vt(r,{size:s?32:h,signed:u==="int"})}const o=n.match(u_);if(o){const[c,u]=o;if(Number.parseInt(u,10)!==(r.length-2)/2)throw new qv({expectedSize:Number.parseInt(u,10),value:r});return Qs(r,s?32:0)}const a=n.match(c_);if(a&&Array.isArray(r)){const[c,u]=a,l=[];for(let h=0;h<r.length;h++)l.push(e(u,r[h],!0));return l.length===0?"0x":Nn(...l)}throw new a0(n)}t.encode=e})(td||(td={}));function zv(t){return Array.isArray(t)&&typeof t[0]=="string"||typeof t=="string"?mg(t):t}class C_ extends fe{constructor({data:e,parameters:n,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${Hi(n)})`,`Data:   ${e} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class T_ extends fe{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class D_ extends fe{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class qv extends fe{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Qt(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class Hv extends fe{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class B_ extends fe{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class a0 extends fe{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}let Vv=class extends Ep{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,vx(e);const r=cl(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),mo(i)}update(e){return yo(this),this.iHash.update(e),this}digestInto(e){yo(this),Ks(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Kv=(t,e,n)=>new Vv(t,e).update(n).digest();Kv.create=(t,e)=>new Vv(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bt=BigInt(0),xt=BigInt(1),Os=BigInt(2),N_=BigInt(3),Gv=BigInt(4),Wv=BigInt(5),Zv=BigInt(8);function Ct(t,e){const n=t%e;return n>=Bt?n:e+n}function tn(t,e,n){let r=t;for(;e-- >Bt;)r*=r,r%=n;return r}function nd(t,e){if(t===Bt)throw new Error("invert: expected non-zero number");if(e<=Bt)throw new Error("invert: expected positive modulus, got "+e);let n=Ct(t,e),r=e,s=Bt,i=xt;for(;n!==Bt;){const a=r/n,c=r%n,u=s-i*a;r=n,n=c,s=i,i=u}if(r!==xt)throw new Error("invert: does not exist");return Ct(s,e)}function Yv(t,e){const n=(t.ORDER+xt)/Gv,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function R_(t,e){const n=(t.ORDER-Wv)/Zv,r=t.mul(e,Os),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Os),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function k_(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-xt,n=0;for(;e%Os===Bt;)e/=Os,n++;let r=Os;const s=c0(t);for(;qg(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Yv;let i=s.pow(r,e);const o=(e+xt)/Os;return function(c,u){if(c.is0(u))return u;if(qg(c,u)!==1)throw new Error("Cannot find square root");let l=n,h=c.mul(c.ONE,i),f=c.pow(u,e),d=c.pow(u,o);for(;!c.eql(f,c.ONE);){if(c.is0(f))return c.ZERO;let p=1,g=c.sqr(f);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===l)throw new Error("Cannot find square root");const y=xt<<BigInt(l-p-1),w=c.pow(h,y);l=p,h=c.sqr(w),f=c.mul(f,h),d=c.mul(d,w)}return d}}function U_(t){return t%Gv===N_?Yv:t%Zv===Wv?R_:k_(t)}const M_=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function L_(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=M_.reduce((r,s)=>(r[s]="function",r),e);return ml(t,n)}function j_(t,e,n){if(n<Bt)throw new Error("invalid exponent, negatives unsupported");if(n===Bt)return t.ONE;if(n===xt)return e;let r=t.ONE,s=e;for(;n>Bt;)n&xt&&(r=t.mul(r,s)),s=t.sqr(s),n>>=xt;return r}function Qv(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function qg(t,e){const n=(t.ORDER-xt)/Os,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Jv(t,e){e!==void 0&&Aa(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function c0(t,e,n=!1,r={}){if(t<=Bt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=Jv(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:yl(s),ZERO:Bt,ONE:xt,create:c=>Ct(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Bt<=c&&c<t},is0:c=>c===Bt,isOdd:c=>(c&xt)===xt,neg:c=>Ct(-c,t),eql:(c,u)=>c===u,sqr:c=>Ct(c*c,t),add:(c,u)=>Ct(c+u,t),sub:(c,u)=>Ct(c-u,t),mul:(c,u)=>Ct(c*u,t),pow:(c,u)=>j_(a,c,u),div:(c,u)=>Ct(c*nd(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>nd(c,t),sqrt:r.sqrt||(c=>(o||(o=U_(t)),o(a,c))),toBytes:c=>n?j1(c,i):Ec(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?L1(c):Fs(c)},invertBatch:c=>Qv(a,c),cmov:(c,u,l)=>l?u:c});return Object.freeze(a)}function Xv(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function e2(t){const e=Xv(t);return e+Math.ceil(e/2)}function F_(t,e,n=!1){const r=t.length,s=Xv(e),i=e2(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?L1(t):Fs(t),a=Ct(o,e-xt)+xt;return n?j1(a,s):Ec(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hg=BigInt(0),rd=BigInt(1);function mh(t,e){const n=e.negate();return t?n:e}function t2(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function bh(t,e){t2(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=yl(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Vg(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=rd);const u=e*r,l=u+Math.abs(a)-1,h=a===0,f=a<0,d=e%2!==0;return{nextN:c,offset:l,isZero:h,isNeg:f,isNegF:d,offsetF:u}}function z_(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function q_(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const wh=new WeakMap,n2=new WeakMap;function vh(t){return n2.get(t)||1}function H_(t,e){return{constTimeNegate:mh,hasPrecomputes(n){return vh(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Hg;)r&rd&&(s=s.add(i)),i=i.double(),r>>=rd;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=bh(r,e),o=[];let a=n,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=bh(n,e);for(let c=0;c<a.windows;c++){const{nextN:u,offset:l,isZero:h,isNeg:f,isNegF:d,offsetF:p}=Vg(s,c,a);s=u,h?o=o.add(mh(d,r[p])):i=i.add(mh(f,r[l]))}return{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=bh(n,e);for(let a=0;a<o.windows&&s!==Hg;a++){const{nextN:c,offset:u,isZero:l,isNeg:h}=Vg(s,a,o);if(s=c,!l){const f=r[u];i=i.add(h?f.negate():f)}}return i},getPrecomputes(n,r,s){let i=wh.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&wh.set(r,s(i))),i},wNAFCached(n,r,s){const i=vh(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=vh(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){t2(r,e),n2.set(n,r),wh.delete(n)}}}function V_(t,e,n,r){z_(n,t),q_(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=_$(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=yl(c),l=new Array(Number(u)+1).fill(o),h=Math.floor((e.BITS-1)/c)*c;let f=o;for(let d=h;d>=0;d-=c){l.fill(o);for(let g=0;g<i;g++){const y=r[g],w=Number(y>>BigInt(d)&u);l[w]=l[w].add(n[g])}let p=o;for(let g=l.length-1,y=o;g>0;g--)y=y.add(l[g]),p=p.add(y);if(f=f.add(p),d!==0)for(let g=0;g<c;g++)f=f.double()}return f}function r2(t){return L_(t.Fp),ml(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Jv(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Kg(t){t.lowS!==void 0&&Ga("lowS",t.lowS),t.prehash!==void 0&&Ga("prehash",t.prehash)}function K_(t){const e=r2(t);ml(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}let G_=class extends Error{constructor(e=""){super(e)}};const br={Err:G_,_tlv:{encode:(t,e)=>{const{Err:n}=br;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Yc(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Yc(s.length/2|128):"";return Yc(t)+i+s+e},decode(t,e){const{Err:n}=br;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=br;if(t<$r)throw new e("integer: negative integers are not allowed");let n=Yc(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=br;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Fs(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=br,s=an("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=br,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}};function Eh(t,e){return Wa(Ec(t,e))}const $r=BigInt(0),Xe=BigInt(1);BigInt(2);const xh=BigInt(3),W_=BigInt(4);function Z_(t){const e=K_(t),{Fp:n}=e,r=c0(e.n,e.nBitLength),s=e.toBytes||((v,E,I)=>{const S=E.toAffine();return Lu(Uint8Array.from([4]),n.toBytes(S.x),n.toBytes(S.y))}),i=e.fromBytes||(v=>{const E=v.subarray(1),I=n.fromBytes(E.subarray(0,n.BYTES)),S=n.fromBytes(E.subarray(n.BYTES,2*n.BYTES));return{x:I,y:S}});function o(v){const{a:E,b:I}=e,S=n.sqr(v),P=n.mul(S,v);return n.add(n.add(P,n.mul(v,E)),I)}function a(v,E){const I=n.sqr(E),S=o(v);return n.eql(I,S)}if(!a(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(e.a,xh),W_),u=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(c,u)))throw new Error("bad curve params: a or b");function l(v){return Bp(v,Xe,e.n)}function h(v){const{allowedPrivateKeyLengths:E,nByteLength:I,wrapPrivateKey:S,n:P}=e;if(E&&typeof v!="bigint"){if(vc(v)&&(v=Wa(v)),typeof v!="string"||!E.includes(v.length))throw new Error("invalid private key");v=v.padStart(I*2,"0")}let C;try{C=typeof v=="bigint"?v:Fs(an("private key",v,I))}catch{throw new Error("invalid private key, expected hex or "+I+" bytes, got "+typeof v)}return S&&(C=Ct(C,P)),to("private key",C,Xe,P),C}function f(v){if(!(v instanceof g))throw new Error("ProjectivePoint expected")}const d=_g((v,E)=>{const{px:I,py:S,pz:P}=v;if(n.eql(P,n.ONE))return{x:I,y:S};const C=v.is0();E==null&&(E=C?n.ONE:n.inv(P));const O=n.mul(I,E),j=n.mul(S,E),k=n.mul(P,E);if(C)return{x:n.ZERO,y:n.ZERO};if(!n.eql(k,n.ONE))throw new Error("invZ was invalid");return{x:O,y:j}}),p=_g(v=>{if(v.is0()){if(e.allowInfinityPoint&&!n.is0(v.py))return;throw new Error("bad point: ZERO")}const{x:E,y:I}=v.toAffine();if(!n.isValid(E)||!n.isValid(I))throw new Error("bad point: x or y not FE");if(!a(E,I))throw new Error("bad point: equation left != right");if(!v.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class g{constructor(E,I,S){if(E==null||!n.isValid(E))throw new Error("x required");if(I==null||!n.isValid(I)||n.is0(I))throw new Error("y required");if(S==null||!n.isValid(S))throw new Error("z required");this.px=E,this.py=I,this.pz=S,Object.freeze(this)}static fromAffine(E){const{x:I,y:S}=E||{};if(!E||!n.isValid(I)||!n.isValid(S))throw new Error("invalid affine point");if(E instanceof g)throw new Error("projective point not allowed");const P=C=>n.eql(C,n.ZERO);return P(I)&&P(S)?g.ZERO:new g(I,S,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){const I=Qv(n,E.map(S=>S.pz));return E.map((S,P)=>S.toAffine(I[P])).map(g.fromAffine)}static fromHex(E){const I=g.fromAffine(i(an("pointHex",E)));return I.assertValidity(),I}static fromPrivateKey(E){return g.BASE.multiply(h(E))}static msm(E,I){return V_(g,r,E,I)}_setWindowSize(E){x.setWindowSize(this,E)}assertValidity(){p(this)}hasEvenY(){const{y:E}=this.toAffine();if(n.isOdd)return!n.isOdd(E);throw new Error("Field doesn't support isOdd")}equals(E){f(E);const{px:I,py:S,pz:P}=this,{px:C,py:O,pz:j}=E,k=n.eql(n.mul(I,j),n.mul(C,P)),L=n.eql(n.mul(S,j),n.mul(O,P));return k&&L}negate(){return new g(this.px,n.neg(this.py),this.pz)}double(){const{a:E,b:I}=e,S=n.mul(I,xh),{px:P,py:C,pz:O}=this;let j=n.ZERO,k=n.ZERO,L=n.ZERO,F=n.mul(P,P),R=n.mul(C,C),$=n.mul(O,O),_=n.mul(P,C);return _=n.add(_,_),L=n.mul(P,O),L=n.add(L,L),j=n.mul(E,L),k=n.mul(S,$),k=n.add(j,k),j=n.sub(R,k),k=n.add(R,k),k=n.mul(j,k),j=n.mul(_,j),L=n.mul(S,L),$=n.mul(E,$),_=n.sub(F,$),_=n.mul(E,_),_=n.add(_,L),L=n.add(F,F),F=n.add(L,F),F=n.add(F,$),F=n.mul(F,_),k=n.add(k,F),$=n.mul(C,O),$=n.add($,$),F=n.mul($,_),j=n.sub(j,F),L=n.mul($,R),L=n.add(L,L),L=n.add(L,L),new g(j,k,L)}add(E){f(E);const{px:I,py:S,pz:P}=this,{px:C,py:O,pz:j}=E;let k=n.ZERO,L=n.ZERO,F=n.ZERO;const R=e.a,$=n.mul(e.b,xh);let _=n.mul(I,C),B=n.mul(S,O),D=n.mul(P,j),N=n.add(I,S),U=n.add(C,O);N=n.mul(N,U),U=n.add(_,B),N=n.sub(N,U),U=n.add(I,P);let z=n.add(C,j);return U=n.mul(U,z),z=n.add(_,D),U=n.sub(U,z),z=n.add(S,P),k=n.add(O,j),z=n.mul(z,k),k=n.add(B,D),z=n.sub(z,k),F=n.mul(R,U),k=n.mul($,D),F=n.add(k,F),k=n.sub(B,F),F=n.add(B,F),L=n.mul(k,F),B=n.add(_,_),B=n.add(B,_),D=n.mul(R,D),U=n.mul($,U),B=n.add(B,D),D=n.sub(_,D),D=n.mul(R,D),U=n.add(U,D),_=n.mul(B,U),L=n.add(L,_),_=n.mul(z,U),k=n.mul(N,k),k=n.sub(k,_),_=n.mul(N,B),F=n.mul(z,F),F=n.add(F,_),new g(k,L,F)}subtract(E){return this.add(E.negate())}is0(){return this.equals(g.ZERO)}wNAF(E){return x.wNAFCached(this,E,g.normalizeZ)}multiplyUnsafe(E){const{endo:I,n:S}=e;to("scalar",E,$r,S);const P=g.ZERO;if(E===$r)return P;if(this.is0()||E===Xe)return this;if(!I||x.hasPrecomputes(this))return x.wNAFCachedUnsafe(this,E,g.normalizeZ);let{k1neg:C,k1:O,k2neg:j,k2:k}=I.splitScalar(E),L=P,F=P,R=this;for(;O>$r||k>$r;)O&Xe&&(L=L.add(R)),k&Xe&&(F=F.add(R)),R=R.double(),O>>=Xe,k>>=Xe;return C&&(L=L.negate()),j&&(F=F.negate()),F=new g(n.mul(F.px,I.beta),F.py,F.pz),L.add(F)}multiply(E){const{endo:I,n:S}=e;to("scalar",E,Xe,S);let P,C;if(I){const{k1neg:O,k1:j,k2neg:k,k2:L}=I.splitScalar(E);let{p:F,f:R}=this.wNAF(j),{p:$,f:_}=this.wNAF(L);F=x.constTimeNegate(O,F),$=x.constTimeNegate(k,$),$=new g(n.mul($.px,I.beta),$.py,$.pz),P=F.add($),C=R.add(_)}else{const{p:O,f:j}=this.wNAF(E);P=O,C=j}return g.normalizeZ([P,C])[0]}multiplyAndAddUnsafe(E,I,S){const P=g.BASE,C=(j,k)=>k===$r||k===Xe||!j.equals(P)?j.multiplyUnsafe(k):j.multiply(k),O=C(this,I).add(C(E,S));return O.is0()?void 0:O}toAffine(E){return d(this,E)}isTorsionFree(){const{h:E,isTorsionFree:I}=e;if(E===Xe)return!0;if(I)return I(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:E,clearCofactor:I}=e;return E===Xe?this:I?I(g,this):this.multiplyUnsafe(e.h)}toRawBytes(E=!0){return Ga("isCompressed",E),this.assertValidity(),s(g,this,E)}toHex(E=!0){return Ga("isCompressed",E),Wa(this.toRawBytes(E))}}g.BASE=new g(e.Gx,e.Gy,n.ONE),g.ZERO=new g(n.ZERO,n.ONE,n.ZERO);const{endo:y,nBitLength:w}=e,x=H_(g,y?Math.ceil(w/2):w);return{CURVE:e,ProjectivePoint:g,normPrivateKeyToScalar:h,weierstrassEquation:o,isWithinCurveOrder:l}}function Y_(t){const e=r2(t);return ml(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Q_(t){const e=Y_(t),{Fp:n,n:r,nByteLength:s,nBitLength:i}=e,o=n.BYTES+1,a=2*n.BYTES+1;function c($){return Ct($,r)}function u($){return nd($,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:h,weierstrassEquation:f,isWithinCurveOrder:d}=Z_({...e,toBytes($,_,B){const D=_.toAffine(),N=n.toBytes(D.x),U=Lu;return Ga("isCompressed",B),B?U(Uint8Array.from([_.hasEvenY()?2:3]),N):U(Uint8Array.from([4]),N,n.toBytes(D.y))},fromBytes($){const _=$.length,B=$[0],D=$.subarray(1);if(_===o&&(B===2||B===3)){const N=Fs(D);if(!Bp(N,Xe,n.ORDER))throw new Error("Point is not on curve");const U=f(N);let z;try{z=n.sqrt(U)}catch(W){const ee=W instanceof Error?": "+W.message:"";throw new Error("Point is not on curve"+ee)}const V=(z&Xe)===Xe;return(B&1)===1!==V&&(z=n.neg(z)),{x:N,y:z}}else if(_===a&&B===4){const N=n.fromBytes(D.subarray(0,n.BYTES)),U=n.fromBytes(D.subarray(n.BYTES,2*n.BYTES));return{x:N,y:U}}else{const N=o,U=a;throw new Error("invalid Point, expected length of "+N+", or uncompressed "+U+", got "+_)}}});function p($){const _=r>>Xe;return $>_}function g($){return p($)?c(-$):$}const y=($,_,B)=>Fs($.slice(_,B));class w{constructor(_,B,D){to("r",_,Xe,r),to("s",B,Xe,r),this.r=_,this.s=B,D!=null&&(this.recovery=D),Object.freeze(this)}static fromCompact(_){const B=s;return _=an("compactSignature",_,B*2),new w(y(_,0,B),y(_,B,2*B))}static fromDER(_){const{r:B,s:D}=br.toSig(an("DER",_));return new w(B,D)}assertValidity(){}addRecoveryBit(_){return new w(this.r,this.s,_)}recoverPublicKey(_){const{r:B,s:D,recovery:N}=this,U=P(an("msgHash",_));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");const z=N===2||N===3?B+e.n:B;if(z>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const V=N&1?"03":"02",Q=l.fromHex(V+Eh(z,n.BYTES)),W=u(z),ee=c(-U*W),te=c(D*W),oe=l.BASE.multiplyAndAddUnsafe(Q,ee,te);if(!oe)throw new Error("point at infinify");return oe.assertValidity(),oe}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Mu(this.toDERHex())}toDERHex(){return br.hexFromSig(this)}toCompactRawBytes(){return Mu(this.toCompactHex())}toCompactHex(){const _=s;return Eh(this.r,_)+Eh(this.s,_)}}const x={isValidPrivateKey($){try{return h($),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const $=e2(e.n);return F_(e.randomBytes($),e.n)},precompute($=8,_=l.BASE){return _._setWindowSize($),_.multiply(BigInt(3)),_}};function v($,_=!0){return l.fromPrivateKey($).toRawBytes(_)}function E($){if(typeof $=="bigint")return!1;if($ instanceof l)return!0;const B=an("key",$).length,D=n.BYTES,N=D+1,U=2*D+1;if(!(e.allowedPrivateKeyLengths||s===N))return B===N||B===U}function I($,_,B=!0){if(E($)===!0)throw new Error("first arg must be private key");if(E(_)===!1)throw new Error("second arg must be public key");return l.fromHex(_).multiply(h($)).toRawBytes(B)}const S=e.bits2int||function($){if($.length>8192)throw new Error("input is too large");const _=Fs($),B=$.length*8-i;return B>0?_>>BigInt(B):_},P=e.bits2int_modN||function($){return c(S($))},C=yl(i);function O($){return to("num < 2^"+i,$,$r,C),Ec($,s)}function j($,_,B=k){if(["recovered","canonical"].some(re=>re in B))throw new Error("sign() legacy options not supported");const{hash:D,randomBytes:N}=e;let{lowS:U,prehash:z,extraEntropy:V}=B;U==null&&(U=!0),$=an("msgHash",$),Kg(B),z&&($=an("prehashed msgHash",D($)));const Q=P($),W=h(_),ee=[O(W),O(Q)];if(V!=null&&V!==!1){const re=V===!0?N(n.BYTES):V;ee.push(an("extraEntropy",re))}const te=Lu(...ee),oe=Q;function ie(re){const be=S(re);if(!d(be))return;const Ee=u(be),pe=l.BASE.multiply(be).toAffine(),de=c(pe.x);if(de===$r)return;const we=c(Ee*c(oe+de*W));if(we===$r)return;let ke=(pe.x===de?0:2)|Number(pe.y&Xe),Ln=we;return U&&p(we)&&(Ln=g(we),ke^=1),new w(de,Ln,ke)}return{seed:te,k2sig:ie}}const k={lowS:e.lowS,prehash:!1},L={lowS:e.lowS,prehash:!1};function F($,_,B=k){const{seed:D,k2sig:N}=j($,_,B),U=e;return S$(U.hash.outputLen,U.nByteLength,U.hmac)(D,N)}l.BASE._setWindowSize(8);function R($,_,B,D=L){var ke;const N=$;_=an("msgHash",_),B=an("publicKey",B);const{lowS:U,prehash:z,format:V}=D;if(Kg(D),"strict"in D)throw new Error("options.strict was renamed to lowS");if(V!==void 0&&V!=="compact"&&V!=="der")throw new Error("format must be compact or der");const Q=typeof N=="string"||vc(N),W=!Q&&!V&&typeof N=="object"&&N!==null&&typeof N.r=="bigint"&&typeof N.s=="bigint";if(!Q&&!W)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let ee,te;try{if(W&&(ee=new w(N.r,N.s)),Q){try{V!=="compact"&&(ee=w.fromDER(N))}catch(Ln){if(!(Ln instanceof br.Err))throw Ln}!ee&&V!=="der"&&(ee=w.fromCompact(N))}te=l.fromHex(B)}catch{return!1}if(!ee||U&&ee.hasHighS())return!1;z&&(_=e.hash(_));const{r:oe,s:ie}=ee,re=P(_),be=u(ie),Ee=c(re*be),pe=c(oe*be),de=(ke=l.BASE.multiplyAndAddUnsafe(te,Ee,pe))==null?void 0:ke.toAffine();return de?c(de.x)===oe:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:I,sign:F,verify:R,ProjectivePoint:l,Signature:w,utils:x}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function J_(t){return{hash:t,hmac:(e,...n)=>Kv(t,e,Sx(...n)),randomBytes:Px}}function X_(t,e){const n=r=>Q_({...t,...J_(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const s2=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Gg=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),eS=BigInt(0),tS=BigInt(1),sd=BigInt(2),Wg=(t,e)=>(t+e/sd)/e;function nS(t){const e=s2,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,h=tn(l,n,e)*l%e,f=tn(h,n,e)*l%e,d=tn(f,sd,e)*u%e,p=tn(d,s,e)*d%e,g=tn(p,i,e)*p%e,y=tn(g,a,e)*g%e,w=tn(y,c,e)*y%e,x=tn(w,a,e)*g%e,v=tn(x,n,e)*l%e,E=tn(v,o,e)*p%e,I=tn(E,r,e)*u%e,S=tn(I,sd,e);if(!id.eql(id.sqr(S),t))throw new Error("Cannot find square root");return S}const id=c0(s2,void 0,void 0,{sqrt:nS}),u0=X_({a:eS,b:BigInt(7),Fp:id,n:Gg,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Gg,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-tS*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=Wg(i*t,e),c=Wg(-r*t,e);let u=Ct(t-a*n-c*s,e),l=Ct(-a*r-c*i,e);const h=u>o,f=l>o;if(h&&(u=e-u),f&&(l=e-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:u,k2neg:f,k2:l}}}},mv),rS=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:u0},Symbol.toStringTag,{value:"Module"}));function i2(t,e={}){const{recovered:n}=e;if(typeof t.r>"u")throw new $h({signature:t});if(typeof t.s>"u")throw new $h({signature:t});if(n&&typeof t.yParity>"u")throw new $h({signature:t});if(t.r<0n||t.r>jg)throw new lS({value:t.r});if(t.s<0n||t.s>jg)throw new hS({value:t.s});if(typeof t.yParity=="number"&&t.yParity!==0&&t.yParity!==1)throw new h0({value:t.yParity})}function sS(t){return o2(Rn(t))}function o2(t){if(t.length!==130&&t.length!==132)throw new uS({signature:t});const e=BigInt(nr(t,0,32)),n=BigInt(nr(t,32,64)),r=(()=>{const s=+`0x${t.slice(130)}`;if(!Number.isNaN(s))try{return l0(s)}catch{throw new h0({value:s})}})();return typeof r>"u"?{r:e,s:n}:{r:e,s:n,yParity:r}}function iS(t){if(!(typeof t.r>"u")&&!(typeof t.s>"u"))return oS(t)}function oS(t){const e=typeof t=="string"?o2(t):t instanceof Uint8Array?sS(t):typeof t.r=="string"?cS(t):t.v?aS(t):{r:t.r,s:t.s,...typeof t.yParity<"u"?{yParity:t.yParity}:{}};return i2(e),e}function aS(t){return{r:t.r,s:t.s,yParity:l0(t.v)}}function cS(t){const e=(()=>{const n=t.v?Number(t.v):void 0;let r=t.yParity?Number(t.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=l0(n)),typeof r!="number")throw new h0({value:t.yParity});return r})();return{r:BigInt(t.r),s:BigInt(t.s),yParity:e}}function l0(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new fS({value:t})}class uS extends fe{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${Qt(Q$(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class $h extends fe{constructor({signature:e}){super(`Signature \`${H1(e)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class lS extends fe{constructor({value:e}){super(`Value \`${e}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class hS extends fe{constructor({value:e}){super(`Value \`${e}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class h0 extends fe{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class fS extends fe{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function dS(t,e={}){return typeof t.chainId=="string"?pS(t):{...t,...e.signature}}function pS(t){const{address:e,chainId:n,nonce:r}=t,s=iS(t);return{address:e,chainId:Number(n),nonce:BigInt(r),...s}}const gS="0x8010801080108010801080108010801080108010801080108010801080108010",yS=zv("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function a2(t){if(typeof t=="string"){if(nr(t,-32)!==gS)throw new wS(t)}else i2(t.authorization)}function mS(t){a2(t);const e=Z1(nr(t,-64,-32)),n=nr(t,-e-64,-64),r=nr(t,0,-e-64),[s,i,o]=O_(yS,n);return{authorization:dS({address:s.delegation,chainId:Number(s.chainId),nonce:s.nonce,yParity:s.yParity,r:s.r,s:s.s}),signature:r,...o&&o!=="0x"?{data:o,to:i}:{}}}function bS(t){try{return a2(t),!0}catch{return!1}}let wS=class extends fe{constructor(e){super(`Value \`${e}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};function cK(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=kt([kr([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),n_]);return s==="hex"?i:dn(i)}function vS(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function ES(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?fn(t.nonce):void 0,storageProof:t.storageProof?vS(t.storageProof):void 0}}async function xS(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?Y(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return ES(a)}async function $S(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?Y(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function f0(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var l,h,f;const o=r||"latest",a=n!==void 0?Y(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Y(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,Y(i)]},{dedupe:!!a}),!c)throw new T1({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((f=(h=(l=t.chain)==null?void 0:l.formatters)==null?void 0:h.transaction)==null?void 0:f.format)||$l)(c)}async function IS(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([ne(t,Sc,"getBlockNumber")({}),e?ne(t,f0,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}async function xu(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new D1({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||Dv)(n)}async function _S(t,e){var x;const{account:n,authorizationList:r,allowFailure:s=!0,blockNumber:i,blockOverrides:o,blockTag:a,stateOverride:c}=e,u=e.contracts,{batchSize:l=e.batchSize??1024,deployless:h=e.deployless??!1}=typeof((x=t.batch)==null?void 0:x.multicall)=="object"?t.batch.multicall:{},f=(()=>{if(e.multicallAddress)return e.multicallAddress;if(h)return null;if(t.chain)return Lo({blockNumber:i,chain:t.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),d=[[]];let p=0,g=0;for(let v=0;v<u.length;v++){const{abi:E,address:I,args:S,functionName:P}=u[v];try{const C=Un({abi:E,args:S,functionName:P});g+=(C.length-2)/2,l>0&&g>l&&d[p].length>0&&(p++,g=(C.length-2)/2,d[p]=[]),d[p]=[...d[p],{allowFailure:!0,callData:C,target:I}]}catch(C){const O=vo(C,{abi:E,address:I,args:S,docsPath:"/docs/contract/multicall",functionName:P,sender:n});if(!s)throw O;d[p]=[...d[p],{allowFailure:!0,callData:"0x",target:I}]}}const y=await Promise.allSettled(d.map(v=>ne(t,kn,"readContract")({...f===null?{code:Rp}:{address:f},abi:ku,account:n,args:[v],authorizationList:r,blockNumber:i,blockOverrides:o,blockTag:a,functionName:"aggregate3",stateOverride:c}))),w=[];for(let v=0;v<y.length;v++){const E=y[v];if(E.status==="rejected"){if(!s)throw E.reason;for(let S=0;S<d[v].length;S++)w.push({status:"failure",error:E.reason,result:void 0});continue}const I=E.value;for(let S=0;S<I.length;S++){const{returnData:P,success:C}=I[S],{callData:O}=d[v][S],{abi:j,address:k,functionName:L,args:F}=u[w.length];try{if(O==="0x")throw new gc;if(!C)throw new gl({data:P});const R=hi({abi:j,args:F,data:P,functionName:L});w.push(s?{result:R,status:"success"}:R)}catch(R){const $=vo(R,{abi:j,address:k,args:F,docsPath:"/docs/contract/multicall",functionName:L});if(!s)throw $;w.push({error:$,result:void 0,status:"failure"})}}}if(w.length!==u.length)throw new G("multicall results mismatch");return w}async function od(t,e){const{blockNumber:n,blockTag:r=t.experimental_blockTag??"latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const f of s){const d=f.blockOverrides?J1(f.blockOverrides):void 0,p=f.calls.map(y=>{const w=y,x=w.account?Yt(w.account):void 0,v=w.abi?Un(w):w.data,E={...w,data:w.dataSuffix?Bn([v||"0x",w.dataSuffix]):v,from:w.from??(x==null?void 0:x.address)};return $c(E),vl(E)}),g=f.stateOverrides?Fp(f.stateOverrides):void 0;c.push({blockOverrides:d,calls:p,stateOverrides:g})}const l=(typeof n=="bigint"?Y(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},l]})).map((f,d)=>({...Vp(f),calls:f.calls.map((p,g)=>{var j,k;const{abi:y,args:w,functionName:x,to:v}=s[d].calls[g],E=((j=p.error)==null?void 0:j.data)??p.returnData,I=BigInt(p.gasUsed),S=(k=p.logs)==null?void 0:k.map(L=>Br(L)),P=p.status==="0x1"?"success":"failure",C=y&&P==="success"&&E!=="0x"?hi({abi:y,data:E,functionName:x}):null,O=(()=>{var F;if(P==="success")return;let L;if(((F=p.error)==null?void 0:F.data)==="0x"?L=new gc:p.error&&(L=new gl(p.error)),!!L)return vo(L,{abi:y??[],address:v??"0x",args:w,functionName:x??"<unknown>"})})();return{data:E,gasUsed:I,logs:S,status:P,...P==="success"?{result:C}:{error:O}}})}))}catch(c){const u=c,l=Up(u,{});throw l instanceof wl?u:l}}function ad(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new fe("Unable to normalize signature.");return s}function cd(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Xf(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>cd(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>cd(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function c2(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return c2(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Xf(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Xf(n[r],{strict:!1}):!1)return o}}function u2(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?yg(t):t;return{...r,...n?{hash:Zi(r)}:{}}}function SS(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=J$(e,{strict:!1}),o=t.filter(u=>i?u.type==="function"||u.type==="error"?l2(u)===nr(e,0,4):u.type==="event"?Zi(u)===e:!1:"name"in u&&u.name===e);if(o.length===0)throw new ud({name:e});if(o.length===1)return{...o[0],...s?{hash:Zi(o[0])}:{}};let a;for(const u of o){if(!("inputs"in u))continue;if(!r||r.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...s?{hash:Zi(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==r.length)continue;if(r.every((h,f)=>{const d="inputs"in u&&u.inputs[f];return d?cd(h,d):!1})){if(a&&"inputs"in a&&a.inputs){const h=c2(u.inputs,a.inputs,r);if(h)throw new AS({abiItem:u,type:h[0]},{abiItem:a,type:h[1]})}a=u}}const c=(()=>{if(a)return a;const[u,...l]=o;return{...u,overloads:l}})();if(!c)throw new ud({name:e});return{...c,...s?{hash:Zi(c)}:{}}}function l2(t){return nr(Zi(t),0,4)}function PS(t){const e=typeof t=="string"?t:Uu(t);return ad(e)}function Zi(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:Lv(Np(PS(t)))}class AS extends fe{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${ad(Uu(e.abiItem))}\`, and`,`\`${n.type}\` in \`${ad(Uu(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class ud extends fe{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}function OS(t,e){var s;const{bytecode:n,args:r}=e;return Nn(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?o0(t.inputs,r):"0x")}function CS(t){return u2(t)}function TS(t,...e){const{overloads:n}=t,r=n?DS([t,...n],t.name,{args:e[0]}):t,s=BS(r),i=e.length>0?o0(r.inputs,e[0]):void 0;return i?Nn(s,i):s}function xi(t,e={}){return u2(t,e)}function DS(t,e,n){const r=SS(t,e,n);if(r.type!=="function")throw new ud({name:e,type:"function"});return r}function BS(t){return l2(t)}const NS="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Fn="0x0000000000000000000000000000000000000000",RS="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function kS(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,u=e.account?Yt(e.account):void 0;if(o&&!u)throw new G("`account` is required when `traceAssetChanges` is true");const l=u?OS(CS("constructor(bytes, bytes)"),{bytecode:X1,args:[RS,TS(xi("function getBalance(address)"),[u.address])]}):void 0,h=o?await Promise.all(e.calls.map(async D=>{if(!D.data&&!D.abi)return;const{accessList:N}=await ov(t,{account:u.address,...D,data:D.abi?Un(D):D.data});return N.map(({address:U,storageKeys:z})=>z.length>0?U:null)})).then(D=>D.flat().filter(Boolean)):[],f=await od(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:l}],stateOverrides:i},{calls:h.map((D,N)=>({abi:[xi("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:D,from:Fn,nonce:N})),stateOverrides:[{address:Fn,nonce:0}]}]:[],{calls:[...s,{}].map(D=>({...D,from:u==null?void 0:u.address})),stateOverrides:i},...o?[{calls:[{data:l}]},{calls:h.map((D,N)=>({abi:[xi("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:D,from:Fn,nonce:N})),stateOverrides:[{address:Fn,nonce:0}]},{calls:h.map((D,N)=>({to:D,abi:[xi("function decimals() returns (uint256)")],functionName:"decimals",from:Fn,nonce:N})),stateOverrides:[{address:Fn,nonce:0}]},{calls:h.map((D,N)=>({to:D,abi:[xi("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:Fn,nonce:N})),stateOverrides:[{address:Fn,nonce:0}]},{calls:h.map((D,N)=>({to:D,abi:[xi("function symbol() returns (string)")],functionName:"symbol",from:Fn,nonce:N})),stateOverrides:[{address:Fn,nonce:0}]}]:[]],traceTransfers:a,validation:c}),d=o?f[2]:f[0],[p,g,,y,w,x,v,E]=o?f:[],{calls:I,...S}=d,P=I.slice(0,-1)??[],C=(p==null?void 0:p.calls)??[],O=(g==null?void 0:g.calls)??[],j=[...C,...O].map(D=>D.status==="success"?lt(D.data):null),k=(y==null?void 0:y.calls)??[],L=(w==null?void 0:w.calls)??[],F=[...k,...L].map(D=>D.status==="success"?lt(D.data):null),R=((x==null?void 0:x.calls)??[]).map(D=>D.status==="success"?D.result:null),$=((E==null?void 0:E.calls)??[]).map(D=>D.status==="success"?D.result:null),_=((v==null?void 0:v.calls)??[]).map(D=>D.status==="success"?D.result:null),B=[];for(const[D,N]of F.entries()){const U=j[D];if(typeof N!="bigint"||typeof U!="bigint")continue;const z=R[D-1],V=$[D-1],Q=_[D-1],W=D===0?{address:NS,decimals:18,symbol:"ETH"}:{address:h[D-1],decimals:Q||z?Number(z??1):void 0,symbol:V??void 0};B.some(ee=>ee.token.address===W.address)||B.push({token:W,value:{pre:U,post:N,diff:N-U}})}return{assetChanges:B,block:S,results:P}}async function US(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?Yt(a.account):t.account,u=Un({abi:n,args:s,functionName:o});try{const{data:l}=await ne(t,Ic,"call")({batch:!1,data:`${u}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),h=hi({abi:n,args:s,functionName:o,data:l||"0x"}),f=n.filter(d=>"name"in d&&d.name===e.functionName);return{result:h,request:{abi:f,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(l){throw vo(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}async function Pl(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}const h2="0x6492649264926492649264926492649264926492649264926492649264926492";function MS(t){if(nr(t,-32)!==h2)throw new FS(t)}function LS(t){const{data:e,signature:n,to:r}=t;return Nn(o0(zv("address, bytes, bytes"),[r,e,n]),h2)}function jS(t){try{return MS(t),!0}catch{return!1}}class FS extends fe{constructor(e){super(`Value \`${e}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}function zS({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new u0.Signature(lt(t),lt(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:dn(o)}async function Al(t,e){var a,c,u,l,h,f;const{address:n,hash:r,erc6492VerifierAddress:s=e.universalSignatureVerifierAddress??((u=(c=(a=t.chain)==null?void 0:a.contracts)==null?void 0:c.erc6492Verifier)==null?void 0:u.address),multicallAddress:i=e.multicallAddress??((f=(h=(l=t.chain)==null?void 0:l.contracts)==null?void 0:h.multicall3)==null?void 0:f.address)}=e,o=(()=>{const d=e.signature;return Dn(d)?d:typeof d=="object"&&"r"in d&&"s"in d?zS(d):Ve(d)})();try{return bS(o)?await qS(t,{...e,multicallAddress:i,signature:o}):await HS(t,{...e,verifierAddress:s,signature:o})}catch(d){try{if(jo(Et(n),await lv({hash:r,signature:o})))return!0}catch{}if(d instanceof Xs)return!1;throw d}}async function qS(t,e){var y;const{address:n,blockNumber:r,blockTag:s,hash:i,multicallAddress:o}=e,{authorization:a,data:c,signature:u,to:l}=mS(e.signature);if(await Jf(t,{address:n,blockNumber:r,blockTag:s})===kt(["0xef0100",a.address]))return await VS(t,{address:n,blockNumber:r,blockTag:s,hash:i,signature:u});const f={address:a.address,chainId:Number(a.chainId),nonce:Number(a.nonce),r:Y(a.r,{size:32}),s:Y(a.s,{size:32}),yParity:a.yParity};if(!await T3({address:n,authorization:f}))throw new Xs;const p=await ne(t,kn,"readContract")({...o?{address:o}:{code:Rp},authorizationList:[f],abi:ku,blockNumber:r,blockTag:"pending",functionName:"aggregate3",args:[[...c?[{allowFailure:!0,target:l??n,callData:c}]:[],{allowFailure:!0,target:n,callData:Un({abi:Lw,functionName:"isValidSignature",args:[i,u]})}]]}),g=(y=p[p.length-1])==null?void 0:y.returnData;if(g!=null&&g.startsWith("0x1626ba7e"))return!0;throw new Xs}async function HS(t,e){const{address:n,factory:r,factoryData:s,hash:i,signature:o,verifierAddress:a,...c}=e,u=await(async()=>!r&&!s||jS(o)?o:LS({data:s,signature:o,to:r}))(),l=a?{to:a,data:Un({abi:ng,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:kp({abi:ng,args:[n,i,u],bytecode:sI}),...c},{data:h}=await ne(t,Ic,"call")(l).catch(f=>{throw f instanceof B1?new Xs:f});if(ax(h??"0x0"))return!0;throw new Xs}async function VS(t,e){const{address:n,blockNumber:r,blockTag:s,hash:i,signature:o}=e;if((await ne(t,kn,"readContract")({address:n,abi:Lw,args:[i,o],blockNumber:r,blockTag:s,functionName:"isValidSignature"}).catch(c=>{throw c instanceof N1?new Xs:c})).startsWith("0x1626ba7e"))return!0;throw new Xs}class Xs extends Error{}async function KS(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=Nv(n);return Al(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function GS(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:u,...l}=e,h=J3({message:o,primaryType:a,types:c,domain:u});return Al(t,{address:n,factory:r,factoryData:s,hash:h,signature:i,...l})}const Ih=new Map,Zg=new Map;let WS=0;function Nr(t,e,n){const r=++WS,s=()=>Ih.get(t)||[],i=()=>{const l=s();Ih.set(t,l.filter(h=>h.id!==r))},o=()=>{const l=s();if(!l.some(f=>f.id===r))return;const h=Zg.get(t);if(l.length===1&&h){const f=h();f instanceof Promise&&f.catch(()=>{})}i()},a=s();if(Ih.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const l in e)c[l]=(...h)=>{var d,p;const f=s();if(f.length!==0)for(const g of f)(p=(d=g.fns)[l])==null||p.call(d,...h)};const u=n(c);return typeof u=="function"&&Zg.set(t,u),o}function Fo(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await ju(c);const u=async()=>{s&&(await t({unpoll:i}),await ju(r),u())};u()})(),i}function f2(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const h=He(["watchBlockNumber",t.uid,e,n,o]);return Nr(h,{onBlockNumber:r,onError:s},f=>Fo(async()=>{var d;try{const p=await ne(t,Sc,"getBlockNumber")({cacheTime:0});if(c!==void 0){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)f.onBlockNumber(g,c),c=g}(c===void 0||p>c)&&(f.onBlockNumber(p,c),c=p)}catch(p){(d=f.onError)==null||d.call(f,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const h=He(["watchBlockNumber",t.uid,e,n]);return Nr(h,{onBlockNumber:r,onError:s},f=>{let d=!0,p=()=>d=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const w=t.transport.transports.find(x=>x.config.type==="webSocket"||x.config.type==="ipc");return w?w.value:t.transport}return t.transport})(),{unsubscribe:y}=await g.subscribe({params:["newHeads"],onData(w){var v;if(!d)return;const x=lt((v=w.result)==null?void 0:v.number);f.onBlockNumber(x,c),c=x},onError(w){var x;(x=f.onError)==null||x.call(f,w)}});p=y,d||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function ZS(t,e){const{checkReplacement:n=!0,confirmations:r=1,hash:s,onReplaced:i,retryCount:o=6,retryDelay:a=({count:I})=>~~(1<<I)*200,timeout:c=18e4}=e,u=He(["waitForTransactionReceipt",t.uid,s]),l=(()=>{var I;return e.pollingInterval?e.pollingInterval:(I=t.chain)!=null&&I.experimental_preconfirmationTime?t.chain.experimental_preconfirmationTime:t.pollingInterval})();let h,f,d,p=!1,g,y;const{promise:w,resolve:x,reject:v}=jp(),E=c?setTimeout(()=>{y==null||y(),g==null||g(),v(new l$({hash:s}))},c):void 0;return g=Nr(u,{onReplaced:i,resolve:x,reject:v},async I=>{if(d=await ne(t,xu,"getTransactionReceipt")({hash:s}).catch(()=>{}),d&&r<=1){clearTimeout(E),I.resolve(d),g==null||g();return}y=ne(t,f2,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:l,async onBlockNumber(S){const P=O=>{clearTimeout(E),y==null||y(),O(),g==null||g()};let C=S;if(!p)try{if(d){if(r>1&&(!d.blockNumber||C-d.blockNumber+1n<r))return;P(()=>I.resolve(d));return}if(n&&!h&&(p=!0,await Ya(async()=>{h=await ne(t,f0,"getTransaction")({hash:s}),h.blockNumber&&(C=h.blockNumber)},{delay:a,retryCount:o}),p=!1),d=await ne(t,xu,"getTransactionReceipt")({hash:s}),r>1&&(!d.blockNumber||C-d.blockNumber+1n<r))return;P(()=>I.resolve(d))}catch(O){if(O instanceof T1||O instanceof D1){if(!h){p=!1;return}try{f=h,p=!0;const j=await Ya(()=>ne(t,tr,"getBlock")({blockNumber:C,includeTransactions:!0}),{delay:a,retryCount:o,shouldRetry:({error:F})=>F instanceof pv});p=!1;const k=j.transactions.find(({from:F,nonce:R})=>F===f.from&&R===f.nonce);if(!k||(d=await ne(t,xu,"getTransactionReceipt")({hash:k.hash}),r>1&&(!d.blockNumber||C-d.blockNumber+1n<r)))return;let L="replaced";k.to===f.to&&k.value===f.value&&k.input===f.input?L="repriced":k.from===k.to&&k.value===0n&&(L="cancelled"),P(()=>{var F;(F=I.onReplaced)==null||F.call(I,{reason:L,replacedTransaction:f,transaction:k,transactionReceipt:d}),I.resolve(d)})}catch(j){P(()=>I.reject(j))}}else P(()=>I.reject(O))}}})}),w}function YS(t,{blockTag:e=t.experimental_blockTag??"latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const u=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),l=o??!1;let h;return u?(()=>{const p=He(["watchBlocks",t.uid,e,n,r,l,c]);return Nr(p,{onBlock:s,onError:i},g=>Fo(async()=>{var y;try{const w=await ne(t,tr,"getBlock")({blockTag:e,includeTransactions:l});if(w.number!==null&&(h==null?void 0:h.number)!=null){if(w.number===h.number)return;if(w.number-h.number>1&&n)for(let x=(h==null?void 0:h.number)+1n;x<w.number;x++){const v=await ne(t,tr,"getBlock")({blockNumber:x,includeTransactions:l});g.onBlock(v,h),h=v}}((h==null?void 0:h.number)==null||e==="pending"&&(w==null?void 0:w.number)==null||w.number!==null&&w.number>h.number)&&(g.onBlock(w,h),h=w)}catch(w){(y=g.onError)==null||y.call(g,w)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,y=()=>p=!1;return(async()=>{try{r&&ne(t,tr,"getBlock")({blockTag:e,includeTransactions:l}).then(v=>{p&&g&&(s(v,void 0),g=!1)}).catch(i);const w=(()=>{if(t.transport.type==="fallback"){const v=t.transport.transports.find(E=>E.config.type==="webSocket"||E.config.type==="ipc");return v?v.value:t.transport}return t.transport})(),{unsubscribe:x}=await w.subscribe({params:["newHeads"],async onData(v){var I;if(!p)return;const E=await ne(t,tr,"getBlock")({blockNumber:(I=v.result)==null?void 0:I.number,includeTransactions:l}).catch(()=>{});p&&(s(E,h),g=!1,h=E)},onError(v){i==null||i(v)}});y=x,p||y()}catch(w){i==null||i(w)}})(),()=>y()})()}function QS(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:u,poll:l,pollingInterval:h=t.pollingInterval,strict:f}=e;return(typeof l<"u"?l:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const y=f??!1,w=He(["watchContractEvent",r,s,i,t.uid,o,h,y,a]);return Nr(w,{onLogs:u,onError:c},x=>{let v;a!==void 0&&(v=a-1n);let E,I=!1;const S=Fo(async()=>{var P;if(!I){try{E=await ne(t,av,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:y,fromBlock:a})}catch{}I=!0;return}try{let C;if(E)C=await ne(t,Il,"getFilterChanges")({filter:E});else{const O=await ne(t,Sc,"getBlockNumber")({});v&&v<O?C=await ne(t,Pv,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:v+1n,toBlock:O,strict:y}):C=[],v=O}if(C.length===0)return;if(i)x.onLogs(C);else for(const O of C)x.onLogs([O])}catch(C){E&&C instanceof Zs&&(I=!1),(P=x.onError)==null||P.call(x,C)}},{emitOnBegin:!0,interval:h});return async()=>{E&&await ne(t,Pl,"uninstallFilter")({filter:E}),S()}})})():(()=>{const y=f??!1,w=He(["watchContractEvent",r,s,i,t.uid,o,h,y]);let x=!0,v=()=>x=!1;return Nr(w,{onLogs:u,onError:c},E=>((async()=>{try{const I=(()=>{if(t.transport.type==="fallback"){const C=t.transport.transports.find(O=>O.config.type==="webSocket"||O.config.type==="ipc");return C?C.value:t.transport}return t.transport})(),S=o?_c({abi:n,eventName:o,args:s}):[],{unsubscribe:P}=await I.subscribe({params:["logs",{address:r,topics:S}],onData(C){var j;if(!x)return;const O=C.result;try{const{eventName:k,args:L}=Xp({abi:n,data:O.data,topics:O.topics,strict:f}),F=Br(O,{args:L,eventName:k});E.onLogs([F])}catch(k){let L,F;if(k instanceof Pa||k instanceof al){if(f)return;L=k.abiItem.name,F=(j=k.abiItem.inputs)==null?void 0:j.some($=>!("name"in $&&$.name))}const R=Br(O,{args:F?[]:{},eventName:L});E.onLogs([R])}},onError(C){var O;(O=E.onError)==null||O.call(E,C)}});v=P,x||v()}catch(I){c==null||c(I)}})(),()=>v()))})()}function JS(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:u,pollingInterval:l=t.pollingInterval,strict:h}){const f=typeof u<"u"?u:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),d=h??!1;return f?(()=>{const y=He(["watchEvent",e,n,r,t.uid,s,l,o]);return Nr(y,{onLogs:c,onError:a},w=>{let x;o!==void 0&&(x=o-1n);let v,E=!1;const I=Fo(async()=>{var S;if(!E){try{v=await ne(t,cv,"createEventFilter")({address:e,args:n,event:s,events:i,strict:d,fromBlock:o})}catch{}E=!0;return}try{let P;if(v)P=await ne(t,Il,"getFilterChanges")({filter:v});else{const C=await ne(t,Sc,"getBlockNumber")({});x&&x!==C?P=await ne(t,t0,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:x+1n,toBlock:C}):P=[],x=C}if(P.length===0)return;if(r)w.onLogs(P);else for(const C of P)w.onLogs([C])}catch(P){v&&P instanceof Zs&&(E=!1),(S=w.onError)==null||S.call(w,P)}},{emitOnBegin:!0,interval:l});return async()=>{v&&await ne(t,Pl,"uninstallFilter")({filter:v}),I()}})})():(()=>{let y=!0,w=()=>y=!1;return(async()=>{try{const x=(()=>{if(t.transport.type==="fallback"){const S=t.transport.transports.find(P=>P.config.type==="webSocket"||P.config.type==="ipc");return S?S.value:t.transport}return t.transport})(),v=i??(s?[s]:void 0);let E=[];v&&(E=[v.flatMap(P=>_c({abi:[P],eventName:P.name,args:n}))],s&&(E=E[0]));const{unsubscribe:I}=await x.subscribe({params:["logs",{address:e,topics:E}],onData(S){var C;if(!y)return;const P=S.result;try{const{eventName:O,args:j}=Xp({abi:v??[],data:P.data,topics:P.topics,strict:d}),k=Br(P,{args:j,eventName:O});c([k])}catch(O){let j,k;if(O instanceof Pa||O instanceof al){if(h)return;j=O.abiItem.name,k=(C=O.abiItem.inputs)==null?void 0:C.some(F=>!("name"in F&&F.name))}const L=Br(P,{args:k?[]:{},eventName:j});c([L])}},onError(S){a==null||a(S)}});w=I,y||w()}catch(x){a==null||a(x)}})(),()=>w()})()}function XS(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const u=He(["watchPendingTransactions",t.uid,e,i]);return Nr(u,{onTransactions:r,onError:n},l=>{let h;const f=Fo(async()=>{var d;try{if(!h)try{h=await ne(t,uv,"createPendingTransactionFilter")({});return}catch(g){throw f(),g}const p=await ne(t,Il,"getFilterChanges")({filter:h});if(p.length===0)return;if(e)l.onTransactions(p);else for(const g of p)l.onTransactions([g])}catch(p){(d=l.onError)==null||d.call(l,p)}},{emitOnBegin:!0,interval:i});return async()=>{h&&await ne(t,Pl,"uninstallFilter")({filter:h}),f()}})})():(()=>{let u=!0,l=()=>u=!1;return(async()=>{try{const{unsubscribe:h}=await t.transport.subscribe({params:["newPendingTransactions"],onData(f){if(!u)return;const d=f.result;r([d])},onError(f){n==null||n(f)}});l=h,u||l()}catch(h){n==null||n(h)}})(),()=>l()})()}class eP extends G{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}async function tP(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const nP="0x5792579257925792579257925792579257925792579257925792579257925792",rP=Y(0,{size:32});async function sP(t,e){async function n(l){if(l.endsWith(nP.slice(2))){const f=Wt(Tf(l,-64,-32)),d=Tf(l,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(d.map(y=>rP.slice(2)!==y?t.request({method:"eth_getTransactionReceipt",params:[`0x${y}`]},{dedupe:!0}):void 0)),g=p.some(y=>y===null)?100:p.every(y=>(y==null?void 0:y.status)==="0x1")?200:p.every(y=>(y==null?void 0:y.status)==="0x0")?500:600;return{atomic:!1,chainId:fn(f),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[l]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,u]=(()=>{const l=a.status;return l>=100&&l<200?["pending",l]:l>=200&&l<300?["success",l]:l>=300&&l<700?["failure",l]:l==="CONFIRMED"?["success",200]:l==="PENDING"?["pending",100]:[void 0,l]})();return{...a,atomic:r,chainId:s?fn(s):void 0,receipts:(i==null?void 0:i.map(l=>({...l,blockNumber:lt(l.blockNumber),gasUsed:lt(l.gasUsed),status:Tv[l.status]})))??[],statusCode:u,status:c,version:o}}async function uK(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new eP({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Yt(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Yt(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await ne(t,Qp,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await ne(t,Gp,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&jo(o.address,i.address))&&(a.nonce+=1)),a}class iP extends G{constructor(e){super(`Call bundle failed with status: ${e.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=e}}async function lK(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:g})=>g===200||g>=300,retryCount:i=4,retryDelay:o=({count:g})=>~~(1<<g)*200,timeout:a=6e4,throwOnFailure:c=!1}=e,u=He(["waitForCallsStatus",t.uid,n]),{promise:l,resolve:h,reject:f}=jp();let d;const p=Nr(u,{resolve:h,reject:f},g=>{const y=Fo(async()=>{const w=x=>{clearTimeout(d),y(),x(),p()};try{const x=await Ya(async()=>{const v=await ne(t,sP,"getCallsStatus")({id:n});if(c&&v.status==="failure")throw new iP(v);return v},{retryCount:i,delay:o});if(!s(x))return;w(()=>g.resolve(x))}catch(x){w(()=>g.reject(x))}},{interval:r,emitOnBegin:!0});return y});return d=a?setTimeout(()=>{p(),clearTimeout(d),f(new oP({id:n}))},a):void 0,await l}class oP extends G{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}const $u="2.20.3",aP=()=>`@wagmi/core@${$u}`;var d2=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Fu,p2;let Ol=class ld extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return aP()}constructor(e,n={}){var i;super(),Fu.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof ld?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof ld&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return d2(this,Fu,"m",p2).call(this,this,e)}};Fu=new WeakSet,p2=function t(e,n){return n!=null&&n(e)?e:e.cause?d2(this,Fu,"m",t).call(this,e.cause,n):e};class Eo extends Ol{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class cP extends Ol{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}async function uP(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new cP;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const hd=256;let Jc=hd,Xc;function g2(t=11){if(!Xc||Jc+t>hd*2){Xc="",Jc=0;for(let e=0;e<hd;e++)Xc+=(256+Math.random()*256|0).toString(16).substring(1)}return Xc.substring(Jc,Jc+++t)}function y2(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=t.experimental_blockTag??(typeof(n==null?void 0:n.experimental_preconfirmationTime)=="number"?"pending":void 0),c=(n==null?void 0:n.blockTime)??12e3,u=Math.min(Math.max(Math.floor(c/2),500),4e3),l=t.pollingInterval??u,h=t.cacheTime??l,f=t.account?Yt(t.account):void 0,{config:d,request:p,value:g}=t.transport({chain:n,pollingInterval:l}),y={...d,...g},w={account:f,batch:e,cacheTime:h,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:p,transport:y,type:o,uid:g2(),...a?{experimental_blockTag:a}:{}};function x(v){return E=>{const I=E(v);for(const P in w)delete I[P];const S={...v,...I};return Object.assign(S,{extend:x(S)})}}return Object.assign(w,{extend:x(w)})}function lP(t){var h,f,d;const{scheme:e,statement:n,...r}=((h=t.match(hP))==null?void 0:h.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...u}=((f=t.match(fP))==null?void 0:f.groups)??{},l=(d=t.split("Resources:")[1])==null?void 0:d.split(`
- `).slice(1);return{...r,...u,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...l?{resources:l}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const hP=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,fP=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function dP(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!Ke(r.address,{strict:!1})||e&&!jo(r.address,e))return!1}catch{return!1}return!0}async function pP(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...u}=e,l=lP(s);if(!l.address||!dP({address:n,domain:r,message:l,nonce:i,scheme:o,time:c}))return!1;const f=Nv(s);return Al(t,{address:l.address,hash:f,signature:a,...u})}function gP(t){return{call:e=>Ic(t,e),createAccessList:e=>ov(t,e),createBlockFilter:()=>AI(t),createContractEventFilter:e=>av(t,e),createEventFilter:e=>cv(t,e),createPendingTransactionFilter:()=>uv(t),estimateContractGas:e=>s3(t,e),estimateGas:e=>Jp(t,e),getBalance:e=>Sv(t,e),getBlobBaseFee:()=>i3(t),getBlock:e=>tr(t,e),getBlockNumber:e=>Sc(t,e),getBlockTransactionCount:e=>h3(t,e),getBytecode:e=>Jf(t,e),getChainId:()=>Qp(t),getCode:e=>Jf(t,e),getContractEvents:e=>Pv(t,e),getEip712Domain:e=>g3(t,e),getEnsAddress:e=>fI(t,e),getEnsAvatar:e=>_I(t,e),getEnsName:e=>SI(t,e),getEnsResolver:e=>PI(t,e),getEnsText:e=>iv(t,e),getFeeHistory:e=>b3(t,e),estimateFeesPerGas:e=>qI(t,e),getFilterChanges:e=>Il(t,e),getFilterLogs:e=>w3(t,e),getGasPrice:()=>Kp(t),getLogs:e=>t0(t,e),getProof:e=>xS(t,e),estimateMaxPriorityFeePerGas:e=>zI(t,e),getStorageAt:e=>$S(t,e),getTransaction:e=>f0(t,e),getTransactionConfirmations:e=>IS(t,e),getTransactionCount:e=>Gp(t,e),getTransactionReceipt:e=>xu(t,e),multicall:e=>_S(t,e),prepareTransactionRequest:e=>_v(t,e),readContract:e=>kn(t,e),sendRawTransaction:e=>tP(t,e),simulate:e=>od(t,e),simulateBlocks:e=>od(t,e),simulateCalls:e=>kS(t,e),simulateContract:e=>US(t,e),verifyHash:e=>Al(t,e),verifyMessage:e=>KS(t,e),verifySiweMessage:e=>pP(t,e),verifyTypedData:e=>GS(t,e),uninstallFilter:e=>Pl(t,e),waitForTransactionReceipt:e=>ZS(t,e),watchBlocks:e=>YS(t,e),watchBlockNumber:e=>f2(t,e),watchContractEvent:e=>QS(t,e),watchEvent:e=>JS(t,e),watchPendingTransactions:e=>XS(t,e)}}function hK(t){const{key:e="public",name:n="Public Client"}=t;return y2({...t,key:e,name:n,type:"publicClient"}).extend(gP)}function m2({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const u=g2();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:B3(r,{methods:e,retryCount:s,retryDelay:i,uid:u}),value:c}}function fK(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=yP,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:u=4e3,timeout:l,...h})=>{let f=t,d=()=>{};const p=m2({key:n,name:r,async request({method:g,params:y}){let w;const x=async(v=0)=>{const E=f[v]({...h,chain:c,retryCount:0,timeout:l});try{const I=await E.request({method:g,params:y});return d({method:g,params:y,response:I,transport:E,status:"success"}),I}catch(I){if(d({error:I,method:g,params:y,transport:E,status:"error"}),i(I)||v===f.length-1||(w??(w=f.slice(v+1).some(S=>{const{include:P,exclude:C}=S({chain:c}).config.methods||{};return P?P.includes(g):C?!C.includes(g):!0})),!w))throw I;return x(v+1)}};return x()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>d=g,transports:f.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};mP({chain:c,interval:g.interval??u,onTransports:y=>f=y,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:f,weights:g.weights})}return p}}function yP(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===bo.code||t.code===Oe.code||As.nodeMessage.test(t.message)||t.code===5e3))}function mP({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:u=.3}=a,l=[],h=async()=>{const f=await Promise.all(o.map(async g=>{const y=g({chain:t,retryCount:0,timeout:i}),w=Date.now();let x,v;try{await(r?r({transport:y}):y.request({method:"net_listening"})),v=1}catch{v=0}finally{x=Date.now()}return{latency:x-w,success:v}}));l.push(f),l.length>s&&l.shift();const d=Math.max(...l.map(g=>Math.max(...g.map(({latency:y})=>y)))),p=o.map((g,y)=>{const w=l.map(S=>S[y].latency),v=1-w.reduce((S,P)=>S+P,0)/w.length/d,E=l.map(S=>S[y].success),I=E.reduce((S,P)=>S+P,0)/E.length;return I===0?[0,y]:[u*v+c*I,y]}).sort((g,y)=>y[0]-g[0]);n(p.map(([,g])=>o[g])),await ju(e),h()};h()}class bP extends G{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function dK(t,e={}){const{batch:n,fetchFn:r,fetchOptions:s,key:i="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:u,retryDelay:l,raw:h}=e;return({chain:f,retryCount:d,timeout:p})=>{const{batchSize:g=1e3,wait:y=0}=typeof n=="object"?n:{},w=e.retryCount??d,x=p??e.timeout??1e4,v=t||(f==null?void 0:f.rpcUrls.default.http[0]);if(!v)throw new bP;const E=q3(v,{fetchFn:r,fetchOptions:s,onRequest:c,onResponse:u,timeout:x});return m2({key:i,methods:o,name:a,async request({method:I,params:S}){const P={method:I,params:S},{schedule:C}=tv({id:v,wait:y,shouldSplitBatch(L){return L.length>g},fn:L=>E.request({body:L}),sort:(L,F)=>L.id-F.id}),O=async L=>n?C(L):[await E.request({body:L})],[{error:j,result:k}]=await O(P);if(h)return{error:j,result:k};if(j)throw new Cp({body:P,error:j,url:v});return k},retryCount:w,retryDelay:l,timeout:x,type:"http"},{fetchOptions:s,url:v})}}function pK(t){const{r:e,s:n}=u0.Signature.fromCompact(t.slice(2,130)),r=+`0x${t.slice(130)}`,[s,i]=(()=>{if(r===0||r===1)return[void 0,r];if(r===27)return[BigInt(r),0];if(r===28)return[BigInt(r),1];throw new Error("Invalid yParityOrV value")})();return typeof s<"u"?{r:Y(e,{size:32}),s:Y(n,{size:32}),v:s,yParity:i}:{r:Y(e,{size:32}),s:Y(n,{size:32}),yParity:i}}async function wP(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}function b2(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}function Yg(t){return t.state.chainId}function xo(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!xo(t[r],e[r]))return!1;return!0}if(typeof t.valueOf=="function"&&t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.hasOwn(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!xo(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let eu=[];function fd(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||xo(eu,e)?eu:(eu=e,e)}let _h=[];function Qg(t){const e=t.connectors;return _h.map(n=>n.uid)===e.map(n=>n.uid)?_h:(_h=e,e)}let Sh=!1;async function vP(t,e={}){var u,l;if(Sh)return[];Sh=!0,t.setState(h=>({...h,status:h.current?"reconnecting":"connecting"}));const n=[];if((u=e.connectors)!=null&&u.length)for(const h of e.connectors){let f;typeof h=="function"?f=t._internal.connectors.setup(h):f=h,n.push(f)}else n.push(...t.connectors);let r;try{r=await((l=t.storage)==null?void 0:l.getItem("recentConnectorId"))}catch{}const s={};for(const[,h]of t.state.connections)s[h.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((h,f)=>(s[h.id]??10)-(s[f.id]??10)):n;let o=!1;const a=[],c=[];for(const h of i){const f=await h.getProvider().catch(()=>{});if(!f||c.some(g=>g===f)||!await h.isAuthorized())continue;const p=await h.connect({isReconnecting:!0}).catch(()=>null);p&&(h.emitter.off("connect",t._internal.events.connect),h.emitter.on("change",t._internal.events.change),h.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const y=new Map(o?g.connections:new Map).set(h.uid,{accounts:p.accounts,chainId:p.chainId,connector:h});return{...g,current:o?g.current:h.uid,connections:y}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:h}),c.push(f),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(h=>({...h,status:"connected"})):t.setState(h=>({...h,connections:new Map,current:null,status:"disconnected"}))),Sh=!1,a}class Wr extends Ol{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}function EP(t,e){const{onChange:n}=e;return t.subscribe(()=>b2(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return xo(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function xP(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function $P(t,e){const{onChange:n}=e;return t.subscribe(()=>fd(t),n,{equalityFn:xo})}function IP(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}d0.type="injected";function d0(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const u=c();if(u)return u}return typeof c=="object"?c:typeof c=="string"?{..._P[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(u){return u==null?void 0:u.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:d0.type,async setup(){const u=await this.getProvider();u!=null&&u.on&&t.target&&(o||(o=this.onConnect.bind(this),u.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),u.on("accountsChanged",s)))},async connect({chainId:u,isReconnecting:l}={}){var d,p,g,y,w,x;const h=await this.getProvider();if(!h)throw new Wr;let f=[];if(l)f=await this.getAccounts().catch(()=>[]);else if(e)try{f=(y=(g=(p=(d=(await h.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:d.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:y.map(E=>Et(E)),f.length>0&&(f=await this.getAccounts())}catch(v){const E=v;if(E.code===Oe.code)throw new Oe(E);if(E.code===us.code)throw E}try{!(f!=null&&f.length)&&!l&&(f=(await h.request({method:"eth_requestAccounts"})).map(I=>Et(I))),o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a));let v=await this.getChainId();if(u&&v!==u){const E=await this.switchChain({chainId:u}).catch(I=>{if(I.code===Oe.code)throw I;return{id:v}});v=(E==null?void 0:E.id)??v}return e&&await((w=c.storage)==null?void 0:w.removeItem(`${this.id}.disconnected`)),t.target||await((x=c.storage)==null?void 0:x.setItem("injected.connected",!0)),{accounts:f,chainId:v}}catch(v){const E=v;throw E.code===Oe.code?new Oe(E):E.code===us.code?new us(E):E}},async disconnect(){var l,h;const u=await this.getProvider();if(!u)throw new Wr;i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o));try{await Bv(()=>u.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((l=c.storage)==null?void 0:l.setItem(`${this.id}.disconnected`,!0)),t.target||await((h=c.storage)==null?void 0:h.removeItem("injected.connected"))},async getAccounts(){const u=await this.getProvider();if(!u)throw new Wr;return(await u.request({method:"eth_accounts"})).map(h=>Et(h))},async getChainId(){const u=await this.getProvider();if(!u)throw new Wr;const l=await u.request({method:"eth_chainId"});return Number(l)},async getProvider(){if(typeof window>"u")return;let u;const l=r();return typeof l.provider=="function"?u=l.provider(window):typeof l.provider=="string"?u=Iu(window,l.provider):u=l.provider,u&&!u.removeListener&&("off"in u&&typeof u.off=="function"?u.removeListener=u.off:u.removeListener=()=>{}),u},async isAuthorized(){var u,l;try{if(e&&await((u=c.storage)==null?void 0:u.getItem(`${this.id}.disconnected`))||!t.target&&!await((l=c.storage)==null?void 0:l.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(w=>window.addEventListener("ethereum#initialized",()=>w(p()),{once:!0}))]:[],new Promise(w=>setTimeout(()=>w(p()),g))]))return!0}throw new Wr}return!!(await Ya(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:u,chainId:l}){var p,g,y,w;const h=await this.getProvider();if(!h)throw new Wr;const f=c.chains.find(x=>x.id===l);if(!f)throw new pn(new Eo);const d=new Promise(x=>{const v=E=>{"chainId"in E&&E.chainId===l&&(c.emitter.off("change",v),x())};c.emitter.on("change",v)});try{return await Promise.all([h.request({method:"wallet_switchEthereumChain",params:[{chainId:Y(l)}]}).then(async()=>{await this.getChainId()===l&&c.emitter.emit("change",{chainId:l})}),d]),f}catch(x){const v=x;if(v.code===4902||((g=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:E,...I}=f.blockExplorers??{};let S;u!=null&&u.blockExplorerUrls?S=u.blockExplorerUrls:E&&(S=[E.url,...Object.values(I).map(O=>O.url)]);let P;(y=u==null?void 0:u.rpcUrls)!=null&&y.length?P=u.rpcUrls:P=[((w=f.rpcUrls.default)==null?void 0:w.http[0])??""];const C={blockExplorerUrls:S,chainId:Y(l),chainName:(u==null?void 0:u.chainName)??f.name,iconUrls:u==null?void 0:u.iconUrls,nativeCurrency:(u==null?void 0:u.nativeCurrency)??f.nativeCurrency,rpcUrls:P};return await Promise.all([h.request({method:"wallet_addEthereumChain",params:[C]}).then(async()=>{if(await this.getChainId()===l)c.emitter.emit("change",{chainId:l});else throw new Oe(new Error("User rejected switch after adding network."))}),d]),f}catch(E){throw new Oe(E)}throw v.code===Oe.code?new Oe(v):new pn(v)}},async onAccountsChanged(u){var l;if(u.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const h=(await this.getChainId()).toString();this.onConnect({chainId:h}),e&&await((l=c.storage)==null?void 0:l.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:u.map(h=>Et(h))})},onChainChanged(u){const l=Number(u);c.emitter.emit("change",{chainId:l})},async onConnect(u){const l=await this.getAccounts();if(l.length===0)return;const h=Number(u.chainId);c.emitter.emit("connect",{accounts:l,chainId:h});const f=await this.getProvider();f&&(o&&(f.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),f.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),f.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),f.on("disconnect",a)))},async onDisconnect(u){const l=await this.getProvider();u&&u.code===1013&&l&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),l&&(i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o))))}})}const _P={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:Iu(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return Iu(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:Iu(t,"isPhantom")}}};function Iu(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function SP(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function PP(){const t=new Set;let e=[];const n=()=>SP(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const AP=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let u=o;if(a){const l=(c==null?void 0:c.equalityFn)||Object.is;let h=o(r.getState());u=f=>{const d=o(f);if(!l(h,d)){const p=h;a(h=d,p)}},c!=null&&c.fireImmediately&&a(h,h)}return s(u)},t(e,n,r)},OP=AP;function CP(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const dd=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return dd(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return dd(r)(n)}}}},TP=(t,e)=>(n,r,s)=>{let i={storage:CP(()=>localStorage),partialize:g=>g,version:0,merge:(g,y)=>({...y,...g}),...e},o=!1;const a=new Set,c=new Set;let u=i.storage;if(!u)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const l=()=>{const g=i.partialize({...r()});return u.setItem(i.name,{state:g,version:i.version})},h=s.setState;s.setState=(g,y)=>{h(g,y),l()};const f=t((...g)=>{n(...g),l()},r,s);s.getInitialState=()=>f;let d;const p=()=>{var g,y;if(!u)return;o=!1,a.forEach(x=>{var v;return x((v=r())!=null?v:f)});const w=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(g=r())!=null?g:f))||void 0;return dd(u.getItem.bind(u))(i.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==i.version){if(i.migrate)return[!0,i.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var v;const[E,I]=x;if(d=i.merge(I,(v=r())!=null?v:f),n(d,!0),E)return l()}).then(()=>{w==null||w(d,void 0),d=r(),o=!0,c.forEach(x=>x(d))}).catch(x=>{w==null||w(void 0,x)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(u=g.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),d||f},DP=TP,Jg=t=>{let e;const n=new Set,r=(u,l)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const f=e;e=l??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(d=>d(e,f))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=e=t(r,s,a);return a},Ph=t=>t?Jg(t):Jg;var w2={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,u,l){this.fn=c,this.context=u,this.once=l||!1}function i(c,u,l,h,f){if(typeof l!="function")throw new TypeError("The listener must be a function");var d=new s(l,h||c,f),p=n?n+u:u;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],d]:c._events[p].push(d):(c._events[p]=d,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],l,h;if(this._eventsCount===0)return u;for(h in l=this._events)e.call(l,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(l)):u},a.prototype.listeners=function(u){var l=n?n+u:u,h=this._events[l];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,d=h.length,p=new Array(d);f<d;f++)p[f]=h[f].fn;return p},a.prototype.listenerCount=function(u){var l=n?n+u:u,h=this._events[l];return h?h.fn?1:h.length:0},a.prototype.emit=function(u,l,h,f,d,p){var g=n?n+u:u;if(!this._events[g])return!1;var y=this._events[g],w=arguments.length,x,v;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,l),!0;case 3:return y.fn.call(y.context,l,h),!0;case 4:return y.fn.call(y.context,l,h,f),!0;case 5:return y.fn.call(y.context,l,h,f,d),!0;case 6:return y.fn.call(y.context,l,h,f,d,p),!0}for(v=1,x=new Array(w-1);v<w;v++)x[v-1]=arguments[v];y.fn.apply(y.context,x)}else{var E=y.length,I;for(v=0;v<E;v++)switch(y[v].once&&this.removeListener(u,y[v].fn,void 0,!0),w){case 1:y[v].fn.call(y[v].context);break;case 2:y[v].fn.call(y[v].context,l);break;case 3:y[v].fn.call(y[v].context,l,h);break;case 4:y[v].fn.call(y[v].context,l,h,f);break;default:if(!x)for(I=1,x=new Array(w-1);I<w;I++)x[I-1]=arguments[I];y[v].fn.apply(y[v].context,x)}}return!0},a.prototype.on=function(u,l,h){return i(this,u,l,h,!1)},a.prototype.once=function(u,l,h){return i(this,u,l,h,!0)},a.prototype.removeListener=function(u,l,h,f){var d=n?n+u:u;if(!this._events[d])return this;if(!l)return o(this,d),this;var p=this._events[d];if(p.fn)p.fn===l&&(!f||p.once)&&(!h||p.context===h)&&o(this,d);else{for(var g=0,y=[],w=p.length;g<w;g++)(p[g].fn!==l||f&&!p[g].once||h&&p[g].context!==h)&&y.push(p[g]);y.length?this._events[d]=y.length===1?y[0]:y:o(this,d)}return this},a.prototype.removeAllListeners=function(u){var l;return u?(l=n?n+u:u,this._events[l]&&o(this,l)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(w2);var BP=w2.exports;const pd=il(BP),gK=Object.freeze(Object.defineProperty({__proto__:null,EventEmitter:pd,default:pd},Symbol.toStringTag,{value:"Module"}));class NP{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new pd})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function RP(t){return new NP(t)}function kP(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function Xg(t,e){return t.slice(0,e).join(".")||"."}function ey(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function UP(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const u=ey(s,this);u===0?s[s.length]=this:(s.splice(u),i.splice(u)),i[i.length]=a;const l=ey(s,c);if(l!==0)return r?e.call(this,a,c,Xg(i,l)):`[ref=${Xg(i,l)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function MP(t,e,n,r){return JSON.stringify(t,UP((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function LP(t){const{deserialize:e=kP,key:n="wagmi",serialize:r=MP,storage:s=v2}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),u=await i(c);return u?e(u)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const v2={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function jP(){const t=typeof window<"u"&&window.localStorage?window.localStorage:v2;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const gd=256;let tu=gd,nu;function FP(t=11){if(!nu||tu+t>gd*2){nu="",tu=0;for(let e=0;e<gd;e++)nu+=(256+Math.random()*256|0).toString(16).substring(1)}return nu.substring(tu,tu+++t)}function yK(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=LP({storage:jP()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?PP():void 0,a=Ph(()=>i.chains),c=Ph(()=>{const I=[],S=new Set;for(const P of i.connectors??[]){const C=u(P);if(I.push(C),!s&&C.rdns){const O=typeof C.rdns=="string"?[C.rdns]:C.rdns;for(const j of O)S.add(j)}}if(!s&&o){const P=o.getProviders();for(const C of P)S.has(C.info.rdns)||I.push(u(l(C)))}return I});function u(I){var C;const S=RP(FP()),P={...I({emitter:S,chains:a.getState(),storage:n,transports:i.transports}),emitter:S,uid:S.uid};return S.on("connect",v),(C=P.setup)==null||C.call(P),P}function l(I){const{info:S}=I,P=I.provider;return d0({target:{...S,id:S.rdns,provider:P}})}const h=new Map;function f(I={}){const S=I.chainId??y.getState().chainId,P=a.getState().find(O=>O.id===S);if(I.chainId&&!P)throw new Eo;{const O=h.get(y.getState().chainId);if(O&&!P)return O;if(!P)throw new Eo}{const O=h.get(S);if(O)return O}let C;if(i.client)C=i.client({chain:P});else{const O=P.id,j=a.getState().map(F=>F.id),k={},L=Object.entries(i);for(const[F,R]of L)if(!(F==="chains"||F==="client"||F==="connectors"||F==="transports"))if(typeof R=="object")if(O in R)k[F]=R[O];else{if(j.some(_=>_ in R))continue;k[F]=R}else k[F]=R;C=y2({...k,chain:P,batch:k.batch??{multicall:!0},transport:F=>i.transports[O]({...F,connectors:c})})}return h.set(S,C),C}function d(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";$u.startsWith(g)?p=Number.parseInt($u.replace(g,"")):p=Number.parseInt($u.split(".")[0]??"0");const y=Ph(OP(n?DP(d,{migrate(I,S){if(S===p)return I;const P=d(),C=w(I,P.chainId);return{...P,chainId:C}},name:"store",partialize(I){return{connections:{__type:"Map",value:Array.from(I.connections.entries()).map(([S,P])=>{const{id:C,name:O,type:j,uid:k}=P.connector;return[S,{...P,connector:{id:C,name:O,type:j,uid:k}}]})},chainId:I.chainId,current:I.current}},merge(I,S){typeof I=="object"&&I&&"status"in I&&delete I.status;const P=w(I,S.chainId);return{...S,...I,chainId:P}},skipHydration:s,storage:n,version:p}):d));y.setState(d());function w(I,S){return I&&typeof I=="object"&&"chainId"in I&&typeof I.chainId=="number"&&a.getState().some(P=>P.id===I.chainId)?I.chainId:S}r&&y.subscribe(({connections:I,current:S})=>{var P;return S?(P=I.get(S))==null?void 0:P.chainId:void 0},I=>{if(a.getState().some(P=>P.id===I))return y.setState(P=>({...P,chainId:I??P.chainId}))}),o==null||o.subscribe(I=>{const S=new Set,P=new Set;for(const O of c.getState())if(S.add(O.id),O.rdns){const j=typeof O.rdns=="string"?[O.rdns]:O.rdns;for(const k of j)P.add(k)}const C=[];for(const O of I){if(P.has(O.info.rdns))continue;const j=u(l(O));S.has(j.id)||C.push(j)}n&&!y.persist.hasHydrated()||c.setState(O=>[...O,...C],!0)});function x(I){y.setState(S=>{const P=S.connections.get(I.uid);return P?{...S,connections:new Map(S.connections).set(I.uid,{accounts:I.accounts??P.accounts,chainId:I.chainId??P.chainId,connector:P.connector})}:S})}function v(I){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(S=>{const P=c.getState().find(C=>C.uid===I.uid);return P?(P.emitter.listenerCount("connect")&&P.emitter.off("connect",x),P.emitter.listenerCount("change")||P.emitter.on("change",x),P.emitter.listenerCount("disconnect")||P.emitter.on("disconnect",E),{...S,connections:new Map(S.connections).set(I.uid,{accounts:I.accounts,chainId:I.chainId,connector:P}),current:I.uid,status:"connected"}):S})}function E(I){y.setState(S=>{const P=S.connections.get(I.uid);if(P){const O=P.connector;O.emitter.listenerCount("change")&&P.connector.emitter.off("change",x),O.emitter.listenerCount("disconnect")&&P.connector.emitter.off("disconnect",E),O.emitter.listenerCount("connect")||P.connector.emitter.on("connect",v)}if(S.connections.delete(I.uid),S.connections.size===0)return{...S,connections:new Map,current:null,status:"disconnected"};const C=S.connections.values().next().value;return{...S,connections:new Map(S.connections),current:C.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:f,get state(){return y.getState()},setState(I){let S;typeof I=="function"?S=I(y.getState()):S=I;const P=d();typeof S!="object"&&(S=P),Object.keys(P).some(O=>!(O in S))&&(S=P),y.setState(S,!0)},subscribe(I,S,P){return y.subscribe(I,S,P?{...P,fireImmediately:P.emitImmediately}:void 0)},_internal:{mipd:o,async revalidate(){const I=y.getState(),S=I.connections;let P=I.current;for(const[,C]of S){const O=C.connector;O.isAuthorized&&await O.isAuthorized()||(S.delete(O.uid),P===O.uid&&(P=null))}y.setState(C=>({...C,connections:S,current:P}))},store:y,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(I){const S=typeof I=="function"?I(a.getState()):I;if(S.length!==0)return a.setState(S,!0)},subscribe(I){return a.subscribe(I)}},connectors:{providerDetailToConnector:l,setup:u,setState(I){return c.setState(typeof I=="function"?I(c.getState()):I,!0)},subscribe(I){return c.subscribe(I)}},events:{change:x,connect:v,disconnect:E}}}}function zP(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const u of s??[])if(u.rdns){const l=Array.isArray(u.rdns)?u.rdns:[u.rdns];for(const h of l)i.add(h)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const u of a){if(i.has(u.info.rdns))continue;const l=t._internal.connectors.providerDetailToConnector(u),h=t._internal.connectors.setup(l);o.push(h)}return[...s,...o]})),r?vP(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function qP(t){var i,o,a;const{chain:e}=t,n=e.rpcUrls.default.http[0];if(!t.transports)return[n];const r=(o=(i=t.transports)==null?void 0:i[e.id])==null?void 0:o.call(i,{chain:e});return(((a=r==null?void 0:r.value)==null?void 0:a.transports)||[r]).map(({value:c})=>(c==null?void 0:c.url)||n)}function HP(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=zP(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=Rt.useRef(!0);return Rt.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const E2=Rt.createContext(void 0);function mK(t){const{children:e,config:n}=t,r={value:n};return Rt.createElement(HP,t,Rt.createElement(E2.Provider,r,e))}const VP="2.16.9",KP=()=>`wagmi@${VP}`;let GP=class extends Ol{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return KP()}};class WP extends GP{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function zo(t={}){const e=t.config??Rt.useContext(E2);if(!e)throw new WP;return e}var x2={exports:{}},$2={},I2={exports:{}},_2={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $o=Rt;function ZP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var YP=typeof Object.is=="function"?Object.is:ZP,QP=$o.useState,JP=$o.useEffect,XP=$o.useLayoutEffect,eA=$o.useDebugValue;function tA(t,e){var n=e(),r=QP({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return XP(function(){s.value=n,s.getSnapshot=e,Ah(s)&&i({inst:s})},[t,n,e]),JP(function(){return Ah(s)&&i({inst:s}),t(function(){Ah(s)&&i({inst:s})})},[t]),eA(n),n}function Ah(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!YP(t,n)}catch{return!0}}function nA(t,e){return e()}var rA=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?nA:tA;_2.useSyncExternalStore=$o.useSyncExternalStore!==void 0?$o.useSyncExternalStore:rA;I2.exports=_2;var sA=I2.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cl=Rt,iA=sA;function oA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var aA=typeof Object.is=="function"?Object.is:oA,cA=iA.useSyncExternalStore,uA=Cl.useRef,lA=Cl.useEffect,hA=Cl.useMemo,fA=Cl.useDebugValue;$2.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=uA(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=hA(function(){function c(d){if(!u){if(u=!0,l=d,d=r(d),s!==void 0&&o.hasValue){var p=o.value;if(s(p,d))return h=p}return h=d}if(p=h,aA(l,d))return p;var g=r(d);return s!==void 0&&s(p,g)?(l=d,p):(l=d,h=g)}var u=!1,l,h,f=n===void 0?null:n;return[function(){return c(e())},f===null?void 0:function(){return c(f())}]},[e,n,r,s]);var a=cA(t,i[0],i[1]);return lA(function(){o.hasValue=!0,o.value=a},[a]),fA(a),a};x2.exports=$2;var dA=x2.exports;const Oh=t=>typeof t=="object"&&!Array.isArray(t);function pA(t,e,n=e,r=xo){const s=Rt.useRef([]),i=dA.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(Oh(o)&&Oh(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return Rt.useMemo(()=>{if(Oh(i)){const o={...i};let a={};for(const[c,u]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),u)}};return Object.defineProperties(o,a),o}return i},[i])}function wK(t={}){const e=zo(t);return pA(n=>EP(e,{onChange:n}),()=>b2(e))}var Ac=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},gA={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Jr,bp,_w,yA=(_w=class{constructor(){ce(this,Jr,gA);ce(this,bp,!1)}setTimeoutProvider(t){se(this,Jr,t)}setTimeout(t,e){return q(this,Jr).setTimeout(t,e)}clearTimeout(t){q(this,Jr).clearTimeout(t)}setInterval(t,e){return q(this,Jr).setInterval(t,e)}clearInterval(t){q(this,Jr).clearInterval(t)}},Jr=new WeakMap,bp=new WeakMap,_w),yd=new yA;function mA(t){setTimeout(t,0)}var Tl=typeof window>"u"||"Deno"in globalThis;function In(){}function bA(t,e){return typeof t=="function"?t(e):t}function wA(t){return typeof t=="number"&&t>=0&&t!==1/0}function vA(t,e){return Math.max(t+(e||0)-Date.now(),0)}function md(t,e){return typeof t=="function"?t(e):t}function EA(t,e){return typeof t=="function"?t(e):t}function ty(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==p0(o,e.options))return!1}else if(!Ja(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function ny(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(ei(e.options.mutationKey)!==ei(i))return!1}else if(!Ja(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function p0(t,e){return((e==null?void 0:e.queryKeyHashFn)||ei)(t)}function ei(t){return JSON.stringify(t,(e,n)=>bd(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ja(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Ja(t[n],e[n])):!1}var xA=Object.prototype.hasOwnProperty;function S2(t,e){if(t===e)return t;const n=ry(t)&&ry(e);if(!n&&!(bd(t)&&bd(e)))return e;const s=(n?t:Object.keys(t)).length,i=n?e:Object.keys(e),o=i.length,a=n?new Array(o):{};let c=0;for(let u=0;u<o;u++){const l=n?u:i[u],h=t[l],f=e[l];if(h===f){a[l]=h,(n?u<s:xA.call(t,l))&&c++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){a[l]=f;continue}const d=S2(h,f);a[l]=d,d===h&&c++}return s===o&&c===s?t:a}function $A(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function ry(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function bd(t){if(!sy(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!sy(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function sy(t){return Object.prototype.toString.call(t)==="[object Object]"}function IA(t){return new Promise(e=>{yd.setTimeout(e,t)})}function _A(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?S2(t,e):e}function SA(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function PA(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var g0=Symbol();function P2(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===g0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function vK(t,e){return typeof t=="function"?t(...e):!!t}var Bs,Xr,io,Sw,AA=(Sw=class extends Ac{constructor(){super();ce(this,Bs);ce(this,Xr);ce(this,io);se(this,io,e=>{if(!Tl&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){q(this,Xr)||this.setEventListener(q(this,io))}onUnsubscribe(){var e;this.hasListeners()||((e=q(this,Xr))==null||e.call(this),se(this,Xr,void 0))}setEventListener(e){var n;se(this,io,e),(n=q(this,Xr))==null||n.call(this),se(this,Xr,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){q(this,Bs)!==e&&(se(this,Bs,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof q(this,Bs)=="boolean"?q(this,Bs):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Bs=new WeakMap,Xr=new WeakMap,io=new WeakMap,Sw),A2=new AA;function OA(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}var CA=mA;function TA(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=CA;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var yt=TA(),oo,es,ao,Pw,DA=(Pw=class extends Ac{constructor(){super();ce(this,oo,!0);ce(this,es);ce(this,ao);se(this,ao,e=>{if(!Tl&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){q(this,es)||this.setEventListener(q(this,ao))}onUnsubscribe(){var e;this.hasListeners()||((e=q(this,es))==null||e.call(this),se(this,es,void 0))}setEventListener(e){var n;se(this,ao,e),(n=q(this,es))==null||n.call(this),se(this,es,e(this.setOnline.bind(this)))}setOnline(e){q(this,oo)!==e&&(se(this,oo,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return q(this,oo)}},oo=new WeakMap,es=new WeakMap,ao=new WeakMap,Pw),zu=new DA;function BA(t){return Math.min(1e3*2**t,3e4)}function O2(t){return(t??"online")==="online"?zu.isOnline():!0}var wd=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function C2(t){let e=!1,n=0,r;const s=OA(),i=()=>s.status!=="pending",o=g=>{var y;if(!i()){const w=new wd(g);f(w),(y=t.onCancel)==null||y.call(t,w)}},a=()=>{e=!0},c=()=>{e=!1},u=()=>A2.isFocused()&&(t.networkMode==="always"||zu.isOnline())&&t.canRun(),l=()=>O2(t.networkMode)&&t.canRun(),h=g=>{i()||(r==null||r(),s.resolve(g))},f=g=>{i()||(r==null||r(),s.reject(g))},d=()=>new Promise(g=>{var y;r=w=>{(i()||u())&&g(w)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;r=void 0,i()||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(i())return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(h).catch(w=>{var S;if(i())return;const x=t.retry??(Tl?0:3),v=t.retryDelay??BA,E=typeof v=="function"?v(n,w):v,I=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,w);if(e||!I){f(w);return}n++,(S=t.onFail)==null||S.call(t,n,w),IA(E).then(()=>u()?void 0:d()).then(()=>{e?f(w):p()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r==null||r(),s),cancelRetry:a,continueRetry:c,canStart:l,start:()=>(l()?p():d().then(p),s)}}var Ns,Aw,T2=(Aw=class{constructor(){ce(this,Ns)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),wA(this.gcTime)&&se(this,Ns,yd.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Tl?1/0:5*60*1e3))}clearGcTimeout(){q(this,Ns)&&(yd.clearTimeout(q(this,Ns)),se(this,Ns,void 0))}},Ns=new WeakMap,Aw),Rs,co,un,ks,Je,dc,Us,Sn,yr,Ow,NA=(Ow=class extends T2{constructor(e){super();ce(this,Sn);ce(this,Rs);ce(this,co);ce(this,un);ce(this,ks);ce(this,Je);ce(this,dc);ce(this,Us);se(this,Us,!1),se(this,dc,e.defaultOptions),this.setOptions(e.options),this.observers=[],se(this,ks,e.client),se(this,un,q(this,ks).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,se(this,Rs,iy(this.options)),this.state=e.state??q(this,Rs),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=q(this,Je))==null?void 0:e.promise}setOptions(e){if(this.options={...q(this,dc),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=iy(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),se(this,Rs,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&q(this,un).remove(this)}setData(e,n){const r=_A(this.state.data,e,this.options);return Ue(this,Sn,yr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Ue(this,Sn,yr).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=q(this,Je))==null?void 0:r.promise;return(s=q(this,Je))==null||s.cancel(e),n?n.then(In).catch(In):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(q(this,Rs))}isActive(){return this.observers.some(e=>EA(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===g0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>md(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!vA(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=q(this,Je))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=q(this,Je))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),q(this,un).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(q(this,Je)&&(q(this,Us)?q(this,Je).cancel({revert:!0}):q(this,Je).cancelRetry()),this.scheduleGc()),q(this,un).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ue(this,Sn,yr).call(this,{type:"invalidate"})}async fetch(e,n){var c,u,l,h,f,d,p,g,y,w,x,v;if(this.state.fetchStatus!=="idle"&&((c=q(this,Je))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(q(this,Je))return q(this,Je).continueRetry(),q(this,Je).promise}if(e&&this.setOptions(e),!this.options.queryFn){const E=this.observers.find(I=>I.options.queryFn);E&&this.setOptions(E.options)}const r=new AbortController,s=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(se(this,Us,!0),r.signal)})},i=()=>{const E=P2(this.options,n),S=(()=>{const P={client:q(this,ks),queryKey:this.queryKey,meta:this.meta};return s(P),P})();return se(this,Us,!1),this.options.persister?this.options.persister(E,S,this):E(S)},a=(()=>{const E={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:q(this,ks),state:this.state,fetchFn:i};return s(E),E})();(u=this.options.behavior)==null||u.onFetch(a,this),se(this,co,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((l=a.fetchOptions)==null?void 0:l.meta))&&Ue(this,Sn,yr).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta}),se(this,Je,C2({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,onCancel:E=>{E instanceof wd&&E.revert&&this.setState({...q(this,co),fetchStatus:"idle"}),r.abort()},onFail:(E,I)=>{Ue(this,Sn,yr).call(this,{type:"failed",failureCount:E,error:I})},onPause:()=>{Ue(this,Sn,yr).call(this,{type:"pause"})},onContinue:()=>{Ue(this,Sn,yr).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}));try{const E=await q(this,Je).start();if(E===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(E),(d=(f=q(this,un).config).onSuccess)==null||d.call(f,E,this),(g=(p=q(this,un).config).onSettled)==null||g.call(p,E,this.state.error,this),E}catch(E){if(E instanceof wd){if(E.silent)return q(this,Je).promise;if(E.revert){if(this.state.data===void 0)throw E;return this.state.data}}throw Ue(this,Sn,yr).call(this,{type:"error",error:E}),(w=(y=q(this,un).config).onError)==null||w.call(y,E,this),(v=(x=q(this,un).config).onSettled)==null||v.call(x,this.state.data,E,this),E}finally{this.scheduleGc()}}},Rs=new WeakMap,co=new WeakMap,un=new WeakMap,ks=new WeakMap,Je=new WeakMap,dc=new WeakMap,Us=new WeakMap,Sn=new WeakSet,yr=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...RA(r.data,this.options),fetchMeta:e.meta??null};case"success":const s={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return se(this,co,e.manual?s:void 0),s;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),yt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),q(this,un).notify({query:this,type:"updated",action:e})})},Ow);function RA(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:O2(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function iy(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function oy(t){return{onFetch:(e,n)=>{var l,h,f,d,p;const r=e.options,s=(f=(h=(l=e.fetchOptions)==null?void 0:l.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((d=e.state.data)==null?void 0:d.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const y=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},w=P2(e.options,e.fetchOptions),x=async(v,E,I)=>{if(g)return Promise.reject();if(E==null&&v.pages.length)return Promise.resolve(v);const P=(()=>{const k={client:e.client,queryKey:e.queryKey,pageParam:E,direction:I?"backward":"forward",meta:e.options.meta};return y(k),k})(),C=await w(P),{maxPages:O}=e.options,j=I?PA:SA;return{pages:j(v.pages,C,O),pageParams:j(v.pageParams,E,O)}};if(s&&i.length){const v=s==="backward",E=v?kA:ay,I={pages:i,pageParams:o},S=E(r,I);a=await x(I,S,v)}else{const v=t??i.length;do{const E=c===0?o[0]??r.initialPageParam:ay(r,a);if(c>0&&E==null)break;a=await x(a,E),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function ay(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function kA(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Yn,wt,Ms,Qn,Gr,Cw,UA=(Cw=class extends T2{constructor(e){super();ce(this,Qn);ce(this,Yn);ce(this,wt);ce(this,Ms);this.mutationId=e.mutationId,se(this,wt,e.mutationCache),se(this,Yn,[]),this.state=e.state||D2(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){q(this,Yn).includes(e)||(q(this,Yn).push(e),this.clearGcTimeout(),q(this,wt).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){se(this,Yn,q(this,Yn).filter(n=>n!==e)),this.scheduleGc(),q(this,wt).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){q(this,Yn).length||(this.state.status==="pending"?this.scheduleGc():q(this,wt).remove(this))}continue(){var e;return((e=q(this,Ms))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,u,l,h,f,d,p,g,y,w,x,v,E,I,S,P,C;const n=()=>{Ue(this,Qn,Gr).call(this,{type:"continue"})};se(this,Ms,C2({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(O,j)=>{Ue(this,Qn,Gr).call(this,{type:"failed",failureCount:O,error:j})},onPause:()=>{Ue(this,Qn,Gr).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>q(this,wt).canRun(this)}));const r=this.state.status==="pending",s=!q(this,Ms).canStart();try{if(r)n();else{Ue(this,Qn,Gr).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=q(this,wt).config).onMutate)==null?void 0:o.call(i,e,this));const j=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));j!==this.state.context&&Ue(this,Qn,Gr).call(this,{type:"pending",context:j,variables:e,isPaused:s})}const O=await q(this,Ms).start();return await((l=(u=q(this,wt).config).onSuccess)==null?void 0:l.call(u,O,e,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,O,e,this.state.context)),await((p=(d=q(this,wt).config).onSettled)==null?void 0:p.call(d,O,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,O,null,e,this.state.context)),Ue(this,Qn,Gr).call(this,{type:"success",data:O}),O}catch(O){try{throw await((x=(w=q(this,wt).config).onError)==null?void 0:x.call(w,O,e,this.state.context,this)),await((E=(v=this.options).onError)==null?void 0:E.call(v,O,e,this.state.context)),await((S=(I=q(this,wt).config).onSettled)==null?void 0:S.call(I,void 0,O,this.state.variables,this.state.context,this)),await((C=(P=this.options).onSettled)==null?void 0:C.call(P,void 0,O,e,this.state.context)),O}finally{Ue(this,Qn,Gr).call(this,{type:"error",error:O})}}finally{q(this,wt).runNext(this)}}},Yn=new WeakMap,wt=new WeakMap,Ms=new WeakMap,Qn=new WeakSet,Gr=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),yt.batch(()=>{q(this,Yn).forEach(r=>{r.onMutationUpdate(e)}),q(this,wt).notify({mutation:this,type:"updated",action:e})})},Cw);function D2(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Er,Pn,pc,Tw,MA=(Tw=class extends Ac{constructor(e={}){super();ce(this,Er);ce(this,Pn);ce(this,pc);this.config=e,se(this,Er,new Set),se(this,Pn,new Map),se(this,pc,0)}build(e,n,r){const s=new UA({mutationCache:this,mutationId:++Wc(this,pc)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){q(this,Er).add(e);const n=ru(e);if(typeof n=="string"){const r=q(this,Pn).get(n);r?r.push(e):q(this,Pn).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(q(this,Er).delete(e)){const n=ru(e);if(typeof n=="string"){const r=q(this,Pn).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&q(this,Pn).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=ru(e);if(typeof n=="string"){const r=q(this,Pn).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=ru(e);if(typeof n=="string"){const s=(r=q(this,Pn).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){yt.batch(()=>{q(this,Er).forEach(e=>{this.notify({type:"removed",mutation:e})}),q(this,Er).clear(),q(this,Pn).clear()})}getAll(){return Array.from(q(this,Er))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>ny(n,r))}findAll(e={}){return this.getAll().filter(n=>ny(e,n))}notify(e){yt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return yt.batch(()=>Promise.all(e.map(n=>n.continue().catch(In))))}},Er=new WeakMap,Pn=new WeakMap,pc=new WeakMap,Tw);function ru(t){var e;return(e=t.options.scope)==null?void 0:e.id}var ts,ns,Ot,xr,Tr,_u,vd,Dw,EK=(Dw=class extends Ac{constructor(e,n){super();ce(this,Tr);ce(this,ts);ce(this,ns);ce(this,Ot);ce(this,xr);se(this,ts,e),this.setOptions(n),this.bindMethods(),Ue(this,Tr,_u).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var r;const n=this.options;this.options=q(this,ts).defaultMutationOptions(e),$A(this.options,n)||q(this,ts).getMutationCache().notify({type:"observerOptionsUpdated",mutation:q(this,Ot),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&ei(n.mutationKey)!==ei(this.options.mutationKey)?this.reset():((r=q(this,Ot))==null?void 0:r.state.status)==="pending"&&q(this,Ot).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=q(this,Ot))==null||e.removeObserver(this)}onMutationUpdate(e){Ue(this,Tr,_u).call(this),Ue(this,Tr,vd).call(this,e)}getCurrentResult(){return q(this,ns)}reset(){var e;(e=q(this,Ot))==null||e.removeObserver(this),se(this,Ot,void 0),Ue(this,Tr,_u).call(this),Ue(this,Tr,vd).call(this)}mutate(e,n){var r;return se(this,xr,n),(r=q(this,Ot))==null||r.removeObserver(this),se(this,Ot,q(this,ts).getMutationCache().build(q(this,ts),this.options)),q(this,Ot).addObserver(this),q(this,Ot).execute(e)}},ts=new WeakMap,ns=new WeakMap,Ot=new WeakMap,xr=new WeakMap,Tr=new WeakSet,_u=function(){var n;const e=((n=q(this,Ot))==null?void 0:n.state)??D2();se(this,ns,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},vd=function(e){yt.batch(()=>{var n,r,s,i,o,a,c,u;if(q(this,xr)&&this.hasListeners()){const l=q(this,ns).variables,h=q(this,ns).context;(e==null?void 0:e.type)==="success"?((r=(n=q(this,xr)).onSuccess)==null||r.call(n,e.data,l,h),(i=(s=q(this,xr)).onSettled)==null||i.call(s,e.data,null,l,h)):(e==null?void 0:e.type)==="error"&&((a=(o=q(this,xr)).onError)==null||a.call(o,e.error,l,h),(u=(c=q(this,xr)).onSettled)==null||u.call(c,void 0,e.error,l,h))}this.listeners.forEach(l=>{l(q(this,ns))})})},Dw),Jn,Bw,LA=(Bw=class extends Ac{constructor(e={}){super();ce(this,Jn);this.config=e,se(this,Jn,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??p0(s,n);let o=this.get(i);return o||(o=new NA({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){q(this,Jn).has(e.queryHash)||(q(this,Jn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=q(this,Jn).get(e.queryHash);n&&(e.destroy(),n===e&&q(this,Jn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){yt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return q(this,Jn).get(e)}getAll(){return[...q(this,Jn).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>ty(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>ty(e,r)):n}notify(e){yt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){yt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){yt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Jn=new WeakMap,Bw),Re,rs,ss,uo,lo,is,ho,fo,Nw,xK=(Nw=class{constructor(t={}){ce(this,Re);ce(this,rs);ce(this,ss);ce(this,uo);ce(this,lo);ce(this,is);ce(this,ho);ce(this,fo);se(this,Re,t.queryCache||new LA),se(this,rs,t.mutationCache||new MA),se(this,ss,t.defaultOptions||{}),se(this,uo,new Map),se(this,lo,new Map),se(this,is,0)}mount(){Wc(this,is)._++,q(this,is)===1&&(se(this,ho,A2.subscribe(async t=>{t&&(await this.resumePausedMutations(),q(this,Re).onFocus())})),se(this,fo,zu.subscribe(async t=>{t&&(await this.resumePausedMutations(),q(this,Re).onOnline())})))}unmount(){var t,e;Wc(this,is)._--,q(this,is)===0&&((t=q(this,ho))==null||t.call(this),se(this,ho,void 0),(e=q(this,fo))==null||e.call(this),se(this,fo,void 0))}isFetching(t){return q(this,Re).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return q(this,rs).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=q(this,Re).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=q(this,Re).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(md(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return q(this,Re).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=q(this,Re).get(r.queryHash),i=s==null?void 0:s.state.data,o=bA(e,i);if(o!==void 0)return q(this,Re).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return yt.batch(()=>q(this,Re).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=q(this,Re).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=q(this,Re);yt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=q(this,Re);return yt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=yt.batch(()=>q(this,Re).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(In).catch(In)}invalidateQueries(t,e={}){return yt.batch(()=>(q(this,Re).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=yt.batch(()=>q(this,Re).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(In)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(In)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=q(this,Re).build(this,e);return n.isStaleByTime(md(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(In).catch(In)}fetchInfiniteQuery(t){return t.behavior=oy(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(In).catch(In)}ensureInfiniteQueryData(t){return t.behavior=oy(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return zu.isOnline()?q(this,rs).resumePausedMutations():Promise.resolve()}getQueryCache(){return q(this,Re)}getMutationCache(){return q(this,rs)}getDefaultOptions(){return q(this,ss)}setDefaultOptions(t){se(this,ss,t)}setQueryDefaults(t,e){q(this,uo).set(ei(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...q(this,uo).values()],n={};return e.forEach(r=>{Ja(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){q(this,lo).set(ei(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...q(this,lo).values()],n={};return e.forEach(r=>{Ja(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...q(this,ss).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=p0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===g0&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...q(this,ss).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){q(this,Re).clear(),q(this,rs).clear()}},Re=new WeakMap,rs=new WeakMap,ss=new WeakMap,uo=new WeakMap,lo=new WeakMap,is=new WeakMap,ho=new WeakMap,fo=new WeakMap,Nw);function jA(t){return{mutationFn(e){return uP(t,e)},mutationKey:["connect"]}}function FA(t){return{mutationFn(e){return wP(t,e)},mutationKey:["disconnect"]}}function $K(t={}){const e=zo(t);return Rt.useSyncExternalStore(n=>xP(e,{onChange:n}),()=>Yg(e),()=>Yg(e))}function zA(t={}){const e=zo(t);return Rt.useSyncExternalStore(n=>IP(e,{onChange:n}),()=>Qg(e),()=>Qg(e))}function IK(t={}){const{mutation:e}=t,n=zo(t),r=jA(n),{mutate:s,mutateAsync:i,...o}=kw({...e,...r});return Rt.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:zA({config:n})}}function qA(t={}){const e=zo(t);return Rt.useSyncExternalStore(n=>$P(e,{onChange:n}),()=>fd(e),()=>fd(e))}function _K(t={}){const{mutation:e}=t,n=zo(t),r=FA(n),{mutate:s,mutateAsync:i,...o}=kw({...e,...r});return{...o,connectors:qA({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}const HA={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},VA={block:FI({format(t){var n;return{transactions:(n=t.transactions)==null?void 0:n.map(r=>{if(typeof r=="string")return r;const s=$l(r);return s.typeHex==="0x7e"&&(s.isSystemTx=r.isSystemTx,s.mint=r.mint?lt(r.mint):void 0,s.sourceHash=r.sourceHash,s.type="deposit"),s}),stateRoot:t.stateRoot}}}),transaction:LI({format(t){const e={};return t.type==="0x7e"&&(e.isSystemTx=t.isSystemTx,e.mint=t.mint?lt(t.mint):void 0,e.sourceHash=t.sourceHash,e.type="deposit"),e}}),transactionReceipt:F3({format(t){return{l1GasPrice:t.l1GasPrice?lt(t.l1GasPrice):null,l1GasUsed:t.l1GasUsed?lt(t.l1GasUsed):null,l1Fee:t.l1Fee?lt(t.l1Fee):null,l1FeeScalar:t.l1FeeScalar?Number(t.l1FeeScalar):null}}})};function KA(t,e){return ZA(t)?WA(t):I3(t,e)}const GA={transaction:KA};function WA(t){YA(t);const{sourceHash:e,data:n,from:r,gas:s,isSystemTx:i,mint:o,to:a,value:c}=t,u=[e,r,a??"0x",o?Zt(o):"0x",c?Zt(c):"0x",s?Zt(s):"0x",i?"0x1":"0x",n??"0x"];return kt(["0x7e",ds(u)])}function ZA(t){return t.type==="deposit"||typeof t.sourceHash<"u"}function YA(t){const{from:e,to:n}=t;if(e&&!Ke(e))throw new mt({address:e});if(n&&!Ke(n))throw new mt({address:n})}const qu={blockTime:2e3,contracts:HA,formatters:VA,serializers:GA},SK=di({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:250,rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),na=1,QA=di({...qu,id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}},contracts:{...qu.contracts,disputeGameFactory:{[na]:{address:"0x43edB88C4B80fDD2AdFF2412A7BebF9dF42cB40e"}},l2OutputOracle:{[na]:{address:"0x56315b90c40730925ec5485cf004d835058518A0"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022},portal:{[na]:{address:"0x49048044D57e1C92A77f79988d21Fa8fAF74E97e",blockCreated:17482143}},l1StandardBridge:{[na]:{address:"0x3154Cf16ccdb4C6d922629664174b904d80F2C35",blockCreated:17482143}}},sourceId:na});({...QA});const PK=di({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:12e3,rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:23085558},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),ra=1,AK=di({...qu,id:10,name:"OP Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.optimism.io"]}},blockExplorers:{default:{name:"Optimism Explorer",url:"https://optimistic.etherscan.io",apiUrl:"https://api-optimistic.etherscan.io/api"}},contracts:{...qu.contracts,disputeGameFactory:{[ra]:{address:"0xe5965Ab5962eDc7477C8520243A95517CD252fA9"}},l2OutputOracle:{[ra]:{address:"0xdfe97868233d1aa22e815a266982f2cf17685a27"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:4286263},portal:{[ra]:{address:"0xbEb5Fc579115071764c7423A4f12eDde41f106Ed"}},l1StandardBridge:{[ra]:{address:"0x99C9fc46f92E8a1c0deC1b1747d010903E884bE1"}}},sourceId:ra}),OK=di({id:137,name:"Polygon",nativeCurrency:{name:"POL",symbol:"POL",decimals:18},rpcUrls:{default:{http:["https://polygon-rpc.com"]}},blockExplorers:{default:{name:"PolygonScan",url:"https://polygonscan.com",apiUrl:"https://api.polygonscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:25770160}}}),CK=di({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:8928790}},testnet:!0});y0.type="coinbaseWallet";function y0(t={}){return t.version==="3"||t.headlessMode?XA(t):JA(t)}function JA(t){let e,n,r,s;return i=>({id:"coinbaseWalletSDK",name:"Coinbase Wallet",rdns:"com.coinbase.wallet",type:y0.type,async connect({chainId:o,...a}={}){try{const c=await this.getProvider(),u=(await c.request({method:"eth_requestAccounts",params:"instantOnboarding"in a&&a.instantOnboarding?[{onboarding:"instant"}]:[]})).map(h=>Et(h));n||(n=this.onAccountsChanged.bind(this),c.on("accountsChanged",n)),r||(r=this.onChainChanged.bind(this),c.on("chainChanged",r)),s||(s=this.onDisconnect.bind(this),c.on("disconnect",s));let l=await this.getChainId();if(o&&l!==o){const h=await this.switchChain({chainId:o}).catch(f=>{if(f.code===Oe.code)throw f;return{id:l}});l=(h==null?void 0:h.id)??l}return{accounts:u,chainId:l}}catch(c){throw/(user closed modal|accounts received is empty|user denied account|request rejected)/i.test(c.message)?new Oe(c):c}},async disconnect(){var a;const o=await this.getProvider();n&&(o.removeListener("accountsChanged",n),n=void 0),r&&(o.removeListener("chainChanged",r),r=void 0),s&&(o.removeListener("disconnect",s),s=void 0),o.disconnect(),(a=o.close)==null||a.call(o)},async getAccounts(){return(await(await this.getProvider()).request({method:"eth_accounts"})).map(a=>Et(a))},async getChainId(){const a=await(await this.getProvider()).request({method:"eth_chainId"});return Number(a)},async getProvider(){if(!e){const o=(()=>{var u;return typeof t.preference=="string"?{options:t.preference}:{...t.preference,options:((u=t.preference)==null?void 0:u.options)??"all"}})(),{createCoinbaseWalletSDK:a}=await fi(async()=>{const{createCoinbaseWalletSDK:u}=await import("./index-5riUZR2z.js");return{createCoinbaseWalletSDK:u}},__vite__mapDeps([0,1,2,3]));e=a({...t,appChainIds:i.chains.map(u=>u.id),preference:o}).getProvider()}return e},async isAuthorized(){try{return!!(await this.getAccounts()).length}catch{return!1}},async switchChain({addEthereumChainParameter:o,chainId:a}){var l,h,f,d;const c=i.chains.find(p=>p.id===a);if(!c)throw new pn(new Eo);const u=await this.getProvider();try{return await u.request({method:"wallet_switchEthereumChain",params:[{chainId:Y(c.id)}]}),c}catch(p){if(p.code===4902)try{let g;o!=null&&o.blockExplorerUrls?g=o.blockExplorerUrls:g=(l=c.blockExplorers)!=null&&l.default.url?[(h=c.blockExplorers)==null?void 0:h.default.url]:[];let y;(f=o==null?void 0:o.rpcUrls)!=null&&f.length?y=o.rpcUrls:y=[((d=c.rpcUrls.default)==null?void 0:d.http[0])??""];const w={blockExplorerUrls:g,chainId:Y(a),chainName:(o==null?void 0:o.chainName)??c.name,iconUrls:o==null?void 0:o.iconUrls,nativeCurrency:(o==null?void 0:o.nativeCurrency)??c.nativeCurrency,rpcUrls:y};return await u.request({method:"wallet_addEthereumChain",params:[w]}),c}catch(g){throw new Oe(g)}throw new pn(p)}},onAccountsChanged(o){o.length===0?this.onDisconnect():i.emitter.emit("change",{accounts:o.map(a=>Et(a))})},onChainChanged(o){const a=Number(o);i.emitter.emit("change",{chainId:a})},async onDisconnect(o){i.emitter.emit("disconnect");const a=await this.getProvider();n&&(a.removeListener("accountsChanged",n),n=void 0),r&&(a.removeListener("chainChanged",r),r=void 0),s&&(a.removeListener("disconnect",s),s=void 0)}})}function XA(t){let n,r,s,i,o;return a=>({id:"coinbaseWalletSDK",name:"Coinbase Wallet",rdns:"com.coinbase.wallet",type:y0.type,async connect({chainId:c}={}){try{const u=await this.getProvider(),l=(await u.request({method:"eth_requestAccounts"})).map(f=>Et(f));s||(s=this.onAccountsChanged.bind(this),u.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),u.on("chainChanged",i)),o||(o=this.onDisconnect.bind(this),u.on("disconnect",o));let h=await this.getChainId();if(c&&h!==c){const f=await this.switchChain({chainId:c}).catch(d=>{if(d.code===Oe.code)throw d;return{id:h}});h=(f==null?void 0:f.id)??h}return{accounts:l,chainId:h}}catch(u){throw/(user closed modal|accounts received is empty|user denied account)/i.test(u.message)?new Oe(u):u}},async disconnect(){const c=await this.getProvider();s&&(c.removeListener("accountsChanged",s),s=void 0),i&&(c.removeListener("chainChanged",i),i=void 0),o&&(c.removeListener("disconnect",o),o=void 0),c.disconnect(),c.close()},async getAccounts(){return(await(await this.getProvider()).request({method:"eth_accounts"})).map(u=>Et(u))},async getChainId(){const u=await(await this.getProvider()).request({method:"eth_chainId"});return Number(u)},async getProvider(){var c;if(!r){const u=await(async()=>{const{default:p}=await fi(async()=>{const{default:g}=await import("./index-BEnFPcoa.js").then(y=>y.i);return{default:g}},__vite__mapDeps([4,2,1]));return typeof p!="function"&&typeof p.default=="function"?p.default:p})();n=new u({...t,reloadOnDisconnect:!1});const l=(c=n.walletExtension)==null?void 0:c.getChainId(),h=a.chains.find(p=>t.chainId?p.id===t.chainId:p.id===l)||a.chains[0],f=t.chainId||(h==null?void 0:h.id),d=t.jsonRpcUrl||(h==null?void 0:h.rpcUrls.default.http[0]);r=n.makeWeb3Provider(d,f)}return r},async isAuthorized(){try{return!!(await this.getAccounts()).length}catch{return!1}},async switchChain({addEthereumChainParameter:c,chainId:u}){var f,d,p,g;const l=a.chains.find(y=>y.id===u);if(!l)throw new pn(new Eo);const h=await this.getProvider();try{return await h.request({method:"wallet_switchEthereumChain",params:[{chainId:Y(l.id)}]}),l}catch(y){if(y.code===4902)try{let w;c!=null&&c.blockExplorerUrls?w=c.blockExplorerUrls:w=(f=l.blockExplorers)!=null&&f.default.url?[(d=l.blockExplorers)==null?void 0:d.default.url]:[];let x;(p=c==null?void 0:c.rpcUrls)!=null&&p.length?x=c.rpcUrls:x=[((g=l.rpcUrls.default)==null?void 0:g.http[0])??""];const v={blockExplorerUrls:w,chainId:Y(u),chainName:(c==null?void 0:c.chainName)??l.name,iconUrls:c==null?void 0:c.iconUrls,nativeCurrency:(c==null?void 0:c.nativeCurrency)??l.nativeCurrency,rpcUrls:x};return await h.request({method:"wallet_addEthereumChain",params:[v]}),l}catch(w){throw new Oe(w)}throw new pn(y)}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(u=>Et(u))})},onChainChanged(c){const u=Number(c);a.emitter.emit("change",{chainId:u})},async onDisconnect(c){a.emitter.emit("disconnect");const u=await this.getProvider();s&&(u.removeListener("accountsChanged",s),s=void 0),i&&(u.removeListener("chainChanged",i),i=void 0),o&&(u.removeListener("disconnect",o),o=void 0)}})}B2.type="walletConnect";function B2(t){const e=t.isNewChainsStale??!0;let n,r;const s="eip155";let i,o,a,c,u,l;return h=>({id:"walletConnect",name:"WalletConnect",type:B2.type,async setup(){const f=await this.getProvider().catch(()=>null);f&&(a||(a=this.onConnect.bind(this),f.on("connect",a)),u||(u=this.onSessionDelete.bind(this),f.on("session_delete",u)))},async connect({chainId:f,...d}={}){var p,g;try{const y=await this.getProvider();if(!y)throw new Wr;c||(c=this.onDisplayUri,y.on("display_uri",c));let w=f;if(!w){const I=await((p=h.storage)==null?void 0:p.getItem("state"))??{};h.chains.some(P=>P.id===I.chainId)?w=I.chainId:w=(g=h.chains[0])==null?void 0:g.id}if(!w)throw new Error("No chains found on connector.");const x=await this.isChainsStale();if(y.session&&x&&await y.disconnect(),!y.session||x){const I=h.chains.filter(S=>S.id!==w).map(S=>S.id);await y.connect({optionalChains:[w,...I],..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(h.chains.map(S=>S.id))}const v=(await y.enable()).map(I=>Et(I));let E=await this.getChainId();if(f&&E!==f){const I=await this.switchChain({chainId:f}).catch(S=>{var P;if(S.code===Oe.code&&((P=S.cause)==null?void 0:P.message)!=="Missing or invalid. request() method: wallet_addEthereumChain")throw S;return{id:E}});E=(I==null?void 0:I.id)??E}return c&&(y.removeListener("display_uri",c),c=void 0),a&&(y.removeListener("connect",a),a=void 0),i||(i=this.onAccountsChanged.bind(this),y.on("accountsChanged",i)),o||(o=this.onChainChanged.bind(this),y.on("chainChanged",o)),l||(l=this.onDisconnect.bind(this),y.on("disconnect",l)),u||(u=this.onSessionDelete.bind(this),y.on("session_delete",u)),{accounts:v,chainId:E}}catch(y){throw/(user rejected|connection request reset)/i.test(y==null?void 0:y.message)?new Oe(y):y}},async disconnect(){const f=await this.getProvider();try{await(f==null?void 0:f.disconnect())}catch(d){if(!/No matching key/i.test(d.message))throw d}finally{o&&(f==null||f.removeListener("chainChanged",o),o=void 0),l&&(f==null||f.removeListener("disconnect",l),l=void 0),a||(a=this.onConnect.bind(this),f==null||f.on("connect",a)),i&&(f==null||f.removeListener("accountsChanged",i),i=void 0),u&&(f==null||f.removeListener("session_delete",u),u=void 0),this.setRequestedChainsIds([])}},async getAccounts(){return(await this.getProvider()).accounts.map(d=>Et(d))},async getProvider(){async function f(){const d=h.chains.map(g=>g.id);if(!d.length)return;const{EthereumProvider:p}=await fi(async()=>{const{EthereumProvider:g}=await Promise.resolve().then(()=>rV);return{EthereumProvider:g}},void 0);return await p.init({...t,disableProviderPing:!0,optionalChains:d,projectId:t.projectId,rpcMap:Object.fromEntries(h.chains.map(g=>{const[y]=qP({chain:g,transports:h.transports});return[g.id,y]})),showQrModal:t.showQrModal??!0})}return n||(r||(r=f()),n=await r,n==null||n.events.setMaxListeners(Number.POSITIVE_INFINITY)),n},async getChainId(){return(await this.getProvider()).chainId},async isAuthorized(){try{const[f,d]=await Promise.all([this.getAccounts(),this.getProvider()]);return f.length?await this.isChainsStale()&&d.session?(await d.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:f,chainId:d}){var y,w,x;const p=await this.getProvider();if(!p)throw new Wr;const g=h.chains.find(v=>v.id===d);if(!g)throw new pn(new Eo);try{await Promise.all([new Promise(E=>{const I=({chainId:S})=>{S===d&&(h.emitter.off("change",I),E())};h.emitter.on("change",I)}),p.request({method:"wallet_switchEthereumChain",params:[{chainId:Y(d)}]})]);const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,d]),g}catch(v){const E=v;if(/(user rejected)/i.test(E.message))throw new Oe(E);try{let I;f!=null&&f.blockExplorerUrls?I=f.blockExplorerUrls:I=(y=g.blockExplorers)!=null&&y.default.url?[(w=g.blockExplorers)==null?void 0:w.default.url]:[];let S;(x=f==null?void 0:f.rpcUrls)!=null&&x.length?S=f.rpcUrls:S=[...g.rpcUrls.default.http];const P={blockExplorerUrls:I,chainId:Y(d),chainName:(f==null?void 0:f.chainName)??g.name,iconUrls:f==null?void 0:f.iconUrls,nativeCurrency:(f==null?void 0:f.nativeCurrency)??g.nativeCurrency,rpcUrls:S};await p.request({method:"wallet_addEthereumChain",params:[P]});const C=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...C,d]),g}catch(I){throw new Oe(I)}}},onAccountsChanged(f){f.length===0?this.onDisconnect():h.emitter.emit("change",{accounts:f.map(d=>Et(d))})},onChainChanged(f){const d=Number(f);h.emitter.emit("change",{chainId:d})},async onConnect(f){const d=Number(f.chainId),p=await this.getAccounts();h.emitter.emit("connect",{accounts:p,chainId:d})},async onDisconnect(f){this.setRequestedChainsIds([]),h.emitter.emit("disconnect");const d=await this.getProvider();i&&(d.removeListener("accountsChanged",i),i=void 0),o&&(d.removeListener("chainChanged",o),o=void 0),l&&(d.removeListener("disconnect",l),l=void 0),u&&(d.removeListener("session_delete",u),u=void 0),a||(a=this.onConnect.bind(this),d.on("connect",a))},onDisplayUri(f){h.emitter.emit("message",{type:"display_uri",data:f})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var d,p,g;return n?((g=(p=(d=n.session)==null?void 0:d.namespaces[s])==null?void 0:p.accounts)==null?void 0:g.map(y=>Number.parseInt(y.split(":")[1]||"")))??[]:[]},async getRequestedChainsIds(){var f;return await((f=h.storage)==null?void 0:f.getItem(this.requestedChainsStorageKey))??[]},async isChainsStale(){if(!e)return!1;const f=h.chains.map(g=>g.id),d=this.getNamespaceChainsIds();if(d.length&&!d.some(g=>f.includes(g)))return!1;const p=await this.getRequestedChainsIds();return!f.every(g=>p.includes(g))},async setRequestedChainsIds(f){var d;await((d=h.storage)==null?void 0:d.setItem(this.requestedChainsStorageKey,f))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}function pi(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function N2(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=pi(n);return(s,i)=>r.then(o=>i(o.transaction(e,s).objectStore(e)))}let Ch;function Oc(){return Ch||(Ch=N2("keyval-store","keyval")),Ch}function cy(t,e=Oc()){return e("readonly",n=>pi(n.get(t)))}function eO(t,e,n=Oc()){return n("readwrite",r=>(r.put(e,t),pi(r.transaction)))}function tO(t,e=Oc()){return e("readwrite",n=>(n.delete(t),pi(n.transaction)))}function nO(t=Oc()){return t("readwrite",e=>(e.clear(),pi(e.transaction)))}function rO(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},pi(t.transaction)}function sO(t=Oc()){return t("readonly",e=>{if(e.getAllKeys)return pi(e.getAllKeys());const n=[];return rO(e,r=>n.push(r.key)).then(()=>n)})}const iO={},oO=Object.freeze(Object.defineProperty({__proto__:null,default:iO},Symbol.toStringTag,{value:"Module"})),TK=wp(oO);var Ed={exports:{}};typeof Object.create=="function"?Ed.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Ed.exports=function(e,n){if(n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e}};var DK=Ed.exports,aO={},Dl={};Dl.byteLength=lO;Dl.toByteArray=fO;Dl.fromByteArray=gO;var er=[],cn=[],cO=typeof Uint8Array<"u"?Uint8Array:Array,Th="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var $i=0,uO=Th.length;$i<uO;++$i)er[$i]=Th[$i],cn[Th.charCodeAt($i)]=$i;cn[45]=62;cn[95]=63;function R2(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function lO(t){var e=R2(t),n=e[0],r=e[1];return(n+r)*3/4-r}function hO(t,e,n){return(e+n)*3/4-n}function fO(t){var e,n=R2(t),r=n[0],s=n[1],i=new cO(hO(t,r,s)),o=0,a=s>0?r-4:r,c;for(c=0;c<a;c+=4)e=cn[t.charCodeAt(c)]<<18|cn[t.charCodeAt(c+1)]<<12|cn[t.charCodeAt(c+2)]<<6|cn[t.charCodeAt(c+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=cn[t.charCodeAt(c)]<<2|cn[t.charCodeAt(c+1)]>>4,i[o++]=e&255),s===1&&(e=cn[t.charCodeAt(c)]<<10|cn[t.charCodeAt(c+1)]<<4|cn[t.charCodeAt(c+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function dO(t){return er[t>>18&63]+er[t>>12&63]+er[t>>6&63]+er[t&63]}function pO(t,e,n){for(var r,s=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(dO(r));return s.join("")}function gO(t){for(var e,n=t.length,r=n%3,s=[],i=16383,o=0,a=n-r;o<a;o+=i)s.push(pO(t,o,o+i>a?a:o+i));return r===1?(e=t[n-1],s.push(er[e>>2]+er[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],s.push(er[e>>10]+er[e>>4&63]+er[e<<2&63]+"=")),s.join("")}var m0={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */m0.read=function(t,e,n,r,s){var i,o,a=s*8-r-1,c=(1<<a)-1,u=c>>1,l=-7,h=n?s-1:0,f=n?-1:1,d=t[e+h];for(h+=f,i=d&(1<<-l)-1,d>>=-l,l+=a;l>0;i=i*256+t[e+h],h+=f,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=r;l>0;o=o*256+t[e+h],h+=f,l-=8);if(i===0)i=1-u;else{if(i===c)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-u}return(d?-1:1)*o*Math.pow(2,i-r)};m0.write=function(t,e,n,r,s,i){var o,a,c,u=i*8-s-1,l=(1<<u)-1,h=l>>1,f=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,p=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?e+=f/c:e+=f*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=l?(a=0,o=l):o+h>=1?(a=(e*c-1)*Math.pow(2,s),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,s),o=0));s>=8;t[n+d]=a&255,d+=p,a/=256,s-=8);for(o=o<<s|a,u+=s;u>0;t[n+d]=o&255,d+=p,o/=256,u-=8);t[n+d-p]|=g*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Dl,n=m0,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=x,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const A=new Uint8Array(1),m={foo:function(){return 42}};return Object.setPrototypeOf(m,Uint8Array.prototype),Object.setPrototypeOf(A,m),A.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(A){if(A>s)throw new RangeError('The value "'+A+'" is invalid for option "size"');const m=new Uint8Array(A);return Object.setPrototypeOf(m,a.prototype),m}function a(A,m,b){if(typeof A=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(A)}return c(A,m,b)}a.poolSize=8192;function c(A,m,b){if(typeof A=="string")return f(A,m);if(ArrayBuffer.isView(A))return p(A);if(A==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A);if(jt(A,ArrayBuffer)||A&&jt(A.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(jt(A,SharedArrayBuffer)||A&&jt(A.buffer,SharedArrayBuffer)))return g(A,m,b);if(typeof A=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const T=A.valueOf&&A.valueOf();if(T!=null&&T!==A)return a.from(T,m,b);const M=y(A);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof A[Symbol.toPrimitive]=="function")return a.from(A[Symbol.toPrimitive]("string"),m,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof A)}a.from=function(A,m,b){return c(A,m,b)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(A){if(typeof A!="number")throw new TypeError('"size" argument must be of type number');if(A<0)throw new RangeError('The value "'+A+'" is invalid for option "size"')}function l(A,m,b){return u(A),A<=0?o(A):m!==void 0?typeof b=="string"?o(A).fill(m,b):o(A).fill(m):o(A)}a.alloc=function(A,m,b){return l(A,m,b)};function h(A){return u(A),o(A<0?0:w(A)|0)}a.allocUnsafe=function(A){return h(A)},a.allocUnsafeSlow=function(A){return h(A)};function f(A,m){if((typeof m!="string"||m==="")&&(m="utf8"),!a.isEncoding(m))throw new TypeError("Unknown encoding: "+m);const b=v(A,m)|0;let T=o(b);const M=T.write(A,m);return M!==b&&(T=T.slice(0,M)),T}function d(A){const m=A.length<0?0:w(A.length)|0,b=o(m);for(let T=0;T<m;T+=1)b[T]=A[T]&255;return b}function p(A){if(jt(A,Uint8Array)){const m=new Uint8Array(A);return g(m.buffer,m.byteOffset,m.byteLength)}return d(A)}function g(A,m,b){if(m<0||A.byteLength<m)throw new RangeError('"offset" is outside of buffer bounds');if(A.byteLength<m+(b||0))throw new RangeError('"length" is outside of buffer bounds');let T;return m===void 0&&b===void 0?T=new Uint8Array(A):b===void 0?T=new Uint8Array(A,m):T=new Uint8Array(A,m,b),Object.setPrototypeOf(T,a.prototype),T}function y(A){if(a.isBuffer(A)){const m=w(A.length)|0,b=o(m);return b.length===0||A.copy(b,0,0,m),b}if(A.length!==void 0)return typeof A.length!="number"||vi(A.length)?o(0):d(A);if(A.type==="Buffer"&&Array.isArray(A.data))return d(A.data)}function w(A){if(A>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return A|0}function x(A){return+A!=A&&(A=0),a.alloc(+A)}a.isBuffer=function(m){return m!=null&&m._isBuffer===!0&&m!==a.prototype},a.compare=function(m,b){if(jt(m,Uint8Array)&&(m=a.from(m,m.offset,m.byteLength)),jt(b,Uint8Array)&&(b=a.from(b,b.offset,b.byteLength)),!a.isBuffer(m)||!a.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(m===b)return 0;let T=m.length,M=b.length;for(let H=0,K=Math.min(T,M);H<K;++H)if(m[H]!==b[H]){T=m[H],M=b[H];break}return T<M?-1:M<T?1:0},a.isEncoding=function(m){switch(String(m).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(m,b){if(!Array.isArray(m))throw new TypeError('"list" argument must be an Array of Buffers');if(m.length===0)return a.alloc(0);let T;if(b===void 0)for(b=0,T=0;T<m.length;++T)b+=m[T].length;const M=a.allocUnsafe(b);let H=0;for(T=0;T<m.length;++T){let K=m[T];if(jt(K,Uint8Array))H+K.length>M.length?(a.isBuffer(K)||(K=a.from(K)),K.copy(M,H)):Uint8Array.prototype.set.call(M,K,H);else if(a.isBuffer(K))K.copy(M,H);else throw new TypeError('"list" argument must be an Array of Buffers');H+=K.length}return M};function v(A,m){if(a.isBuffer(A))return A.length;if(ArrayBuffer.isView(A)||jt(A,ArrayBuffer))return A.byteLength;if(typeof A!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof A);const b=A.length,T=arguments.length>2&&arguments[2]===!0;if(!T&&b===0)return 0;let M=!1;for(;;)switch(m){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return Qo(A).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b*2;case"hex":return b>>>1;case"base64":return Jo(A).length;default:if(M)return T?-1:Qo(A).length;m=(""+m).toLowerCase(),M=!0}}a.byteLength=v;function E(A,m,b){let T=!1;if((m===void 0||m<0)&&(m=0),m>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0,m>>>=0,b<=m))return"";for(A||(A="utf8");;)switch(A){case"hex":return N(this,m,b);case"utf8":case"utf-8":return R(this,m,b);case"ascii":return B(this,m,b);case"latin1":case"binary":return D(this,m,b);case"base64":return F(this,m,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,m,b);default:if(T)throw new TypeError("Unknown encoding: "+A);A=(A+"").toLowerCase(),T=!0}}a.prototype._isBuffer=!0;function I(A,m,b){const T=A[m];A[m]=A[b],A[b]=T}a.prototype.swap16=function(){const m=this.length;if(m%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<m;b+=2)I(this,b,b+1);return this},a.prototype.swap32=function(){const m=this.length;if(m%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<m;b+=4)I(this,b,b+3),I(this,b+1,b+2);return this},a.prototype.swap64=function(){const m=this.length;if(m%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<m;b+=8)I(this,b,b+7),I(this,b+1,b+6),I(this,b+2,b+5),I(this,b+3,b+4);return this},a.prototype.toString=function(){const m=this.length;return m===0?"":arguments.length===0?R(this,0,m):E.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(m){if(!a.isBuffer(m))throw new TypeError("Argument must be a Buffer");return this===m?!0:a.compare(this,m)===0},a.prototype.inspect=function(){let m="";const b=t.INSPECT_MAX_BYTES;return m=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(m+=" ... "),"<Buffer "+m+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(m,b,T,M,H){if(jt(m,Uint8Array)&&(m=a.from(m,m.offset,m.byteLength)),!a.isBuffer(m))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof m);if(b===void 0&&(b=0),T===void 0&&(T=m?m.length:0),M===void 0&&(M=0),H===void 0&&(H=this.length),b<0||T>m.length||M<0||H>this.length)throw new RangeError("out of range index");if(M>=H&&b>=T)return 0;if(M>=H)return-1;if(b>=T)return 1;if(b>>>=0,T>>>=0,M>>>=0,H>>>=0,this===m)return 0;let K=H-M,ue=T-b;const Be=Math.min(K,ue),Te=this.slice(M,H),Ne=m.slice(b,T);for(let Ie=0;Ie<Be;++Ie)if(Te[Ie]!==Ne[Ie]){K=Te[Ie],ue=Ne[Ie];break}return K<ue?-1:ue<K?1:0};function S(A,m,b,T,M){if(A.length===0)return-1;if(typeof b=="string"?(T=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,vi(b)&&(b=M?0:A.length-1),b<0&&(b=A.length+b),b>=A.length){if(M)return-1;b=A.length-1}else if(b<0)if(M)b=0;else return-1;if(typeof m=="string"&&(m=a.from(m,T)),a.isBuffer(m))return m.length===0?-1:P(A,m,b,T,M);if(typeof m=="number")return m=m&255,typeof Uint8Array.prototype.indexOf=="function"?M?Uint8Array.prototype.indexOf.call(A,m,b):Uint8Array.prototype.lastIndexOf.call(A,m,b):P(A,[m],b,T,M);throw new TypeError("val must be string, number or Buffer")}function P(A,m,b,T,M){let H=1,K=A.length,ue=m.length;if(T!==void 0&&(T=String(T).toLowerCase(),T==="ucs2"||T==="ucs-2"||T==="utf16le"||T==="utf-16le")){if(A.length<2||m.length<2)return-1;H=2,K/=2,ue/=2,b/=2}function Be(Ne,Ie){return H===1?Ne[Ie]:Ne.readUInt16BE(Ie*H)}let Te;if(M){let Ne=-1;for(Te=b;Te<K;Te++)if(Be(A,Te)===Be(m,Ne===-1?0:Te-Ne)){if(Ne===-1&&(Ne=Te),Te-Ne+1===ue)return Ne*H}else Ne!==-1&&(Te-=Te-Ne),Ne=-1}else for(b+ue>K&&(b=K-ue),Te=b;Te>=0;Te--){let Ne=!0;for(let Ie=0;Ie<ue;Ie++)if(Be(A,Te+Ie)!==Be(m,Ie)){Ne=!1;break}if(Ne)return Te}return-1}a.prototype.includes=function(m,b,T){return this.indexOf(m,b,T)!==-1},a.prototype.indexOf=function(m,b,T){return S(this,m,b,T,!0)},a.prototype.lastIndexOf=function(m,b,T){return S(this,m,b,T,!1)};function C(A,m,b,T){b=Number(b)||0;const M=A.length-b;T?(T=Number(T),T>M&&(T=M)):T=M;const H=m.length;T>H/2&&(T=H/2);let K;for(K=0;K<T;++K){const ue=parseInt(m.substr(K*2,2),16);if(vi(ue))return K;A[b+K]=ue}return K}function O(A,m,b,T){return Mr(Qo(m,A.length-b),A,b,T)}function j(A,m,b,T){return Mr(rh(m),A,b,T)}function k(A,m,b,T){return Mr(Jo(m),A,b,T)}function L(A,m,b,T){return Mr(Vc(m,A.length-b),A,b,T)}a.prototype.write=function(m,b,T,M){if(b===void 0)M="utf8",T=this.length,b=0;else if(T===void 0&&typeof b=="string")M=b,T=this.length,b=0;else if(isFinite(b))b=b>>>0,isFinite(T)?(T=T>>>0,M===void 0&&(M="utf8")):(M=T,T=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const H=this.length-b;if((T===void 0||T>H)&&(T=H),m.length>0&&(T<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");M||(M="utf8");let K=!1;for(;;)switch(M){case"hex":return C(this,m,b,T);case"utf8":case"utf-8":return O(this,m,b,T);case"ascii":case"latin1":case"binary":return j(this,m,b,T);case"base64":return k(this,m,b,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,m,b,T);default:if(K)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),K=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F(A,m,b){return m===0&&b===A.length?e.fromByteArray(A):e.fromByteArray(A.slice(m,b))}function R(A,m,b){b=Math.min(A.length,b);const T=[];let M=m;for(;M<b;){const H=A[M];let K=null,ue=H>239?4:H>223?3:H>191?2:1;if(M+ue<=b){let Be,Te,Ne,Ie;switch(ue){case 1:H<128&&(K=H);break;case 2:Be=A[M+1],(Be&192)===128&&(Ie=(H&31)<<6|Be&63,Ie>127&&(K=Ie));break;case 3:Be=A[M+1],Te=A[M+2],(Be&192)===128&&(Te&192)===128&&(Ie=(H&15)<<12|(Be&63)<<6|Te&63,Ie>2047&&(Ie<55296||Ie>57343)&&(K=Ie));break;case 4:Be=A[M+1],Te=A[M+2],Ne=A[M+3],(Be&192)===128&&(Te&192)===128&&(Ne&192)===128&&(Ie=(H&15)<<18|(Be&63)<<12|(Te&63)<<6|Ne&63,Ie>65535&&Ie<1114112&&(K=Ie))}}K===null?(K=65533,ue=1):K>65535&&(K-=65536,T.push(K>>>10&1023|55296),K=56320|K&1023),T.push(K),M+=ue}return _(T)}const $=4096;function _(A){const m=A.length;if(m<=$)return String.fromCharCode.apply(String,A);let b="",T=0;for(;T<m;)b+=String.fromCharCode.apply(String,A.slice(T,T+=$));return b}function B(A,m,b){let T="";b=Math.min(A.length,b);for(let M=m;M<b;++M)T+=String.fromCharCode(A[M]&127);return T}function D(A,m,b){let T="";b=Math.min(A.length,b);for(let M=m;M<b;++M)T+=String.fromCharCode(A[M]);return T}function N(A,m,b){const T=A.length;(!m||m<0)&&(m=0),(!b||b<0||b>T)&&(b=T);let M="";for(let H=m;H<b;++H)M+=Kc[A[H]];return M}function U(A,m,b){const T=A.slice(m,b);let M="";for(let H=0;H<T.length-1;H+=2)M+=String.fromCharCode(T[H]+T[H+1]*256);return M}a.prototype.slice=function(m,b){const T=this.length;m=~~m,b=b===void 0?T:~~b,m<0?(m+=T,m<0&&(m=0)):m>T&&(m=T),b<0?(b+=T,b<0&&(b=0)):b>T&&(b=T),b<m&&(b=m);const M=this.subarray(m,b);return Object.setPrototypeOf(M,a.prototype),M};function z(A,m,b){if(A%1!==0||A<0)throw new RangeError("offset is not uint");if(A+m>b)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(m,b,T){m=m>>>0,b=b>>>0,T||z(m,b,this.length);let M=this[m],H=1,K=0;for(;++K<b&&(H*=256);)M+=this[m+K]*H;return M},a.prototype.readUintBE=a.prototype.readUIntBE=function(m,b,T){m=m>>>0,b=b>>>0,T||z(m,b,this.length);let M=this[m+--b],H=1;for(;b>0&&(H*=256);)M+=this[m+--b]*H;return M},a.prototype.readUint8=a.prototype.readUInt8=function(m,b){return m=m>>>0,b||z(m,1,this.length),this[m]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(m,b){return m=m>>>0,b||z(m,2,this.length),this[m]|this[m+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(m,b){return m=m>>>0,b||z(m,2,this.length),this[m]<<8|this[m+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(m,b){return m=m>>>0,b||z(m,4,this.length),(this[m]|this[m+1]<<8|this[m+2]<<16)+this[m+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(m,b){return m=m>>>0,b||z(m,4,this.length),this[m]*16777216+(this[m+1]<<16|this[m+2]<<8|this[m+3])},a.prototype.readBigUInt64LE=bn(function(m){m=m>>>0,de(m,"offset");const b=this[m],T=this[m+7];(b===void 0||T===void 0)&&we(m,this.length-8);const M=b+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24,H=this[++m]+this[++m]*2**8+this[++m]*2**16+T*2**24;return BigInt(M)+(BigInt(H)<<BigInt(32))}),a.prototype.readBigUInt64BE=bn(function(m){m=m>>>0,de(m,"offset");const b=this[m],T=this[m+7];(b===void 0||T===void 0)&&we(m,this.length-8);const M=b*2**24+this[++m]*2**16+this[++m]*2**8+this[++m],H=this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+T;return(BigInt(M)<<BigInt(32))+BigInt(H)}),a.prototype.readIntLE=function(m,b,T){m=m>>>0,b=b>>>0,T||z(m,b,this.length);let M=this[m],H=1,K=0;for(;++K<b&&(H*=256);)M+=this[m+K]*H;return H*=128,M>=H&&(M-=Math.pow(2,8*b)),M},a.prototype.readIntBE=function(m,b,T){m=m>>>0,b=b>>>0,T||z(m,b,this.length);let M=b,H=1,K=this[m+--M];for(;M>0&&(H*=256);)K+=this[m+--M]*H;return H*=128,K>=H&&(K-=Math.pow(2,8*b)),K},a.prototype.readInt8=function(m,b){return m=m>>>0,b||z(m,1,this.length),this[m]&128?(255-this[m]+1)*-1:this[m]},a.prototype.readInt16LE=function(m,b){m=m>>>0,b||z(m,2,this.length);const T=this[m]|this[m+1]<<8;return T&32768?T|4294901760:T},a.prototype.readInt16BE=function(m,b){m=m>>>0,b||z(m,2,this.length);const T=this[m+1]|this[m]<<8;return T&32768?T|4294901760:T},a.prototype.readInt32LE=function(m,b){return m=m>>>0,b||z(m,4,this.length),this[m]|this[m+1]<<8|this[m+2]<<16|this[m+3]<<24},a.prototype.readInt32BE=function(m,b){return m=m>>>0,b||z(m,4,this.length),this[m]<<24|this[m+1]<<16|this[m+2]<<8|this[m+3]},a.prototype.readBigInt64LE=bn(function(m){m=m>>>0,de(m,"offset");const b=this[m],T=this[m+7];(b===void 0||T===void 0)&&we(m,this.length-8);const M=this[m+4]+this[m+5]*2**8+this[m+6]*2**16+(T<<24);return(BigInt(M)<<BigInt(32))+BigInt(b+this[++m]*2**8+this[++m]*2**16+this[++m]*2**24)}),a.prototype.readBigInt64BE=bn(function(m){m=m>>>0,de(m,"offset");const b=this[m],T=this[m+7];(b===void 0||T===void 0)&&we(m,this.length-8);const M=(b<<24)+this[++m]*2**16+this[++m]*2**8+this[++m];return(BigInt(M)<<BigInt(32))+BigInt(this[++m]*2**24+this[++m]*2**16+this[++m]*2**8+T)}),a.prototype.readFloatLE=function(m,b){return m=m>>>0,b||z(m,4,this.length),n.read(this,m,!0,23,4)},a.prototype.readFloatBE=function(m,b){return m=m>>>0,b||z(m,4,this.length),n.read(this,m,!1,23,4)},a.prototype.readDoubleLE=function(m,b){return m=m>>>0,b||z(m,8,this.length),n.read(this,m,!0,52,8)},a.prototype.readDoubleBE=function(m,b){return m=m>>>0,b||z(m,8,this.length),n.read(this,m,!1,52,8)};function V(A,m,b,T,M,H){if(!a.isBuffer(A))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>M||m<H)throw new RangeError('"value" argument is out of bounds');if(b+T>A.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(m,b,T,M){if(m=+m,b=b>>>0,T=T>>>0,!M){const ue=Math.pow(2,8*T)-1;V(this,m,b,T,ue,0)}let H=1,K=0;for(this[b]=m&255;++K<T&&(H*=256);)this[b+K]=m/H&255;return b+T},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(m,b,T,M){if(m=+m,b=b>>>0,T=T>>>0,!M){const ue=Math.pow(2,8*T)-1;V(this,m,b,T,ue,0)}let H=T-1,K=1;for(this[b+H]=m&255;--H>=0&&(K*=256);)this[b+H]=m/K&255;return b+T},a.prototype.writeUint8=a.prototype.writeUInt8=function(m,b,T){return m=+m,b=b>>>0,T||V(this,m,b,1,255,0),this[b]=m&255,b+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(m,b,T){return m=+m,b=b>>>0,T||V(this,m,b,2,65535,0),this[b]=m&255,this[b+1]=m>>>8,b+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(m,b,T){return m=+m,b=b>>>0,T||V(this,m,b,2,65535,0),this[b]=m>>>8,this[b+1]=m&255,b+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(m,b,T){return m=+m,b=b>>>0,T||V(this,m,b,4,4294967295,0),this[b+3]=m>>>24,this[b+2]=m>>>16,this[b+1]=m>>>8,this[b]=m&255,b+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(m,b,T){return m=+m,b=b>>>0,T||V(this,m,b,4,4294967295,0),this[b]=m>>>24,this[b+1]=m>>>16,this[b+2]=m>>>8,this[b+3]=m&255,b+4};function Q(A,m,b,T,M){pe(m,T,M,A,b,7);let H=Number(m&BigInt(4294967295));A[b++]=H,H=H>>8,A[b++]=H,H=H>>8,A[b++]=H,H=H>>8,A[b++]=H;let K=Number(m>>BigInt(32)&BigInt(4294967295));return A[b++]=K,K=K>>8,A[b++]=K,K=K>>8,A[b++]=K,K=K>>8,A[b++]=K,b}function W(A,m,b,T,M){pe(m,T,M,A,b,7);let H=Number(m&BigInt(4294967295));A[b+7]=H,H=H>>8,A[b+6]=H,H=H>>8,A[b+5]=H,H=H>>8,A[b+4]=H;let K=Number(m>>BigInt(32)&BigInt(4294967295));return A[b+3]=K,K=K>>8,A[b+2]=K,K=K>>8,A[b+1]=K,K=K>>8,A[b]=K,b+8}a.prototype.writeBigUInt64LE=bn(function(m,b=0){return Q(this,m,b,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=bn(function(m,b=0){return W(this,m,b,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(m,b,T,M){if(m=+m,b=b>>>0,!M){const Be=Math.pow(2,8*T-1);V(this,m,b,T,Be-1,-Be)}let H=0,K=1,ue=0;for(this[b]=m&255;++H<T&&(K*=256);)m<0&&ue===0&&this[b+H-1]!==0&&(ue=1),this[b+H]=(m/K>>0)-ue&255;return b+T},a.prototype.writeIntBE=function(m,b,T,M){if(m=+m,b=b>>>0,!M){const Be=Math.pow(2,8*T-1);V(this,m,b,T,Be-1,-Be)}let H=T-1,K=1,ue=0;for(this[b+H]=m&255;--H>=0&&(K*=256);)m<0&&ue===0&&this[b+H+1]!==0&&(ue=1),this[b+H]=(m/K>>0)-ue&255;return b+T},a.prototype.writeInt8=function(m,b,T){return m=+m,b=b>>>0,T||V(this,m,b,1,127,-128),m<0&&(m=255+m+1),this[b]=m&255,b+1},a.prototype.writeInt16LE=function(m,b,T){return m=+m,b=b>>>0,T||V(this,m,b,2,32767,-32768),this[b]=m&255,this[b+1]=m>>>8,b+2},a.prototype.writeInt16BE=function(m,b,T){return m=+m,b=b>>>0,T||V(this,m,b,2,32767,-32768),this[b]=m>>>8,this[b+1]=m&255,b+2},a.prototype.writeInt32LE=function(m,b,T){return m=+m,b=b>>>0,T||V(this,m,b,4,2147483647,-2147483648),this[b]=m&255,this[b+1]=m>>>8,this[b+2]=m>>>16,this[b+3]=m>>>24,b+4},a.prototype.writeInt32BE=function(m,b,T){return m=+m,b=b>>>0,T||V(this,m,b,4,2147483647,-2147483648),m<0&&(m=4294967295+m+1),this[b]=m>>>24,this[b+1]=m>>>16,this[b+2]=m>>>8,this[b+3]=m&255,b+4},a.prototype.writeBigInt64LE=bn(function(m,b=0){return Q(this,m,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=bn(function(m,b=0){return W(this,m,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ee(A,m,b,T,M,H){if(b+T>A.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function te(A,m,b,T,M){return m=+m,b=b>>>0,M||ee(A,m,b,4),n.write(A,m,b,T,23,4),b+4}a.prototype.writeFloatLE=function(m,b,T){return te(this,m,b,!0,T)},a.prototype.writeFloatBE=function(m,b,T){return te(this,m,b,!1,T)};function oe(A,m,b,T,M){return m=+m,b=b>>>0,M||ee(A,m,b,8),n.write(A,m,b,T,52,8),b+8}a.prototype.writeDoubleLE=function(m,b,T){return oe(this,m,b,!0,T)},a.prototype.writeDoubleBE=function(m,b,T){return oe(this,m,b,!1,T)},a.prototype.copy=function(m,b,T,M){if(!a.isBuffer(m))throw new TypeError("argument should be a Buffer");if(T||(T=0),!M&&M!==0&&(M=this.length),b>=m.length&&(b=m.length),b||(b=0),M>0&&M<T&&(M=T),M===T||m.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(T<0||T>=this.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("sourceEnd out of bounds");M>this.length&&(M=this.length),m.length-b<M-T&&(M=m.length-b+T);const H=M-T;return this===m&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(b,T,M):Uint8Array.prototype.set.call(m,this.subarray(T,M),b),H},a.prototype.fill=function(m,b,T,M){if(typeof m=="string"){if(typeof b=="string"?(M=b,b=0,T=this.length):typeof T=="string"&&(M=T,T=this.length),M!==void 0&&typeof M!="string")throw new TypeError("encoding must be a string");if(typeof M=="string"&&!a.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(m.length===1){const K=m.charCodeAt(0);(M==="utf8"&&K<128||M==="latin1")&&(m=K)}}else typeof m=="number"?m=m&255:typeof m=="boolean"&&(m=Number(m));if(b<0||this.length<b||this.length<T)throw new RangeError("Out of range index");if(T<=b)return this;b=b>>>0,T=T===void 0?this.length:T>>>0,m||(m=0);let H;if(typeof m=="number")for(H=b;H<T;++H)this[H]=m;else{const K=a.isBuffer(m)?m:a.from(m,M),ue=K.length;if(ue===0)throw new TypeError('The value "'+m+'" is invalid for argument "value"');for(H=0;H<T-b;++H)this[H+b]=K[H%ue]}return this};const ie={};function re(A,m,b){ie[A]=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:m.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${A}]`,this.stack,delete this.name}get code(){return A}set code(M){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:M,writable:!0})}toString(){return`${this.name} [${A}]: ${this.message}`}}}re("ERR_BUFFER_OUT_OF_BOUNDS",function(A){return A?`${A} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),re("ERR_INVALID_ARG_TYPE",function(A,m){return`The "${A}" argument must be of type number. Received type ${typeof m}`},TypeError),re("ERR_OUT_OF_RANGE",function(A,m,b){let T=`The value of "${A}" is out of range.`,M=b;return Number.isInteger(b)&&Math.abs(b)>2**32?M=be(String(b)):typeof b=="bigint"&&(M=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&(M=be(M)),M+="n"),T+=` It must be ${m}. Received ${M}`,T},RangeError);function be(A){let m="",b=A.length;const T=A[0]==="-"?1:0;for(;b>=T+4;b-=3)m=`_${A.slice(b-3,b)}${m}`;return`${A.slice(0,b)}${m}`}function Ee(A,m,b){de(m,"offset"),(A[m]===void 0||A[m+b]===void 0)&&we(m,A.length-(b+1))}function pe(A,m,b,T,M,H){if(A>b||A<m){const K=typeof m=="bigint"?"n":"";let ue;throw m===0||m===BigInt(0)?ue=`>= 0${K} and < 2${K} ** ${(H+1)*8}${K}`:ue=`>= -(2${K} ** ${(H+1)*8-1}${K}) and < 2 ** ${(H+1)*8-1}${K}`,new ie.ERR_OUT_OF_RANGE("value",ue,A)}Ee(T,M,H)}function de(A,m){if(typeof A!="number")throw new ie.ERR_INVALID_ARG_TYPE(m,"number",A)}function we(A,m,b){throw Math.floor(A)!==A?(de(A,b),new ie.ERR_OUT_OF_RANGE("offset","an integer",A)):m<0?new ie.ERR_BUFFER_OUT_OF_BOUNDS:new ie.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${m}`,A)}const ke=/[^+/0-9A-Za-z-_]/g;function Ln(A){if(A=A.split("=")[0],A=A.trim().replace(ke,""),A.length<2)return"";for(;A.length%4!==0;)A=A+"=";return A}function Qo(A,m){m=m||1/0;let b;const T=A.length;let M=null;const H=[];for(let K=0;K<T;++K){if(b=A.charCodeAt(K),b>55295&&b<57344){if(!M){if(b>56319){(m-=3)>-1&&H.push(239,191,189);continue}else if(K+1===T){(m-=3)>-1&&H.push(239,191,189);continue}M=b;continue}if(b<56320){(m-=3)>-1&&H.push(239,191,189),M=b;continue}b=(M-55296<<10|b-56320)+65536}else M&&(m-=3)>-1&&H.push(239,191,189);if(M=null,b<128){if((m-=1)<0)break;H.push(b)}else if(b<2048){if((m-=2)<0)break;H.push(b>>6|192,b&63|128)}else if(b<65536){if((m-=3)<0)break;H.push(b>>12|224,b>>6&63|128,b&63|128)}else if(b<1114112){if((m-=4)<0)break;H.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw new Error("Invalid code point")}return H}function rh(A){const m=[];for(let b=0;b<A.length;++b)m.push(A.charCodeAt(b)&255);return m}function Vc(A,m){let b,T,M;const H=[];for(let K=0;K<A.length&&!((m-=2)<0);++K)b=A.charCodeAt(K),T=b>>8,M=b%256,H.push(M),H.push(T);return H}function Jo(A){return e.toByteArray(Ln(A))}function Mr(A,m,b,T){let M;for(M=0;M<T&&!(M+b>=m.length||M>=A.length);++M)m[M+b]=A[M];return M}function jt(A,m){return A instanceof m||A!=null&&A.constructor!=null&&A.constructor.name!=null&&A.constructor.name===m.name}function vi(A){return A!==A}const Kc=function(){const A="0123456789abcdef",m=new Array(256);for(let b=0;b<16;++b){const T=b*16;for(let M=0;M<16;++M)m[T+M]=A[b]+A[M]}return m}();function bn(A){return typeof BigInt>"u"?Gc:A}function Gc(){throw new Error("BigInt not supported")}})(aO);var b0={exports:{}},ro=typeof Reflect=="object"?Reflect:null,uy=ro&&typeof ro.apply=="function"?ro.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Su;ro&&typeof ro.ownKeys=="function"?Su=ro.ownKeys:Object.getOwnPropertySymbols?Su=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Su=function(e){return Object.getOwnPropertyNames(e)};function yO(t){console&&console.warn&&console.warn(t)}var k2=Number.isNaN||function(e){return e!==e};function $e(){$e.init.call(this)}b0.exports=$e;b0.exports.once=vO;$e.EventEmitter=$e;$e.prototype._events=void 0;$e.prototype._eventsCount=0;$e.prototype._maxListeners=void 0;var ly=10;function Bl(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty($e,"defaultMaxListeners",{enumerable:!0,get:function(){return ly},set:function(t){if(typeof t!="number"||t<0||k2(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");ly=t}});$e.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};$e.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||k2(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function U2(t){return t._maxListeners===void 0?$e.defaultMaxListeners:t._maxListeners}$e.prototype.getMaxListeners=function(){return U2(this)};$e.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")uy(c,this,n);else for(var u=c.length,l=z2(c,u),r=0;r<u;++r)uy(l[r],this,n);return!0};function M2(t,e,n,r){var s,i,o;if(Bl(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=U2(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,yO(a)}return t}$e.prototype.addListener=function(e,n){return M2(this,e,n,!1)};$e.prototype.on=$e.prototype.addListener;$e.prototype.prependListener=function(e,n){return M2(this,e,n,!0)};function mO(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function L2(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=mO.bind(r);return s.listener=n,r.wrapFn=s,s}$e.prototype.once=function(e,n){return Bl(n),this.on(e,L2(this,e,n)),this};$e.prototype.prependOnceListener=function(e,n){return Bl(n),this.prependListener(e,L2(this,e,n)),this};$e.prototype.removeListener=function(e,n){var r,s,i,o,a;if(Bl(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():bO(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};$e.prototype.off=$e.prototype.removeListener;$e.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function j2(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?wO(s):z2(s,s.length)}$e.prototype.listeners=function(e){return j2(this,e,!0)};$e.prototype.rawListeners=function(e){return j2(this,e,!1)};$e.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):F2.call(t,e)};$e.prototype.listenerCount=F2;function F2(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}$e.prototype.eventNames=function(){return this._eventsCount>0?Su(this._events):[]};function z2(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function bO(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function wO(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function vO(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}q2(t,e,i,{once:!0}),e!=="error"&&EO(t,s,{once:!0})})}function EO(t,e,n){typeof t.on=="function"&&q2(t,"error",e,n)}function q2(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var en=b0.exports;const w0=il(en);var hy=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},xO=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),$O=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),IO=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),_O=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),SO=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),PO=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,AO=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,fy=3,OO=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",PO]],dy=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function CO(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new SO:typeof navigator<"u"?DO(navigator.userAgent):NO()}function TO(t){return t!==""&&OO.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function DO(t){var e=TO(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new _O;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<fy&&(s=hy(hy([],s,!0),RO(fy-s.length),!0)):s=[];var i=s.join("."),o=BO(t),a=AO.exec(t);return a&&a[1]?new IO(n,i,o,a[1]):new xO(n,i,o)}function BO(t){for(var e=0,n=dy.length;e<n;e++){var r=dy[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function NO(){var t=typeof process<"u"&&process.version;return t?new $O(process.version.slice(1)):null}function RO(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var J={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xd=function(t,e){return xd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},xd(t,e)};function kO(t,e){xd(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var $d=function(){return $d=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$d.apply(this,arguments)};function UO(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function MO(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function LO(t,e){return function(n,r){e(n,r,t)}}function jO(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function FO(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(h){o(h)}}function c(l){try{u(r.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function zO(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(l){u=[6,l],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function qO(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function HO(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Id(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function H2(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function VO(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(H2(arguments[e]));return t}function KO(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function Xa(t){return this instanceof Xa?(this.v=t,this):new Xa(t)}function GO(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){r[f]&&(s[f]=function(d){return new Promise(function(p,g){i.push([f,d,p,g])>1||a(f,d)})})}function a(f,d){try{c(r[f](d))}catch(p){h(i[0][3],p)}}function c(f){f.value instanceof Xa?Promise.resolve(f.value.v).then(u,l):h(i[0][2],f)}function u(f){a("next",f)}function l(f){a("throw",f)}function h(f,d){f(d),i.shift(),i.length&&a(i[0][0],i[0][1])}}function WO(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:Xa(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function ZO(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Id=="function"?Id(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function YO(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function QO(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function JO(t){return t&&t.__esModule?t:{default:t}}function XO(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function eC(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const tC=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return $d},__asyncDelegator:WO,__asyncGenerator:GO,__asyncValues:ZO,__await:Xa,__awaiter:FO,__classPrivateFieldGet:XO,__classPrivateFieldSet:eC,__createBinding:qO,__decorate:MO,__exportStar:HO,__extends:kO,__generator:zO,__importDefault:JO,__importStar:QO,__makeTemplateObject:YO,__metadata:jO,__param:LO,__read:H2,__rest:UO,__spread:VO,__spreadArrays:KO,__values:Id},Symbol.toStringTag,{value:"Module"})),Nl=wp(tC);var Dh={},sa={},py;function nC(){if(py)return sa;py=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return sa.delay=t,sa}var gs={},Bh={},ys={},gy;function rC(){return gy||(gy=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.ONE_THOUSAND=ys.ONE_HUNDRED=void 0,ys.ONE_HUNDRED=100,ys.ONE_THOUSAND=1e3),ys}var Nh={},yy;function sC(){return yy||(yy=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Nh)),Nh}var my;function V2(){return my||(my=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Nl;e.__exportStar(rC(),t),e.__exportStar(sC(),t)}(Bh)),Bh}var by;function iC(){if(by)return gs;by=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.fromMiliseconds=gs.toMiliseconds=void 0;const t=V2();function e(r){return r*t.ONE_THOUSAND}gs.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return gs.fromMiliseconds=n,gs}var wy;function oC(){return wy||(wy=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Nl;e.__exportStar(nC(),t),e.__exportStar(iC(),t)}(Dh)),Dh}var Ii={},vy;function aC(){if(vy)return Ii;vy=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Ii.Watch=t,Ii.default=t,Ii}var Rh={},ia={},Ey;function cC(){if(Ey)return ia;Ey=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.IWatch=void 0;class t{}return ia.IWatch=t,ia}var xy;function uC(){return xy||(xy=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Nl.__exportStar(cC(),t)}(Rh)),Rh}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Nl;e.__exportStar(oC(),t),e.__exportStar(aC(),t),e.__exportStar(uC(),t),e.__exportStar(V2(),t)})(J);var Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.getLocalStorage=Ae.getLocalStorageOrThrow=Ae.getCrypto=Ae.getCryptoOrThrow=K2=Ae.getLocation=Ae.getLocationOrThrow=v0=Ae.getNavigator=Ae.getNavigatorOrThrow=ti=Ae.getDocument=Ae.getDocumentOrThrow=Ae.getFromWindowOrThrow=Ae.getFromWindow=void 0;function gi(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Ae.getFromWindow=gi;function qo(t){const e=gi(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Ae.getFromWindowOrThrow=qo;function lC(){return qo("document")}Ae.getDocumentOrThrow=lC;function hC(){return gi("document")}var ti=Ae.getDocument=hC;function fC(){return qo("navigator")}Ae.getNavigatorOrThrow=fC;function dC(){return gi("navigator")}var v0=Ae.getNavigator=dC;function pC(){return qo("location")}Ae.getLocationOrThrow=pC;function gC(){return gi("location")}var K2=Ae.getLocation=gC;function yC(){return qo("crypto")}Ae.getCryptoOrThrow=yC;function mC(){return gi("crypto")}Ae.getCrypto=mC;function bC(){return qo("localStorage")}Ae.getLocalStorageOrThrow=bC;function wC(){return gi("localStorage")}Ae.getLocalStorage=wC;var E0={};Object.defineProperty(E0,"__esModule",{value:!0});var G2=E0.getWindowMetadata=void 0;const $y=Ae;function vC(){let t,e;try{t=$y.getDocumentOrThrow(),e=$y.getLocationOrThrow()}catch{return null}function n(){const h=t.getElementsByTagName("link"),f=[];for(let d=0;d<h.length;d++){const p=h[d],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const y=p.getAttribute("href");if(y)if(y.toLowerCase().indexOf("https:")===-1&&y.toLowerCase().indexOf("http:")===-1&&y.indexOf("//")!==0){let w=e.protocol+"//"+e.host;if(y.indexOf("/")===0)w+=y;else{const x=e.pathname.split("/");x.pop();const v=x.join("/");w+=v+"/"+y}f.push(w)}else if(y.indexOf("//")===0){const w=e.protocol+y;f.push(w)}else f.push(y)}}return f}function r(...h){const f=t.getElementsByTagName("meta");for(let d=0;d<f.length;d++){const p=f[d],g=["itemprop","property","name"].map(y=>p.getAttribute(y)).filter(y=>y?h.includes(y):!1);if(g.length&&g){const y=p.getAttribute("content");if(y)return y}}return""}function s(){let h=r("name","og:site_name","og:title","twitter:title");return h||(h=t.title),h}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,u=n();return{description:a,url:c,icons:u,name:o}}G2=E0.getWindowMetadata=vC;function ec(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Iy(t){return ec(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const W2="2.23.2";let oa={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${W2}`};class ni extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof ni?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof ni&&n.cause.docsPath||n.docsPath,i=(a=oa.getDocsUrl)==null?void 0:a.call(oa,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...oa.version?[`Version: ${oa.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=W2}walk(e){return Z2(this,e)}}function Z2(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?Z2(t.cause,e):e?null:t}class Y2 extends ni{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Ho(t,{dir:e,size:n=32}={}){return typeof t=="string"?EC(t,{dir:e,size:n}):xC(t,{dir:e,size:n})}function EC(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new Y2({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function xC(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new Y2({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class $C extends ni{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class IC extends ni{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Vo(t,{size:e}){if(Iy(t)>e)throw new IC({givenSize:Iy(t),maxSize:e})}function _d(t,e={}){const{signed:n}=e;e.size&&Vo(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function _C(t,e={}){return Number(_d(t,e))}const SC=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Sd(t,e={}){return typeof t=="number"||typeof t=="bigint"?J2(t,e):typeof t=="string"?OC(t,e):typeof t=="boolean"?PC(t,e):Q2(t,e)}function PC(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Vo(n,{size:e.size}),Ho(n,{size:e.size})):n}function Q2(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=SC[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Vo(r,{size:e.size}),Ho(r,{dir:"right",size:e.size})):r}function J2(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new $C({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Ho(a,{size:r}):a}const AC=new TextEncoder;function OC(t,e={}){const n=AC.encode(t);return Q2(n,e)}const CC=new TextEncoder;function TC(t,e={}){return typeof t=="number"||typeof t=="bigint"?BC(t,e):typeof t=="boolean"?DC(t,e):ec(t)?X2(t,e):e6(t,e)}function DC(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Vo(n,{size:e.size}),Ho(n,{size:e.size})):n}const ur={zero:48,nine:57,A:65,F:70,a:97,f:102};function _y(t){if(t>=ur.zero&&t<=ur.nine)return t-ur.zero;if(t>=ur.A&&t<=ur.F)return t-(ur.A-10);if(t>=ur.a&&t<=ur.f)return t-(ur.a-10)}function X2(t,e={}){let n=t;e.size&&(Vo(n,{size:e.size}),n=Ho(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=_y(r.charCodeAt(a++)),u=_y(r.charCodeAt(a++));if(c===void 0||u===void 0)throw new ni(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+u}return i}function BC(t,e){const n=J2(t,e);return X2(n)}function e6(t,e={}){const n=CC.encode(t);return typeof e.size=="number"?(Vo(n,{size:e.size}),Ho(n,{dir:"right",size:e.size})):n}function Hu(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function NC(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Cc(t,...e){if(!NC(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function RC(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Hu(t.outputLen),Hu(t.blockLen)}function Io(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function t6(t,e){Cc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const su=BigInt(2**32-1),Sy=BigInt(32);function kC(t,e=!1){return e?{h:Number(t&su),l:Number(t>>Sy&su)}:{h:Number(t>>Sy&su)|0,l:Number(t&su)|0}}function UC(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=kC(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const MC=(t,e,n)=>t<<n|e>>>32-n,LC=(t,e,n)=>e<<n|t>>>32-n,jC=(t,e,n)=>e<<n-32|t>>>64-n,FC=(t,e,n)=>t<<n-32|e>>>64-n,_i=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function zC(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function kh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function zn(t,e){return t<<32-e|t>>>e}const Py=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function qC(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Ay(t){for(let e=0;e<t.length;e++)t[e]=qC(t[e])}function HC(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Rl(t){return typeof t=="string"&&(t=HC(t)),Cc(t),t}function VC(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Cc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class x0{clone(){return this._cloneInto()}}function n6(t){const e=r=>t().update(Rl(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function KC(t=32){if(_i&&typeof _i.getRandomValues=="function")return _i.getRandomValues(new Uint8Array(t));if(_i&&typeof _i.randomBytes=="function")return _i.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const r6=[],s6=[],i6=[],GC=BigInt(0),aa=BigInt(1),WC=BigInt(2),ZC=BigInt(7),YC=BigInt(256),QC=BigInt(113);for(let t=0,e=aa,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],r6.push(2*(5*r+n)),s6.push((t+1)*(t+2)/2%64);let s=GC;for(let i=0;i<7;i++)e=(e<<aa^(e>>ZC)*QC)%YC,e&WC&&(s^=aa<<(aa<<BigInt(i))-aa);i6.push(s)}const[JC,XC]=UC(i6,!0),Oy=(t,e,n)=>n>32?jC(t,e,n):MC(t,e,n),Cy=(t,e,n)=>n>32?FC(t,e,n):LC(t,e,n);function e4(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],h=Oy(u,l,1)^n[a],f=Cy(u,l,1)^n[a+1];for(let d=0;d<50;d+=10)t[o+d]^=h,t[o+d+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=s6[o],c=Oy(s,i,a),u=Cy(s,i,a),l=r6[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=JC[r],t[1]^=XC[r]}n.fill(0)}class $0 extends x0{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Hu(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=zC(this.state)}keccak(){Py||Ay(this.state32),e4(this.state32,this.rounds),Py||Ay(this.state32),this.posOut=0,this.pos=0}update(e){Io(this);const{blockLen:n,state:r}=this;e=Rl(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Io(this,!1),Cc(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Hu(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(t6(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new $0(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const t4=(t,e,n)=>n6(()=>new $0(e,t,n)),n4=t4(1,136,256/8);function o6(t,e){const n=e||"hex",r=n4(ec(t,{strict:!1})?TC(t):t);return n==="bytes"?r:Sd(r)}class r4 extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Uh=new r4(8192);function s4(t,e){if(Uh.has(`${t}.${e}`))return Uh.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=o6(e6(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return Uh.set(`${t}.${e}`,i),i}function i4(t){const e=o6(`0x${t.substring(4)}`).substring(26);return s4(`0x${e}`)}async function o4({hash:t,signature:e}){const n=ec(t)?t:Sd(t),{secp256k1:r}=await fi(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>Z4);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:u,s:l,v:h,yParity:f}=e,d=Number(f??h),p=Ty(d);return new r.Signature(_d(u),_d(l)).addRecoveryBit(p)}const o=ec(e)?e:Sd(e),a=_C(`0x${o.slice(130)}`),c=Ty(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Ty(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function a4({hash:t,signature:e}){return i4(await o4({hash:t,signature:e}))}function c4(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function u4(t,e,n){return t&e^~t&n}function l4(t,e,n){return t&e^t&n^e&n}class h4 extends x0{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=kh(this.buffer)}update(e){Io(this);const{view:n,buffer:r,blockLen:s}=this;e=Rl(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=kh(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Io(this),t6(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let h=o;h<s;h++)n[h]=0;c4(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=kh(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,l[h],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const f4=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),zr=new Uint32Array(64);class d4 extends h4{constructor(){super(64,32,8,!1),this.A=Fr[0]|0,this.B=Fr[1]|0,this.C=Fr[2]|0,this.D=Fr[3]|0,this.E=Fr[4]|0,this.F=Fr[5]|0,this.G=Fr[6]|0,this.H=Fr[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let h=0;h<16;h++,n+=4)zr[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const f=zr[h-15],d=zr[h-2],p=zn(f,7)^zn(f,18)^f>>>3,g=zn(d,17)^zn(d,19)^d>>>10;zr[h]=g+zr[h-7]+p+zr[h-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let h=0;h<64;h++){const f=zn(a,6)^zn(a,11)^zn(a,25),d=l+f+u4(a,c,u)+f4[h]+zr[h]|0,g=(zn(r,2)^zn(r,13)^zn(r,22))+l4(r,s,i)|0;l=u,u=c,c=a,a=o+d|0,o=i,i=s,s=r,r=d+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,c,u,l)}roundClean(){zr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const p4=n6(()=>new d4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kl=BigInt(0),Ul=BigInt(1),g4=BigInt(2);function ri(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Tc(t){if(!ri(t))throw new Error("Uint8Array expected")}function _o(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const y4=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function So(t){Tc(t);let e="";for(let n=0;n<t.length;n++)e+=y4[t[n]];return e}function Yi(t){const e=t.toString(16);return e.length&1?"0"+e:e}function I0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?kl:BigInt("0x"+t)}const lr={_0:48,_9:57,A:65,F:70,a:97,f:102};function Dy(t){if(t>=lr._0&&t<=lr._9)return t-lr._0;if(t>=lr.A&&t<=lr.F)return t-(lr.A-10);if(t>=lr.a&&t<=lr.f)return t-(lr.a-10)}function Po(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Dy(t.charCodeAt(i)),a=Dy(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function zs(t){return I0(So(t))}function _0(t){return Tc(t),I0(So(Uint8Array.from(t).reverse()))}function Ao(t,e){return Po(t.toString(16).padStart(e*2,"0"))}function S0(t,e){return Ao(t,e).reverse()}function m4(t){return Po(Yi(t))}function _n(t,e,n){let r;if(typeof e=="string")try{r=Po(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(ri(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function tc(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Tc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function b4(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function w4(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const Mh=t=>typeof t=="bigint"&&kl<=t;function Ml(t,e,n){return Mh(t)&&Mh(e)&&Mh(n)&&e<=t&&t<n}function qs(t,e,n,r){if(!Ml(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function a6(t){let e;for(e=0;t>kl;t>>=Ul,e+=1);return e}function v4(t,e){return t>>BigInt(e)&Ul}function E4(t,e,n){return t|(n?Ul:kl)<<BigInt(e)}const P0=t=>(g4<<BigInt(t-1))-Ul,Lh=t=>new Uint8Array(t),By=t=>Uint8Array.from(t);function c6(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Lh(t),s=Lh(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...h)=>n(s,r,...h),c=(h=Lh())=>{s=a(By([0]),h),r=a(),h.length!==0&&(s=a(By([1]),h),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){r=a();const d=r.slice();f.push(d),h+=r.length}return tc(...f)};return(h,f)=>{o(),c(h);let d;for(;!(d=f(u()));)c();return o(),d}}const x4={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||ri(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Dc(t,e,n={}){const r=(s,i,o)=>{const a=x4[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const $4=()=>{throw new Error("not implemented")};function Pd(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const I4=Object.freeze(Object.defineProperty({__proto__:null,aInRange:qs,abool:_o,abytes:Tc,bitGet:v4,bitLen:a6,bitMask:P0,bitSet:E4,bytesToHex:So,bytesToNumberBE:zs,bytesToNumberLE:_0,concatBytes:tc,createHmacDrbg:c6,ensureBytes:_n,equalBytes:b4,hexToBytes:Po,hexToNumber:I0,inRange:Ml,isBytes:ri,memoized:Pd,notImplemented:$4,numberToBytesBE:Ao,numberToBytesLE:S0,numberToHexUnpadded:Yi,numberToVarBytesBE:m4,utf8ToBytes:w4,validateObject:Dc},Symbol.toStringTag,{value:"Module"}));class u6 extends x0{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,RC(e);const r=Rl(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Io(this),this.iHash.update(e),this}digestInto(e){Io(this),Cc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const l6=(t,e,n)=>new u6(t,e).update(n).digest();l6.create=(t,e)=>new u6(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rt=BigInt(0),Me=BigInt(1),xs=BigInt(2),_4=BigInt(3),Ad=BigInt(4),Ny=BigInt(5),Ry=BigInt(8);function Tt(t,e){const n=t%e;return n>=rt?n:e+n}function S4(t,e,n){if(e<rt)throw new Error("invalid exponent, negatives unsupported");if(n<=rt)throw new Error("invalid modulus");if(n===Me)return rt;let r=Me;for(;e>rt;)e&Me&&(r=r*t%n),t=t*t%n,e>>=Me;return r}function nn(t,e,n){let r=t;for(;e-- >rt;)r*=r,r%=n;return r}function Od(t,e){if(t===rt)throw new Error("invert: expected non-zero number");if(e<=rt)throw new Error("invert: expected positive modulus, got "+e);let n=Tt(t,e),r=e,s=rt,i=Me;for(;n!==rt;){const a=r/n,c=r%n,u=s-i*a;r=n,n=c,s=i,i=u}if(r!==Me)throw new Error("invert: does not exist");return Tt(s,e)}function P4(t){const e=(t-Me)/xs;let n,r,s;for(n=t-Me,r=0;n%xs===rt;n/=xs,r++);for(s=xs;s<t&&S4(s,e,t)!==t-Me;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Me)/Ad;return function(c,u){const l=c.pow(u,o);if(!c.eql(c.sqr(l),u))throw new Error("Cannot find square root");return l}}const i=(n+Me)/xs;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,l=a.pow(a.mul(a.ONE,s),n),h=a.pow(c,i),f=a.pow(c,n);for(;!a.eql(f,a.ONE);){if(a.eql(f,a.ZERO))return a.ZERO;let d=1;for(let g=a.sqr(f);d<u&&!a.eql(g,a.ONE);d++)g=a.sqr(g);const p=a.pow(l,Me<<BigInt(u-d-1));l=a.sqr(p),h=a.mul(h,p),f=a.mul(f,l),u=d}return h}}function A4(t){if(t%Ad===_4){const e=(t+Me)/Ad;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%Ry===Ny){const e=(t-Ny)/Ry;return function(r,s){const i=r.mul(s,xs),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,xs),o),u=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),s))throw new Error("Cannot find square root");return u}}return P4(t)}const O4=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function C4(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=O4.reduce((r,s)=>(r[s]="function",r),e);return Dc(t,n)}function T4(t,e,n){if(n<rt)throw new Error("invalid exponent, negatives unsupported");if(n===rt)return t.ONE;if(n===Me)return e;let r=t.ONE,s=e;for(;n>rt;)n&Me&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Me;return r}function D4(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function h6(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function f6(t,e,n=!1,r={}){if(t<=rt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=h6(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:P0(s),ZERO:rt,ONE:Me,create:c=>Tt(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return rt<=c&&c<t},is0:c=>c===rt,isOdd:c=>(c&Me)===Me,neg:c=>Tt(-c,t),eql:(c,u)=>c===u,sqr:c=>Tt(c*c,t),add:(c,u)=>Tt(c+u,t),sub:(c,u)=>Tt(c-u,t),mul:(c,u)=>Tt(c*u,t),pow:(c,u)=>T4(a,c,u),div:(c,u)=>Tt(c*Od(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Od(c,t),sqrt:r.sqrt||(c=>(o||(o=A4(t)),o(a,c))),invertBatch:c=>D4(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>n?S0(c,i):Ao(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?_0(c):zs(c)}});return Object.freeze(a)}function d6(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function p6(t){const e=d6(t);return e+Math.ceil(e/2)}function B4(t,e,n=!1){const r=t.length,s=d6(e),i=p6(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?_0(t):zs(t),a=Tt(o,e-Me)+Me;return n?S0(a,s):Ao(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ky=BigInt(0),iu=BigInt(1);function jh(t,e){const n=e.negate();return t?n:e}function g6(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Fh(t,e){g6(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function N4(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function R4(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const zh=new WeakMap,y6=new WeakMap;function qh(t){return y6.get(t)||1}function k4(t,e){return{constTimeNegate:jh,hasPrecomputes(n){return qh(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>ky;)r&iu&&(s=s.add(i)),i=i.double(),r>>=iu;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Fh(r,e),o=[];let a=n,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=Fh(n,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**n-1),l=2**n,h=BigInt(n);for(let f=0;f<i;f++){const d=f*o;let p=Number(s&u);s>>=h,p>o&&(p-=l,s+=iu);const g=d,y=d+Math.abs(p)-1,w=f%2!==0,x=p<0;p===0?c=c.add(jh(w,r[g])):a=a.add(jh(x,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=Fh(n,e),c=BigInt(2**n-1),u=2**n,l=BigInt(n);for(let h=0;h<o;h++){const f=h*a;if(s===ky)break;let d=Number(s&c);if(s>>=l,d>a&&(d-=u,s+=iu),d===0)continue;let p=r[f+Math.abs(d)-1];d<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=zh.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&zh.set(r,s(i))),i},wNAFCached(n,r,s){const i=qh(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=qh(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){g6(r,e),y6.set(n,r),zh.delete(n)}}}function U4(t,e,n,r){if(N4(n,t),R4(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=a6(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),u=Math.floor((e.BITS-1)/o)*o;let l=s;for(let h=u;h>=0;h-=o){c.fill(s);for(let d=0;d<r.length;d++){const p=r[d],g=Number(p>>BigInt(h)&BigInt(a));c[g]=c[g].add(n[d])}let f=s;for(let d=c.length-1,p=s;d>0;d--)p=p.add(c[d]),f=f.add(p);if(l=l.add(f),h!==0)for(let d=0;d<o;d++)l=l.double()}return l}function m6(t){return C4(t.Fp),Dc(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...h6(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Uy(t){t.lowS!==void 0&&_o("lowS",t.lowS),t.prehash!==void 0&&_o("prehash",t.prehash)}function M4(t){const e=m6(t);Dc(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:L4,hexToBytes:j4}=I4;class F4 extends Error{constructor(e=""){super(e)}}const wr={Err:F4,_tlv:{encode:(t,e)=>{const{Err:n}=wr;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Yi(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Yi(s.length/2|128):"";return Yi(t)+i+s+e},decode(t,e){const{Err:n}=wr;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=wr;if(t<Ir)throw new e("integer: negative integers are not allowed");let n=Yi(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=wr;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return L4(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=wr,s=typeof t=="string"?j4(t):t;Tc(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=wr,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Ir=BigInt(0),et=BigInt(1);BigInt(2);const My=BigInt(3);BigInt(4);function z4(t){const e=M4(t),{Fp:n}=e,r=f6(e.n,e.nBitLength),s=e.toBytes||((g,y,w)=>{const x=y.toAffine();return tc(Uint8Array.from([4]),n.toBytes(x.x),n.toBytes(x.y))}),i=e.fromBytes||(g=>{const y=g.subarray(1),w=n.fromBytes(y.subarray(0,n.BYTES)),x=n.fromBytes(y.subarray(n.BYTES,2*n.BYTES));return{x:w,y:x}});function o(g){const{a:y,b:w}=e,x=n.sqr(g),v=n.mul(x,g);return n.add(n.add(v,n.mul(g,y)),w)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return Ml(g,et,e.n)}function c(g){const{allowedPrivateKeyLengths:y,nByteLength:w,wrapPrivateKey:x,n:v}=e;if(y&&typeof g!="bigint"){if(ri(g)&&(g=So(g)),typeof g!="string"||!y.includes(g.length))throw new Error("invalid private key");g=g.padStart(w*2,"0")}let E;try{E=typeof g=="bigint"?g:zs(_n("private key",g,w))}catch{throw new Error("invalid private key, expected hex or "+w+" bytes, got "+typeof g)}return x&&(E=Tt(E,v)),qs("private key",E,et,v),E}function u(g){if(!(g instanceof f))throw new Error("ProjectivePoint expected")}const l=Pd((g,y)=>{const{px:w,py:x,pz:v}=g;if(n.eql(v,n.ONE))return{x:w,y:x};const E=g.is0();y==null&&(y=E?n.ONE:n.inv(v));const I=n.mul(w,y),S=n.mul(x,y),P=n.mul(v,y);if(E)return{x:n.ZERO,y:n.ZERO};if(!n.eql(P,n.ONE))throw new Error("invZ was invalid");return{x:I,y:S}}),h=Pd(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:y,y:w}=g.toAffine();if(!n.isValid(y)||!n.isValid(w))throw new Error("bad point: x or y not FE");const x=n.sqr(w),v=o(y);if(!n.eql(x,v))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class f{constructor(y,w,x){if(this.px=y,this.py=w,this.pz=x,y==null||!n.isValid(y))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(x==null||!n.isValid(x))throw new Error("z required");Object.freeze(this)}static fromAffine(y){const{x:w,y:x}=y||{};if(!y||!n.isValid(w)||!n.isValid(x))throw new Error("invalid affine point");if(y instanceof f)throw new Error("projective point not allowed");const v=E=>n.eql(E,n.ZERO);return v(w)&&v(x)?f.ZERO:new f(w,x,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const w=n.invertBatch(y.map(x=>x.pz));return y.map((x,v)=>x.toAffine(w[v])).map(f.fromAffine)}static fromHex(y){const w=f.fromAffine(i(_n("pointHex",y)));return w.assertValidity(),w}static fromPrivateKey(y){return f.BASE.multiply(c(y))}static msm(y,w){return U4(f,r,y,w)}_setWindowSize(y){p.setWindowSize(this,y)}assertValidity(){h(this)}hasEvenY(){const{y}=this.toAffine();if(n.isOdd)return!n.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){u(y);const{px:w,py:x,pz:v}=this,{px:E,py:I,pz:S}=y,P=n.eql(n.mul(w,S),n.mul(E,v)),C=n.eql(n.mul(x,S),n.mul(I,v));return P&&C}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:y,b:w}=e,x=n.mul(w,My),{px:v,py:E,pz:I}=this;let S=n.ZERO,P=n.ZERO,C=n.ZERO,O=n.mul(v,v),j=n.mul(E,E),k=n.mul(I,I),L=n.mul(v,E);return L=n.add(L,L),C=n.mul(v,I),C=n.add(C,C),S=n.mul(y,C),P=n.mul(x,k),P=n.add(S,P),S=n.sub(j,P),P=n.add(j,P),P=n.mul(S,P),S=n.mul(L,S),C=n.mul(x,C),k=n.mul(y,k),L=n.sub(O,k),L=n.mul(y,L),L=n.add(L,C),C=n.add(O,O),O=n.add(C,O),O=n.add(O,k),O=n.mul(O,L),P=n.add(P,O),k=n.mul(E,I),k=n.add(k,k),O=n.mul(k,L),S=n.sub(S,O),C=n.mul(k,j),C=n.add(C,C),C=n.add(C,C),new f(S,P,C)}add(y){u(y);const{px:w,py:x,pz:v}=this,{px:E,py:I,pz:S}=y;let P=n.ZERO,C=n.ZERO,O=n.ZERO;const j=e.a,k=n.mul(e.b,My);let L=n.mul(w,E),F=n.mul(x,I),R=n.mul(v,S),$=n.add(w,x),_=n.add(E,I);$=n.mul($,_),_=n.add(L,F),$=n.sub($,_),_=n.add(w,v);let B=n.add(E,S);return _=n.mul(_,B),B=n.add(L,R),_=n.sub(_,B),B=n.add(x,v),P=n.add(I,S),B=n.mul(B,P),P=n.add(F,R),B=n.sub(B,P),O=n.mul(j,_),P=n.mul(k,R),O=n.add(P,O),P=n.sub(F,O),O=n.add(F,O),C=n.mul(P,O),F=n.add(L,L),F=n.add(F,L),R=n.mul(j,R),_=n.mul(k,_),F=n.add(F,R),R=n.sub(L,R),R=n.mul(j,R),_=n.add(_,R),L=n.mul(F,_),C=n.add(C,L),L=n.mul(B,_),P=n.mul($,P),P=n.sub(P,L),L=n.mul($,F),O=n.mul(B,O),O=n.add(O,L),new f(P,C,O)}subtract(y){return this.add(y.negate())}is0(){return this.equals(f.ZERO)}wNAF(y){return p.wNAFCached(this,y,f.normalizeZ)}multiplyUnsafe(y){const{endo:w,n:x}=e;qs("scalar",y,Ir,x);const v=f.ZERO;if(y===Ir)return v;if(this.is0()||y===et)return this;if(!w||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,y,f.normalizeZ);let{k1neg:E,k1:I,k2neg:S,k2:P}=w.splitScalar(y),C=v,O=v,j=this;for(;I>Ir||P>Ir;)I&et&&(C=C.add(j)),P&et&&(O=O.add(j)),j=j.double(),I>>=et,P>>=et;return E&&(C=C.negate()),S&&(O=O.negate()),O=new f(n.mul(O.px,w.beta),O.py,O.pz),C.add(O)}multiply(y){const{endo:w,n:x}=e;qs("scalar",y,et,x);let v,E;if(w){const{k1neg:I,k1:S,k2neg:P,k2:C}=w.splitScalar(y);let{p:O,f:j}=this.wNAF(S),{p:k,f:L}=this.wNAF(C);O=p.constTimeNegate(I,O),k=p.constTimeNegate(P,k),k=new f(n.mul(k.px,w.beta),k.py,k.pz),v=O.add(k),E=j.add(L)}else{const{p:I,f:S}=this.wNAF(y);v=I,E=S}return f.normalizeZ([v,E])[0]}multiplyAndAddUnsafe(y,w,x){const v=f.BASE,E=(S,P)=>P===Ir||P===et||!S.equals(v)?S.multiplyUnsafe(P):S.multiply(P),I=E(this,w).add(E(y,x));return I.is0()?void 0:I}toAffine(y){return l(this,y)}isTorsionFree(){const{h:y,isTorsionFree:w}=e;if(y===et)return!0;if(w)return w(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:w}=e;return y===et?this:w?w(f,this):this.multiplyUnsafe(e.h)}toRawBytes(y=!0){return _o("isCompressed",y),this.assertValidity(),s(f,this,y)}toHex(y=!0){return _o("isCompressed",y),So(this.toRawBytes(y))}}f.BASE=new f(e.Gx,e.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const d=e.nBitLength,p=k4(f,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function q4(t){const e=m6(t);return Dc(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function H4(t){const e=q4(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(R){return Tt(R,r)}function a(R){return Od(R,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:h}=z4({...e,toBytes(R,$,_){const B=$.toAffine(),D=n.toBytes(B.x),N=tc;return _o("isCompressed",_),_?N(Uint8Array.from([$.hasEvenY()?2:3]),D):N(Uint8Array.from([4]),D,n.toBytes(B.y))},fromBytes(R){const $=R.length,_=R[0],B=R.subarray(1);if($===s&&(_===2||_===3)){const D=zs(B);if(!Ml(D,et,n.ORDER))throw new Error("Point is not on curve");const N=l(D);let U;try{U=n.sqrt(N)}catch(Q){const W=Q instanceof Error?": "+Q.message:"";throw new Error("Point is not on curve"+W)}const z=(U&et)===et;return(_&1)===1!==z&&(U=n.neg(U)),{x:D,y:U}}else if($===i&&_===4){const D=n.fromBytes(B.subarray(0,n.BYTES)),N=n.fromBytes(B.subarray(n.BYTES,2*n.BYTES));return{x:D,y:N}}else{const D=s,N=i;throw new Error("invalid Point, expected length of "+D+", or uncompressed "+N+", got "+$)}}}),f=R=>So(Ao(R,e.nByteLength));function d(R){const $=r>>et;return R>$}function p(R){return d(R)?o(-R):R}const g=(R,$,_)=>zs(R.slice($,_));class y{constructor($,_,B){this.r=$,this.s=_,this.recovery=B,this.assertValidity()}static fromCompact($){const _=e.nByteLength;return $=_n("compactSignature",$,_*2),new y(g($,0,_),g($,_,2*_))}static fromDER($){const{r:_,s:B}=wr.toSig(_n("DER",$));return new y(_,B)}assertValidity(){qs("r",this.r,et,r),qs("s",this.s,et,r)}addRecoveryBit($){return new y(this.r,this.s,$)}recoverPublicKey($){const{r:_,s:B,recovery:D}=this,N=S(_n("msgHash",$));if(D==null||![0,1,2,3].includes(D))throw new Error("recovery id invalid");const U=D===2||D===3?_+e.n:_;if(U>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const z=D&1?"03":"02",V=c.fromHex(z+f(U)),Q=a(U),W=o(-N*Q),ee=o(B*Q),te=c.BASE.multiplyAndAddUnsafe(V,W,ee);if(!te)throw new Error("point at infinify");return te.assertValidity(),te}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Po(this.toDERHex())}toDERHex(){return wr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Po(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const w={isValidPrivateKey(R){try{return u(R),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const R=p6(e.n);return B4(e.randomBytes(R),e.n)},precompute(R=8,$=c.BASE){return $._setWindowSize(R),$.multiply(BigInt(3)),$}};function x(R,$=!0){return c.fromPrivateKey(R).toRawBytes($)}function v(R){const $=ri(R),_=typeof R=="string",B=($||_)&&R.length;return $?B===s||B===i:_?B===2*s||B===2*i:R instanceof c}function E(R,$,_=!0){if(v(R))throw new Error("first arg must be private key");if(!v($))throw new Error("second arg must be public key");return c.fromHex($).multiply(u(R)).toRawBytes(_)}const I=e.bits2int||function(R){if(R.length>8192)throw new Error("input is too large");const $=zs(R),_=R.length*8-e.nBitLength;return _>0?$>>BigInt(_):$},S=e.bits2int_modN||function(R){return o(I(R))},P=P0(e.nBitLength);function C(R){return qs("num < 2^"+e.nBitLength,R,Ir,P),Ao(R,e.nByteLength)}function O(R,$,_=j){if(["recovered","canonical"].some(ie=>ie in _))throw new Error("sign() legacy options not supported");const{hash:B,randomBytes:D}=e;let{lowS:N,prehash:U,extraEntropy:z}=_;N==null&&(N=!0),R=_n("msgHash",R),Uy(_),U&&(R=_n("prehashed msgHash",B(R)));const V=S(R),Q=u($),W=[C(Q),C(V)];if(z!=null&&z!==!1){const ie=z===!0?D(n.BYTES):z;W.push(_n("extraEntropy",ie))}const ee=tc(...W),te=V;function oe(ie){const re=I(ie);if(!h(re))return;const be=a(re),Ee=c.BASE.multiply(re).toAffine(),pe=o(Ee.x);if(pe===Ir)return;const de=o(be*o(te+pe*Q));if(de===Ir)return;let we=(Ee.x===pe?0:2)|Number(Ee.y&et),ke=de;return N&&d(de)&&(ke=p(de),we^=1),new y(pe,ke,we)}return{seed:ee,k2sig:oe}}const j={lowS:e.lowS,prehash:!1},k={lowS:e.lowS,prehash:!1};function L(R,$,_=j){const{seed:B,k2sig:D}=O(R,$,_),N=e;return c6(N.hash.outputLen,N.nByteLength,N.hmac)(B,D)}c.BASE._setWindowSize(8);function F(R,$,_,B=k){var we;const D=R;$=_n("msgHash",$),_=_n("publicKey",_);const{lowS:N,prehash:U,format:z}=B;if(Uy(B),"strict"in B)throw new Error("options.strict was renamed to lowS");if(z!==void 0&&z!=="compact"&&z!=="der")throw new Error("format must be compact or der");const V=typeof D=="string"||ri(D),Q=!V&&!z&&typeof D=="object"&&D!==null&&typeof D.r=="bigint"&&typeof D.s=="bigint";if(!V&&!Q)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let W,ee;try{if(Q&&(W=new y(D.r,D.s)),V){try{z!=="compact"&&(W=y.fromDER(D))}catch(ke){if(!(ke instanceof wr.Err))throw ke}!W&&z!=="der"&&(W=y.fromCompact(D))}ee=c.fromHex(_)}catch{return!1}if(!W||N&&W.hasHighS())return!1;U&&($=e.hash($));const{r:te,s:oe}=W,ie=S($),re=a(oe),be=o(ie*re),Ee=o(te*re),pe=(we=c.BASE.multiplyAndAddUnsafe(ee,be,Ee))==null?void 0:we.toAffine();return pe?o(pe.x)===te:!1}return{CURVE:e,getPublicKey:x,getSharedSecret:E,sign:L,verify:F,ProjectivePoint:c,Signature:y,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function V4(t){return{hash:t,hmac:(e,...n)=>l6(t,e,VC(...n)),randomBytes:KC}}function K4(t,e){const n=r=>H4({...t,...V4(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const b6=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ly=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),G4=BigInt(1),Cd=BigInt(2),jy=(t,e)=>(t+e/Cd)/e;function W4(t){const e=b6,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,h=nn(l,n,e)*l%e,f=nn(h,n,e)*l%e,d=nn(f,Cd,e)*u%e,p=nn(d,s,e)*d%e,g=nn(p,i,e)*p%e,y=nn(g,a,e)*g%e,w=nn(y,c,e)*y%e,x=nn(w,a,e)*g%e,v=nn(x,n,e)*l%e,E=nn(v,o,e)*p%e,I=nn(E,r,e)*u%e,S=nn(I,Cd,e);if(!Td.eql(Td.sqr(S),t))throw new Error("Cannot find square root");return S}const Td=f6(b6,void 0,void 0,{sqrt:W4}),w6=K4({a:BigInt(0),b:BigInt(7),Fp:Td,n:Ly,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Ly,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-G4*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=jy(i*t,e),c=jy(-r*t,e);let u=Tt(t-a*n-c*s,e),l=Tt(-a*r-c*i,e);const h=u>o,f=l>o;if(h&&(u=e-u),f&&(l=e-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:u,k2neg:f,k2:l}}}},p4);BigInt(0);w6.ProjectivePoint;const Z4=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:w6},Symbol.toStringTag,{value:"Module"}));function Y4(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<t.length;u++){const l=t.charAt(u),h=l.charCodeAt(0);if(e[h]!==255)throw new TypeError(l+" is ambiguous");e[h]=u}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let l=0,h=0,f=0;const d=u.length;for(;f!==d&&u[f]===0;)f++,l++;const p=(d-f)*i+1>>>0,g=new Uint8Array(p);for(;f!==d;){let x=u[f],v=0;for(let E=p-1;(x!==0||v<h)&&E!==-1;E--,v++)x+=256*g[E]>>>0,g[E]=x%n>>>0,x=x/n>>>0;if(x!==0)throw new Error("Non-zero carry");h=v,f++}let y=p-h;for(;y!==p&&g[y]===0;)y++;let w=r.repeat(l);for(;y<p;++y)w+=t.charAt(g[y]);return w}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let l=0,h=0,f=0;for(;u[l]===r;)h++,l++;const d=(u.length-l)*s+1>>>0,p=new Uint8Array(d);for(;l<u.length;){const x=u.charCodeAt(l);if(x>255)return;let v=e[x];if(v===255)return;let E=0;for(let I=d-1;(v!==0||E<f)&&I!==-1;I--,E++)v+=n*p[I]>>>0,p[I]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");f=E,l++}let g=d-f;for(;g!==d&&p[g]===0;)g++;const y=new Uint8Array(h+(d-g));let w=h;for(;g!==d;)y[w++]=p[g++];return y}function c(u){const l=a(u);if(l)return l;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var Q4="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const J4=Y4(Q4),X4=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),eT=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function si(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return eT(t)}catch{return t}}function Rr(t){return typeof t=="string"?t:X4(t)||""}function tT(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function v6(t,...e){if(!tT(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Fy(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function nT(t,e){v6(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Si=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hh=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function rT(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function E6(t){return typeof t=="string"&&(t=rT(t)),v6(t),t}let sT=class{clone(){return this._cloneInto()}};function iT(t){const e=r=>t().update(E6(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function x6(t=32){if(Si&&typeof Si.getRandomValues=="function")return Si.getRandomValues(new Uint8Array(t));if(Si&&typeof Si.randomBytes=="function")return Si.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function oT(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}let aT=class extends sT{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Hh(this.buffer)}update(e){Fy(this);const{view:n,buffer:r,blockLen:s}=this;e=E6(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Hh(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Fy(this),nT(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let h=o;h<s;h++)n[h]=0;oT(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Hh(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,l[h],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const ou=BigInt(2**32-1),Dd=BigInt(32);function $6(t,e=!1){return e?{h:Number(t&ou),l:Number(t>>Dd&ou)}:{h:Number(t>>Dd&ou)|0,l:Number(t&ou)|0}}function cT(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=$6(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const uT=(t,e)=>BigInt(t>>>0)<<Dd|BigInt(e>>>0),lT=(t,e,n)=>t>>>n,hT=(t,e,n)=>t<<32-n|e>>>n,fT=(t,e,n)=>t>>>n|e<<32-n,dT=(t,e,n)=>t<<32-n|e>>>n,pT=(t,e,n)=>t<<64-n|e>>>n-32,gT=(t,e,n)=>t>>>n-32|e<<64-n,yT=(t,e)=>e,mT=(t,e)=>t,bT=(t,e,n)=>t<<n|e>>>32-n,wT=(t,e,n)=>e<<n|t>>>32-n,vT=(t,e,n)=>e<<n-32|t>>>64-n,ET=(t,e,n)=>t<<n-32|e>>>64-n;function xT(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const $T=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),IT=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,_T=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),ST=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,PT=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),AT=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,ae={fromBig:$6,split:cT,toBig:uT,shrSH:lT,shrSL:hT,rotrSH:fT,rotrSL:dT,rotrBH:pT,rotrBL:gT,rotr32H:yT,rotr32L:mT,rotlSH:bT,rotlSL:wT,rotlBH:vT,rotlBL:ET,add:xT,add3L:$T,add3H:IT,add4L:_T,add4H:ST,add5H:AT,add5L:PT},[OT,CT]=ae.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),qr=new Uint32Array(80),Hr=new Uint32Array(80);let TT=class extends aT{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:h,Fl:f,Gh:d,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,u,l,h,f,d,p,g,y]}set(e,n,r,s,i,o,a,c,u,l,h,f,d,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=h|0,this.Fl=f|0,this.Gh=d|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let v=0;v<16;v++,n+=4)qr[v]=e.getUint32(n),Hr[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const E=qr[v-15]|0,I=Hr[v-15]|0,S=ae.rotrSH(E,I,1)^ae.rotrSH(E,I,8)^ae.shrSH(E,I,7),P=ae.rotrSL(E,I,1)^ae.rotrSL(E,I,8)^ae.shrSL(E,I,7),C=qr[v-2]|0,O=Hr[v-2]|0,j=ae.rotrSH(C,O,19)^ae.rotrBH(C,O,61)^ae.shrSH(C,O,6),k=ae.rotrSL(C,O,19)^ae.rotrBL(C,O,61)^ae.shrSL(C,O,6),L=ae.add4L(P,k,Hr[v-7],Hr[v-16]),F=ae.add4H(L,S,j,qr[v-7],qr[v-16]);qr[v]=F|0,Hr[v]=L|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:h,El:f,Fh:d,Fl:p,Gh:g,Gl:y,Hh:w,Hl:x}=this;for(let v=0;v<80;v++){const E=ae.rotrSH(h,f,14)^ae.rotrSH(h,f,18)^ae.rotrBH(h,f,41),I=ae.rotrSL(h,f,14)^ae.rotrSL(h,f,18)^ae.rotrBL(h,f,41),S=h&d^~h&g,P=f&p^~f&y,C=ae.add5L(x,I,P,CT[v],Hr[v]),O=ae.add5H(C,w,E,S,OT[v],qr[v]),j=C|0,k=ae.rotrSH(r,s,28)^ae.rotrBH(r,s,34)^ae.rotrBH(r,s,39),L=ae.rotrSL(r,s,28)^ae.rotrBL(r,s,34)^ae.rotrBL(r,s,39),F=r&i^r&a^i&a,R=s&o^s&c^o&c;w=g|0,x=y|0,g=d|0,y=p|0,d=h|0,p=f|0,{h,l:f}=ae.add(u|0,l|0,O|0,j|0),u=a|0,l=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const $=ae.add3L(j,L,R);r=ae.add3H($,O,k,F),s=$|0}({h:r,l:s}=ae.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ae.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=ae.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=ae.add(this.Dh|0,this.Dl|0,u|0,l|0),{h,l:f}=ae.add(this.Eh|0,this.El|0,h|0,f|0),{h:d,l:p}=ae.add(this.Fh|0,this.Fl|0,d|0,p|0),{h:g,l:y}=ae.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:w,l:x}=ae.add(this.Hh|0,this.Hl|0,w|0,x|0),this.set(r,s,i,o,a,c,u,l,h,f,d,p,g,y,w,x)}roundClean(){qr.fill(0),Hr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const DT=iT(()=>new TT);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const A0=BigInt(0),I6=BigInt(1),BT=BigInt(2);function O0(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function C0(t){if(!O0(t))throw new Error("Uint8Array expected")}function Vh(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const NT=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function T0(t){C0(t);let e="";for(let n=0;n<t.length;n++)e+=NT[t[n]];return e}function _6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?A0:BigInt("0x"+t)}const hr={_0:48,_9:57,A:65,F:70,a:97,f:102};function zy(t){if(t>=hr._0&&t<=hr._9)return t-hr._0;if(t>=hr.A&&t<=hr.F)return t-(hr.A-10);if(t>=hr.a&&t<=hr.f)return t-(hr.a-10)}function S6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=zy(t.charCodeAt(i)),a=zy(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function RT(t){return _6(T0(t))}function Pu(t){return C0(t),_6(T0(Uint8Array.from(t).reverse()))}function P6(t,e){return S6(t.toString(16).padStart(e*2,"0"))}function Bd(t,e){return P6(t,e).reverse()}function fr(t,e,n){let r;if(typeof e=="string")try{r=S6(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(O0(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function qy(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];C0(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const Kh=t=>typeof t=="bigint"&&A0<=t;function kT(t,e,n){return Kh(t)&&Kh(e)&&Kh(n)&&e<=t&&t<n}function ca(t,e,n,r){if(!kT(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function UT(t){let e;for(e=0;t>A0;t>>=I6,e+=1);return e}const MT=t=>(BT<<BigInt(t-1))-I6,LT={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||O0(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function D0(t,e,n={}){const r=(s,i,o)=>{const a=LT[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function Hy(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const st=BigInt(0),Le=BigInt(1),$s=BigInt(2),jT=BigInt(3),Nd=BigInt(4),Vy=BigInt(5),Ky=BigInt(8);function We(t,e){const n=t%e;return n>=st?n:e+n}function FT(t,e,n){if(e<st)throw new Error("invalid exponent, negatives unsupported");if(n<=st)throw new Error("invalid modulus");if(n===Le)return st;let r=Le;for(;e>st;)e&Le&&(r=r*t%n),t=t*t%n,e>>=Le;return r}function qn(t,e,n){let r=t;for(;e-- >st;)r*=r,r%=n;return r}function Gy(t,e){if(t===st)throw new Error("invert: expected non-zero number");if(e<=st)throw new Error("invert: expected positive modulus, got "+e);let n=We(t,e),r=e,s=st,i=Le;for(;n!==st;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Le)throw new Error("invert: does not exist");return We(s,e)}function zT(t){const e=(t-Le)/$s;let n,r,s;for(n=t-Le,r=0;n%$s===st;n/=$s,r++);for(s=$s;s<t&&FT(s,e,t)!==t-Le;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Le)/Nd;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(n+Le)/$s;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,u=o.pow(o.mul(o.ONE,s),n),l=o.pow(a,i),h=o.pow(a,n);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let f=1;for(let p=o.sqr(h);f<c&&!o.eql(p,o.ONE);f++)p=o.sqr(p);const d=o.pow(u,Le<<BigInt(c-f-1));u=o.sqr(d),l=o.mul(l,d),h=o.mul(h,u),c=f}return l}}function qT(t){if(t%Nd===jT){const e=(t+Le)/Nd;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%Ky===Vy){const e=(t-Vy)/Ky;return function(n,r){const s=n.mul(r,$s),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,$s),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return zT(t)}const HT=(t,e)=>(We(t,e)&Le)===Le,VT=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function KT(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=VT.reduce((r,s)=>(r[s]="function",r),e);return D0(t,n)}function GT(t,e,n){if(n<st)throw new Error("invalid exponent, negatives unsupported");if(n===st)return t.ONE;if(n===Le)return e;let r=t.ONE,s=e;for(;n>st;)n&Le&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Le;return r}function WT(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function A6(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function O6(t,e,n=!1,r={}){if(t<=st)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=A6(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:MT(s),ZERO:st,ONE:Le,create:c=>We(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return st<=c&&c<t},is0:c=>c===st,isOdd:c=>(c&Le)===Le,neg:c=>We(-c,t),eql:(c,u)=>c===u,sqr:c=>We(c*c,t),add:(c,u)=>We(c+u,t),sub:(c,u)=>We(c-u,t),mul:(c,u)=>We(c*u,t),pow:(c,u)=>GT(a,c,u),div:(c,u)=>We(c*Gy(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Gy(c,t),sqrt:r.sqrt||(c=>(o||(o=qT(t)),o(a,c))),invertBatch:c=>WT(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>n?Bd(c,i):P6(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?Pu(c):RT(c)}});return Object.freeze(a)}const Wy=BigInt(0),au=BigInt(1);function Gh(t,e){const n=e.negate();return t?n:e}function C6(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Wh(t,e){C6(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function ZT(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function YT(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Zh=new WeakMap,T6=new WeakMap;function Yh(t){return T6.get(t)||1}function QT(t,e){return{constTimeNegate:Gh,hasPrecomputes(n){return Yh(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Wy;)r&au&&(s=s.add(i)),i=i.double(),r>>=au;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Wh(r,e),o=[];let a=n,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=Wh(n,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**n-1),l=2**n,h=BigInt(n);for(let f=0;f<i;f++){const d=f*o;let p=Number(s&u);s>>=h,p>o&&(p-=l,s+=au);const g=d,y=d+Math.abs(p)-1,w=f%2!==0,x=p<0;p===0?c=c.add(Gh(w,r[g])):a=a.add(Gh(x,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=Wh(n,e),c=BigInt(2**n-1),u=2**n,l=BigInt(n);for(let h=0;h<o;h++){const f=h*a;if(s===Wy)break;let d=Number(s&c);if(s>>=l,d>a&&(d-=u,s+=au),d===0)continue;let p=r[f+Math.abs(d)-1];d<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=Zh.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Zh.set(r,s(i))),i},wNAFCached(n,r,s){const i=Yh(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Yh(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){C6(r,e),T6.set(n,r),Zh.delete(n)}}}function JT(t,e,n,r){if(ZT(n,t),YT(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=UT(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),u=Math.floor((e.BITS-1)/o)*o;let l=s;for(let h=u;h>=0;h-=o){c.fill(s);for(let d=0;d<r.length;d++){const p=r[d],g=Number(p>>BigInt(h)&BigInt(a));c[g]=c[g].add(n[d])}let f=s;for(let d=c.length-1,p=s;d>0;d--)p=p.add(c[d]),f=f.add(p);if(l=l.add(f),h!==0)for(let d=0;d<o;d++)l=l.double()}return l}function XT(t){return KT(t.Fp),D0(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...A6(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const wn=BigInt(0),_t=BigInt(1),cu=BigInt(2),eD=BigInt(8),tD={zip215:!0};function nD(t){const e=XT(t);return D0(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function rD(t){const e=nD(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,u=cu<<BigInt(a*8)-_t,l=n.create,h=O6(e.n,e.nBitLength),f=e.uvRatio||(($,_)=>{try{return{isValid:!0,value:n.sqrt($*n.inv(_))}}catch{return{isValid:!1,value:wn}}}),d=e.adjustScalarBytes||($=>$),p=e.domain||(($,_,B)=>{if(Vh("phflag",B),_.length||B)throw new Error("Contexts/pre-hash are not supported");return $});function g($,_){ca("coordinate "+$,_,wn,u)}function y($){if(!($ instanceof v))throw new Error("ExtendedPoint expected")}const w=Hy(($,_)=>{const{ex:B,ey:D,ez:N}=$,U=$.is0();_==null&&(_=U?eD:n.inv(N));const z=l(B*_),V=l(D*_),Q=l(N*_);if(U)return{x:wn,y:_t};if(Q!==_t)throw new Error("invZ was invalid");return{x:z,y:V}}),x=Hy($=>{const{a:_,d:B}=e;if($.is0())throw new Error("bad point: ZERO");const{ex:D,ey:N,ez:U,et:z}=$,V=l(D*D),Q=l(N*N),W=l(U*U),ee=l(W*W),te=l(V*_),oe=l(W*l(te+Q)),ie=l(ee+l(B*l(V*Q)));if(oe!==ie)throw new Error("bad point: equation left != right (1)");const re=l(D*N),be=l(U*z);if(re!==be)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(_,B,D,N){this.ex=_,this.ey=B,this.ez=D,this.et=N,g("x",_),g("y",B),g("z",D),g("t",N),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(_){if(_ instanceof v)throw new Error("extended point not allowed");const{x:B,y:D}=_||{};return g("x",B),g("y",D),new v(B,D,_t,l(B*D))}static normalizeZ(_){const B=n.invertBatch(_.map(D=>D.ez));return _.map((D,N)=>D.toAffine(B[N])).map(v.fromAffine)}static msm(_,B){return JT(v,h,_,B)}_setWindowSize(_){S.setWindowSize(this,_)}assertValidity(){x(this)}equals(_){y(_);const{ex:B,ey:D,ez:N}=this,{ex:U,ey:z,ez:V}=_,Q=l(B*V),W=l(U*N),ee=l(D*V),te=l(z*N);return Q===W&&ee===te}is0(){return this.equals(v.ZERO)}negate(){return new v(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:_}=e,{ex:B,ey:D,ez:N}=this,U=l(B*B),z=l(D*D),V=l(cu*l(N*N)),Q=l(_*U),W=B+D,ee=l(l(W*W)-U-z),te=Q+z,oe=te-V,ie=Q-z,re=l(ee*oe),be=l(te*ie),Ee=l(ee*ie),pe=l(oe*te);return new v(re,be,pe,Ee)}add(_){y(_);const{a:B,d:D}=e,{ex:N,ey:U,ez:z,et:V}=this,{ex:Q,ey:W,ez:ee,et:te}=_;if(B===BigInt(-1)){const Vc=l((U-N)*(W+Q)),Jo=l((U+N)*(W-Q)),Mr=l(Jo-Vc);if(Mr===wn)return this.double();const jt=l(z*cu*te),vi=l(V*cu*ee),Kc=vi+jt,bn=Jo+Vc,Gc=vi-jt,A=l(Kc*Mr),m=l(bn*Gc),b=l(Kc*Gc),T=l(Mr*bn);return new v(A,m,T,b)}const oe=l(N*Q),ie=l(U*W),re=l(V*D*te),be=l(z*ee),Ee=l((N+U)*(Q+W)-oe-ie),pe=be-re,de=be+re,we=l(ie-B*oe),ke=l(Ee*pe),Ln=l(de*we),Qo=l(Ee*we),rh=l(pe*de);return new v(ke,Ln,rh,Qo)}subtract(_){return this.add(_.negate())}wNAF(_){return S.wNAFCached(this,_,v.normalizeZ)}multiply(_){const B=_;ca("scalar",B,_t,r);const{p:D,f:N}=this.wNAF(B);return v.normalizeZ([D,N])[0]}multiplyUnsafe(_,B=v.ZERO){const D=_;return ca("scalar",D,wn,r),D===wn?I:this.is0()||D===_t?this:S.wNAFCachedUnsafe(this,D,v.normalizeZ,B)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return S.unsafeLadder(this,r).is0()}toAffine(_){return w(this,_)}clearCofactor(){const{h:_}=e;return _===_t?this:this.multiplyUnsafe(_)}static fromHex(_,B=!1){const{d:D,a:N}=e,U=n.BYTES;_=fr("pointHex",_,U),Vh("zip215",B);const z=_.slice(),V=_[U-1];z[U-1]=V&-129;const Q=Pu(z),W=B?u:n.ORDER;ca("pointHex.y",Q,wn,W);const ee=l(Q*Q),te=l(ee-_t),oe=l(D*ee-N);let{isValid:ie,value:re}=f(te,oe);if(!ie)throw new Error("Point.fromHex: invalid y coordinate");const be=(re&_t)===_t,Ee=(V&128)!==0;if(!B&&re===wn&&Ee)throw new Error("Point.fromHex: x=0 and x_0=1");return Ee!==be&&(re=l(-re)),v.fromAffine({x:re,y:Q})}static fromPrivateKey(_){return O(_).point}toRawBytes(){const{x:_,y:B}=this.toAffine(),D=Bd(B,n.BYTES);return D[D.length-1]|=_&_t?128:0,D}toHex(){return T0(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,_t,l(e.Gx*e.Gy)),v.ZERO=new v(wn,_t,_t,wn);const{BASE:E,ZERO:I}=v,S=QT(v,a*8);function P($){return We($,r)}function C($){return P(Pu($))}function O($){const _=n.BYTES;$=fr("private key",$,_);const B=fr("hashed private key",i($),2*_),D=d(B.slice(0,_)),N=B.slice(_,2*_),U=C(D),z=E.multiply(U),V=z.toRawBytes();return{head:D,prefix:N,scalar:U,point:z,pointBytes:V}}function j($){return O($).pointBytes}function k($=new Uint8Array,..._){const B=qy(..._);return C(i(p(B,fr("context",$),!!s)))}function L($,_,B={}){$=fr("message",$),s&&($=s($));const{prefix:D,scalar:N,pointBytes:U}=O(_),z=k(B.context,D,$),V=E.multiply(z).toRawBytes(),Q=k(B.context,V,U,$),W=P(z+Q*N);ca("signature.s",W,wn,r);const ee=qy(V,Bd(W,n.BYTES));return fr("result",ee,n.BYTES*2)}const F=tD;function R($,_,B,D=F){const{context:N,zip215:U}=D,z=n.BYTES;$=fr("signature",$,2*z),_=fr("message",_),B=fr("publicKey",B,z),U!==void 0&&Vh("zip215",U),s&&(_=s(_));const V=Pu($.slice(z,2*z));let Q,W,ee;try{Q=v.fromHex(B,U),W=v.fromHex($.slice(0,z),U),ee=E.multiplyUnsafe(V)}catch{return!1}if(!U&&Q.isSmallOrder())return!1;const te=k(N,W.toRawBytes(),Q.toRawBytes(),_);return W.add(Q.multiplyUnsafe(te)).subtract(ee).clearCofactor().equals(v.ZERO)}return E._setWindowSize(8),{CURVE:e,getPublicKey:j,sign:L,verify:R,ExtendedPoint:v,utils:{getExtendedPublicKey:O,randomPrivateKey:()=>o(n.BYTES),precompute($=8,_=v.BASE){return _._setWindowSize($),_.multiply(BigInt(3)),_}}}}BigInt(0),BigInt(1);const B0=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Zy=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const sD=BigInt(1),Yy=BigInt(2);BigInt(3);const iD=BigInt(5),oD=BigInt(8);function aD(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=B0,o=t*t%i*t%i,a=qn(o,Yy,i)*o%i,c=qn(a,sD,i)*t%i,u=qn(c,iD,i)*c%i,l=qn(u,e,i)*u%i,h=qn(l,n,i)*l%i,f=qn(h,r,i)*h%i,d=qn(f,s,i)*f%i,p=qn(d,s,i)*f%i,g=qn(p,e,i)*u%i;return{pow_p_5_8:qn(g,Yy,i)*t%i,b2:o}}function cD(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function uD(t,e){const n=B0,r=We(e*e*e,n),s=We(r*r*e,n),i=aD(t*s).pow_p_5_8;let o=We(t*r*i,n);const a=We(e*o*o,n),c=o,u=We(o*Zy,n),l=a===t,h=a===We(-t,n),f=a===We(-t*Zy,n);return l&&(o=c),(h||f)&&(o=u),HT(o,n)&&(o=We(-o,n)),{isValid:l||h,value:o}}const lD=O6(B0,void 0,!0),hD={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:lD,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:oD,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:DT,randomBytes:x6,adjustScalarBytes:cD,uvRatio:uD},D6=rD(hD),fD="EdDSA",dD="JWT",Vu=".",Ll="base64url",B6="utf8",N6="utf8",pD=":",gD="did",yD="key",Qy="base58btc",mD="z",bD="K36",wD=32;function N0(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function R6(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?N0(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function k6(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=R6(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return N0(n)}function vD(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,x=p.length;w!==x&&p[w]===0;)w++,g++;for(var v=(x-w)*l+1>>>0,E=new Uint8Array(v);w!==x;){for(var I=p[w],S=0,P=v-1;(I!==0||S<y)&&P!==-1;P--,S++)I+=256*E[P]>>>0,E[P]=I%a>>>0,I=I/a>>>0;if(I!==0)throw new Error("Non-zero carry");y=S,w++}for(var C=v-y;C!==v&&E[C]===0;)C++;for(var O=c.repeat(g);C<v;++C)O+=t.charAt(E[C]);return O}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var x=(p.length-g)*u+1>>>0,v=new Uint8Array(x);p[g];){var E=n[p.charCodeAt(g)];if(E===255)return;for(var I=0,S=x-1;(E!==0||I<w)&&S!==-1;S--,I++)E+=a*v[S]>>>0,v[S]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");w=I,g++}if(p[g]!==" "){for(var P=x-w;P!==x&&v[P]===0;)P++;for(var C=new Uint8Array(y+(x-P)),O=y;P!==x;)C[O++]=v[P++];return C}}}function d(p){var g=f(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:f,decode:d}}var ED=vD,xD=ED;const U6=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},$D=t=>new TextEncoder().encode(t),ID=t=>new TextDecoder().decode(t);let _D=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},SD=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return M6(this,e)}},PD=class{constructor(e){this.decoders=e}or(e){return M6(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const M6=(t,e)=>new PD({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let AD=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new _D(e,n,r),this.decoder=new SD(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const jl=({name:t,prefix:e,encode:n,decode:r})=>new AD(t,e,n,r),Bc=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=xD(n,e);return jl({prefix:t,name:e,encode:r,decode:i=>U6(s(i))})},OD=(t,e,n,r)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const h=s[t[l]];if(h===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|h,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},CD=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},ft=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>jl({prefix:e,name:t,encode(s){return CD(s,r,n)},decode(s){return OD(s,r,n,t)}}),TD=jl({prefix:"\0",name:"identity",encode:t=>ID(t),decode:t=>$D(t)});var DD=Object.freeze({__proto__:null,identity:TD});const BD=ft({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ND=Object.freeze({__proto__:null,base2:BD});const RD=ft({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var kD=Object.freeze({__proto__:null,base8:RD});const UD=Bc({prefix:"9",name:"base10",alphabet:"0123456789"});var MD=Object.freeze({__proto__:null,base10:UD});const LD=ft({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),jD=ft({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var FD=Object.freeze({__proto__:null,base16:LD,base16upper:jD});const zD=ft({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),qD=ft({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),HD=ft({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),VD=ft({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),KD=ft({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),GD=ft({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),WD=ft({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ZD=ft({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),YD=ft({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var QD=Object.freeze({__proto__:null,base32:zD,base32upper:qD,base32pad:HD,base32padupper:VD,base32hex:KD,base32hexupper:GD,base32hexpad:WD,base32hexpadupper:ZD,base32z:YD});const JD=Bc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),XD=Bc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var eB=Object.freeze({__proto__:null,base36:JD,base36upper:XD});const tB=Bc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),nB=Bc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var rB=Object.freeze({__proto__:null,base58btc:tB,base58flickr:nB});const sB=ft({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),iB=ft({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),oB=ft({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),aB=ft({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var cB=Object.freeze({__proto__:null,base64:sB,base64pad:iB,base64url:oB,base64urlpad:aB});const L6=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),uB=L6.reduce((t,e,n)=>(t[n]=e,t),[]),lB=L6.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function hB(t){return t.reduce((e,n)=>(e+=uB[n],e),"")}function fB(t){const e=[];for(const n of t){const r=lB[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const dB=jl({prefix:"🚀",name:"base256emoji",encode:hB,decode:fB});var pB=Object.freeze({__proto__:null,base256emoji:dB}),gB=j6,Jy=128,yB=-128,mB=Math.pow(2,31);function j6(t,e,n){e=e||[],n=n||0;for(var r=n;t>=mB;)e[n++]=t&255|Jy,t/=128;for(;t&yB;)e[n++]=t&255|Jy,t>>>=7;return e[n]=t|0,j6.bytes=n-r+1,e}var bB=Rd,wB=128,Xy=127;function Rd(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw Rd.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&Xy)<<s:(o&Xy)*Math.pow(2,s),s+=7}while(o>=wB);return Rd.bytes=i-r,n}var vB=Math.pow(2,7),EB=Math.pow(2,14),xB=Math.pow(2,21),$B=Math.pow(2,28),IB=Math.pow(2,35),_B=Math.pow(2,42),SB=Math.pow(2,49),PB=Math.pow(2,56),AB=Math.pow(2,63),OB=function(t){return t<vB?1:t<EB?2:t<xB?3:t<$B?4:t<IB?5:t<_B?6:t<SB?7:t<PB?8:t<AB?9:10},CB={encode:gB,decode:bB,encodingLength:OB},F6=CB;const em=(t,e,n=0)=>(F6.encode(t,e,n),e),tm=t=>F6.encodingLength(t),kd=(t,e)=>{const n=e.byteLength,r=tm(t),s=r+tm(n),i=new Uint8Array(s+n);return em(t,i,0),em(n,i,r),i.set(e,s),new TB(t,n,e,i)};let TB=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const z6=({name:t,code:e,encode:n})=>new DB(t,e,n);let DB=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?kd(this.code,n):n.then(r=>kd(this.code,r))}else throw Error("Unknown type, must be binary type")}};const q6=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),BB=z6({name:"sha2-256",code:18,encode:q6("SHA-256")}),NB=z6({name:"sha2-512",code:19,encode:q6("SHA-512")});var RB=Object.freeze({__proto__:null,sha256:BB,sha512:NB});const H6=0,kB="identity",V6=U6,UB=t=>kd(H6,V6(t)),MB={code:H6,name:kB,encode:V6,digest:UB};var LB=Object.freeze({__proto__:null,identity:MB});new TextEncoder,new TextDecoder;const nm={...DD,...ND,...kD,...MD,...FD,...QD,...eB,...rB,...cB,...pB};({...RB,...LB});function K6(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const rm=K6("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Qh=K6("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=R6(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),G6={utf8:rm,"utf-8":rm,hex:nm.base16,latin1:Qh,ascii:Qh,binary:Qh,...nm};function Fl(t,e="utf8"){const n=G6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Ko(t,e="utf8"){const n=G6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?N0(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function sm(t){return si(Fl(Ko(t,Ll),B6))}function Ku(t){return Fl(Ko(Rr(t),B6),Ll)}function W6(t){const e=Ko(bD,Qy),n=mD+Fl(k6([e,t]),Qy);return[gD,yD,n].join(pD)}function jB(t){return Fl(t,Ll)}function FB(t){return Ko(t,Ll)}function zB(t){return Ko([Ku(t.header),Ku(t.payload)].join(Vu),N6)}function qB(t){return[Ku(t.header),Ku(t.payload),jB(t.signature)].join(Vu)}function Ud(t){const e=t.split(Vu),n=sm(e[0]),r=sm(e[1]),s=FB(e[2]),i=Ko(e.slice(0,2).join(Vu),N6);return{header:n,payload:r,signature:s,data:i}}function im(t=x6(wD)){const e=D6.getPublicKey(t);return{secretKey:k6([t,e]),publicKey:e}}async function HB(t,e,n,r,s=J.fromMiliseconds(Date.now())){const i={alg:fD,typ:dD},o=W6(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},u=zB({header:i,payload:c}),l=D6.sign(u,r.secretKey.slice(0,32));return qB({header:i,payload:c,signature:l})}function Z6(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function wa(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=Z6(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function VB(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,x=p.length;w!==x&&p[w]===0;)w++,g++;for(var v=(x-w)*l+1>>>0,E=new Uint8Array(v);w!==x;){for(var I=p[w],S=0,P=v-1;(I!==0||S<y)&&P!==-1;P--,S++)I+=256*E[P]>>>0,E[P]=I%a>>>0,I=I/a>>>0;if(I!==0)throw new Error("Non-zero carry");y=S,w++}for(var C=v-y;C!==v&&E[C]===0;)C++;for(var O=c.repeat(g);C<v;++C)O+=t.charAt(E[C]);return O}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var x=(p.length-g)*u+1>>>0,v=new Uint8Array(x);p[g];){var E=n[p.charCodeAt(g)];if(E===255)return;for(var I=0,S=x-1;(E!==0||I<w)&&S!==-1;S--,I++)E+=a*v[S]>>>0,v[S]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");w=I,g++}if(p[g]!==" "){for(var P=x-w;P!==x&&v[P]===0;)P++;for(var C=new Uint8Array(y+(x-P)),O=y;P!==x;)C[O++]=v[P++];return C}}}function d(p){var g=f(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:f,decode:d}}var KB=VB,GB=KB;const WB=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},ZB=t=>new TextEncoder().encode(t),YB=t=>new TextDecoder().decode(t);class QB{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class JB{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Y6(this,e)}}class XB{constructor(e){this.decoders=e}or(e){return Y6(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Y6=(t,e)=>new XB({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class e9{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new QB(e,n,r),this.decoder=new JB(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const zl=({name:t,prefix:e,encode:n,decode:r})=>new e9(t,e,n,r),Nc=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=GB(n,e);return zl({prefix:t,name:e,encode:r,decode:i=>WB(s(i))})},t9=(t,e,n,r)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const h=s[t[l]];if(h===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|h,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},n9=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},dt=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>zl({prefix:e,name:t,encode(s){return n9(s,r,n)},decode(s){return t9(s,r,n,t)}}),r9=zl({prefix:"\0",name:"identity",encode:t=>YB(t),decode:t=>ZB(t)}),s9=Object.freeze(Object.defineProperty({__proto__:null,identity:r9},Symbol.toStringTag,{value:"Module"})),i9=dt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),o9=Object.freeze(Object.defineProperty({__proto__:null,base2:i9},Symbol.toStringTag,{value:"Module"})),a9=dt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),c9=Object.freeze(Object.defineProperty({__proto__:null,base8:a9},Symbol.toStringTag,{value:"Module"})),u9=Nc({prefix:"9",name:"base10",alphabet:"0123456789"}),l9=Object.freeze(Object.defineProperty({__proto__:null,base10:u9},Symbol.toStringTag,{value:"Module"})),h9=dt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),f9=dt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),d9=Object.freeze(Object.defineProperty({__proto__:null,base16:h9,base16upper:f9},Symbol.toStringTag,{value:"Module"})),p9=dt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),g9=dt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),y9=dt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),m9=dt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),b9=dt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),w9=dt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),v9=dt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),E9=dt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),x9=dt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),$9=Object.freeze(Object.defineProperty({__proto__:null,base32:p9,base32hex:b9,base32hexpad:v9,base32hexpadupper:E9,base32hexupper:w9,base32pad:y9,base32padupper:m9,base32upper:g9,base32z:x9},Symbol.toStringTag,{value:"Module"})),I9=Nc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_9=Nc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),S9=Object.freeze(Object.defineProperty({__proto__:null,base36:I9,base36upper:_9},Symbol.toStringTag,{value:"Module"})),P9=Nc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),A9=Nc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),O9=Object.freeze(Object.defineProperty({__proto__:null,base58btc:P9,base58flickr:A9},Symbol.toStringTag,{value:"Module"})),C9=dt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),T9=dt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),D9=dt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),B9=dt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),N9=Object.freeze(Object.defineProperty({__proto__:null,base64:C9,base64pad:T9,base64url:D9,base64urlpad:B9},Symbol.toStringTag,{value:"Module"})),Q6=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),R9=Q6.reduce((t,e,n)=>(t[n]=e,t),[]),k9=Q6.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function U9(t){return t.reduce((e,n)=>(e+=R9[n],e),"")}function M9(t){const e=[];for(const n of t){const r=k9[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const L9=zl({prefix:"🚀",name:"base256emoji",encode:U9,decode:M9}),j9=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:L9},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const om={...s9,...o9,...c9,...l9,...d9,...$9,...S9,...O9,...N9,...j9};function J6(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const am=J6("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Jh=J6("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Z6(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),X6={utf8:am,"utf-8":am,hex:om.base16,latin1:Jh,ascii:Jh,binary:Jh,...om};function hn(t,e="utf8"){const n=X6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function Nt(t,e="utf8"){const n=X6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const F9={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var z9={};const q9=":";function so(t){const[e,n]=t.split(q9);return{namespace:e,reference:n}}function cm(t,e=[]){const n=[];return Object.keys(t).forEach(r=>{if(e.length&&!e.includes(r))return;const s=t[r];n.push(...s.accounts)}),n}function e5(t,e){return t.includes(":")?[t]:e.chains||[]}var H9=Object.defineProperty,V9=Object.defineProperties,K9=Object.getOwnPropertyDescriptors,um=Object.getOwnPropertySymbols,G9=Object.prototype.hasOwnProperty,W9=Object.prototype.propertyIsEnumerable,lm=(t,e,n)=>e in t?H9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hm=(t,e)=>{for(var n in e||(e={}))G9.call(e,n)&&lm(t,n,e[n]);if(um)for(var n of um(e))W9.call(e,n)&&lm(t,n,e[n]);return t},Z9=(t,e)=>V9(t,K9(e));const Y9="ReactNative",Gt={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Q9="js";function Gu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function ps(){return!ti()&&!!v0()&&navigator.product===Y9}function J9(){return ps()&&typeof globalThis<"u"&&typeof(globalThis==null?void 0:globalThis.Platform)<"u"&&(globalThis==null?void 0:globalThis.Platform.OS)==="android"}function X9(){return ps()&&typeof globalThis<"u"&&typeof(globalThis==null?void 0:globalThis.Platform)<"u"&&(globalThis==null?void 0:globalThis.Platform.OS)==="ios"}function Go(){return!Gu()&&!!v0()&&!!ti()}function Rc(){return ps()?Gt.reactNative:Gu()?Gt.node:Go()?Gt.browser:Gt.unknown}function fm(){var t;try{return ps()&&typeof globalThis<"u"&&typeof(globalThis==null?void 0:globalThis.Application)<"u"?(t=globalThis.Application)==null?void 0:t.applicationId:void 0}catch{return}}function eN(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function tN(t){var e,n;const r=t5();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),Z9(hm(hm({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function t5(){return G2()||{name:"",description:"",url:"",icons:[""]}}function nN(){if(Rc()===Gt.reactNative&&typeof globalThis<"u"&&typeof(globalThis==null?void 0:globalThis.Platform)<"u"){const{OS:n,Version:r}=globalThis.Platform;return[n,r].join("-")}const t=CO();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function rN(){var t;const e=Rc();return e===Gt.browser?[e,((t=K2())==null?void 0:t.host)||"unknown"].join(":"):e}function n5(t,e,n){const r=nN(),s=rN();return[[t,e].join("-"),[Q9,n].join("-"),r,s].join("/")}function sN({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const u=n.split("?"),l=n5(t,e,r),h={auth:s,ua:l,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},f=eN(u[1]||"",h);return u[0]+"?"+f}function Cs(t,e){return t.filter(n=>e.includes(n)).length===t.length}function Md(t){return Object.fromEntries(t.entries())}function Ld(t){return new Map(Object.entries(t))}function vs(t=J.FIVE_MINUTES,e){const n=J.toMiliseconds(t||J.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const u=new Error(e);o=Promise.reject(u),c(u)},n),r=a,s=c})}}function os(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function r5(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function iN(t){return r5("topic",t)}function oN(t){return r5("id",t)}function s5(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Ge(t,e){return J.fromMiliseconds(Date.now()+J.toMiliseconds(t))}function Zr(t){return Date.now()>=J.toMiliseconds(t)}function ve(t,e){return`${t}${e?`:${e}`:""}`}function rr(t=[],e=[]){return[...new Set([...t,...e])]}async function aN({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=cN(i,t,e),a=Rc();if(a===Gt.browser){if(!((r=ti())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}uN(o)}else a===Gt.reactNative&&typeof(globalThis==null?void 0:globalThis.Linking)<"u"&&await globalThis.Linking.openURL(o)}catch(s){console.error(s)}}function cN(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${dN(r,!0)}`}else s=`${s}/wc?${r}`;return s}function uN(t){let e="_self";fN()?e="_top":(hN()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function lN(t,e){let n="";try{if(Go()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function dm(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function pm(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function R0(){return typeof process<"u"&&z9.IS_VITEST==="true"}function hN(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function fN(){try{return window.self!==window.top}catch{return!1}}function dN(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function i5(t){return Buffer.from(t,"base64").toString("utf-8")}function pN(t){return new Promise(e=>setTimeout(e,t))}function nc(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function gN(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function kc(t,...e){if(!gN(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function k0(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");nc(t.outputLen),nc(t.blockLen)}function Oo(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function o5(t,e){kc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const uu=BigInt(2**32-1),gm=BigInt(32);function yN(t,e=!1){return e?{h:Number(t&uu),l:Number(t>>gm&uu)}:{h:Number(t>>gm&uu)|0,l:Number(t&uu)|0}}function mN(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=yN(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const bN=(t,e,n)=>t<<n|e>>>32-n,wN=(t,e,n)=>e<<n|t>>>32-n,vN=(t,e,n)=>e<<n-32|t>>>64-n,EN=(t,e,n)=>t<<n-32|e>>>64-n,Pi=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function xN(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Xh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Hn(t,e){return t<<32-e|t>>>e}const ym=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function $N(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function mm(t){for(let e=0;e<t.length;e++)t[e]=$N(t[e])}function IN(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Co(t){return typeof t=="string"&&(t=IN(t)),kc(t),t}function _N(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];kc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let U0=class{clone(){return this._cloneInto()}};function a5(t){const e=r=>t().update(Co(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Wo(t=32){if(Pi&&typeof Pi.getRandomValues=="function")return Pi.getRandomValues(new Uint8Array(t));if(Pi&&typeof Pi.randomBytes=="function")return Pi.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const c5=[],u5=[],l5=[],SN=BigInt(0),ua=BigInt(1),PN=BigInt(2),AN=BigInt(7),ON=BigInt(256),CN=BigInt(113);for(let t=0,e=ua,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],c5.push(2*(5*r+n)),u5.push((t+1)*(t+2)/2%64);let s=SN;for(let i=0;i<7;i++)e=(e<<ua^(e>>AN)*CN)%ON,e&PN&&(s^=ua<<(ua<<BigInt(i))-ua);l5.push(s)}const[TN,DN]=mN(l5,!0),bm=(t,e,n)=>n>32?vN(t,e,n):bN(t,e,n),wm=(t,e,n)=>n>32?EN(t,e,n):wN(t,e,n);function BN(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],h=bm(u,l,1)^n[a],f=wm(u,l,1)^n[a+1];for(let d=0;d<50;d+=10)t[o+d]^=h,t[o+d+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=u5[o],c=bm(s,i,a),u=wm(s,i,a),l=c5[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=TN[r],t[1]^=DN[r]}n.fill(0)}let NN=class h5 extends U0{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,nc(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=xN(this.state)}keccak(){ym||mm(this.state32),BN(this.state32,this.rounds),ym||mm(this.state32),this.posOut=0,this.pos=0}update(e){Oo(this);const{blockLen:n,state:r}=this;e=Co(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Oo(this,!1),kc(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return nc(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(o5(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new h5(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const RN=(t,e,n)=>a5(()=>new NN(e,t,n)),kN=RN(1,136,256/8),UN="https://rpc.walletconnect.org/v1";function f5(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(kN(n)).toString("hex")}async function MN(t,e,n,r,s,i){switch(n.t){case"eip191":return await LN(t,e,n.s);case"eip1271":return await jN(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function LN(t,e,n){return(await a4({hash:f5(e),signature:n})).toLowerCase()===t.toLowerCase()}async function jN(t,e,n,r,s,i){const o=so(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",u="0000000000000000000000000000000000000000000000000000000000000041",l=n.substring(2),h=f5(e).substring(2),f=a+h+c+u+l,d=await fetch(`${i||UN}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:FN(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:f},"latest"]})}),{result:p}=await d.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function FN(){return Date.now()+Math.floor(Math.random()*1e3)}function zN(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return J4.encode(i)}var qN=Object.defineProperty,HN=Object.defineProperties,VN=Object.getOwnPropertyDescriptors,vm=Object.getOwnPropertySymbols,KN=Object.prototype.hasOwnProperty,GN=Object.prototype.propertyIsEnumerable,Em=(t,e,n)=>e in t?qN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,WN=(t,e)=>{for(var n in e||(e={}))KN.call(e,n)&&Em(t,n,e[n]);if(vm)for(var n of vm(e))GN.call(e,n)&&Em(t,n,e[n]);return t},ZN=(t,e)=>HN(t,VN(e));const YN="did:pkh:",M0=t=>t==null?void 0:t.split(":"),QN=t=>{const e=t&&M0(t);if(e)return t.includes(YN)?e[3]:e[1]},jd=t=>{const e=t&&M0(t);if(e)return e[2]+":"+e[3]},Wu=t=>{const e=t&&M0(t);if(e)return e.pop()};async function xm(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=d5(s,s.iss),o=Wu(s.iss);return await MN(o,i,r,jd(s.iss),n)}const d5=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=Wu(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${QN(e)}`,c=`Nonce: ${t.nonce}`,u=`Issued At: ${t.iat}`,l=t.exp?`Expiration Time: ${t.exp}`:void 0,h=t.nbf?`Not Before: ${t.nbf}`:void 0,f=t.requestId?`Request ID: ${t.requestId}`:void 0,d=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=Au(t.resources);if(p){const g=rc(p);s=oR(s,g)}return[n,r,"",s,"",i,o,a,c,u,l,h,f,d].filter(g=>g!=null).join(`
`)};function JN(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function XN(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function ii(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function eR(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:tR(e,n,r)}}}function tR(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function p5(t){return ii(t),`urn:recap:${JN(t).replace(/=/g,"")}`}function rc(t){const e=XN(t.replace("urn:recap:",""));return ii(e),e}function nR(t,e,n){const r=eR(t,e,n);return p5(r)}function rR(t){return t&&t.includes("urn:recap:")}function sR(t,e){const n=rc(t),r=rc(e),s=iR(n,r);return p5(s)}function iR(t,e){ii(t),ii(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,u;r.att[s]=ZN(WN({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((u=e.att[s])==null?void 0:u[a])})})}),r}function oR(t="",e){ii(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(h=>({ability:h.split("/")[0],action:h.split("/")[1]}));c.sort((h,f)=>h.action.localeCompare(f.action));const u={};c.forEach(h=>{u[h.ability]||(u[h.ability]=[]),u[h.ability].push(h.action)});const l=Object.keys(u).map(h=>(s++,`(${s}) '${h}': '${u[h].join("', '")}' for '${a}'.`));r.push(l.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function $m(t){var e;const n=rc(t);ii(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function Im(t){const e=rc(t);ii(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function Au(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return rR(e)?e:void 0}function ef(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function g5(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Vt(t,...e){if(!g5(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function _m(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function aR(t,e){Vt(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Sm(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const ls=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),cR=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),uR=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!uR)throw new Error("Non little-endian hardware is not supported");function lR(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Fd(t){if(typeof t=="string")t=lR(t);else if(g5(t))t=zd(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function hR(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function fR(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const dR=(t,e)=>{function n(r,...s){if(Vt(r),t.nonceLength!==void 0){const u=s[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?Vt(u):Vt(u,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Vt(s[1]);const o=e(r,...s),a=(u,l)=>{if(l!==void 0){if(u!==2)throw new Error("cipher output not supported");Vt(l)}};let c=!1;return{encrypt(u,l){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Vt(u),a(o.encrypt.length,l),o.encrypt(u,l)},decrypt(u,l){if(Vt(u),i&&u.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,l),o.decrypt(u,l)}}}return Object.assign(n,t),n};function Pm(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!pR(e))throw new Error("invalid output, must be aligned");return e}function Am(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function pR(t){return t.byteOffset%4===0}function zd(t){return Uint8Array.from(t)}function To(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const y5=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),gR=y5("expand 16-byte k"),yR=y5("expand 32-byte k"),mR=ls(gR),bR=ls(yR);function ge(t,e){return t<<e|t>>>32-e}function qd(t){return t.byteOffset%4===0}const lu=64,wR=16,m5=2**32-1,Om=new Uint32Array;function vR(t,e,n,r,s,i,o,a){const c=s.length,u=new Uint8Array(lu),l=ls(u),h=qd(s)&&qd(i),f=h?ls(s):Om,d=h?ls(i):Om;for(let p=0;p<c;o++){if(t(e,n,r,l,o,a),o>=m5)throw new Error("arx: counter overflow");const g=Math.min(lu,c-p);if(h&&g===lu){const y=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let w=0,x;w<wR;w++)x=y+w,d[x]=f[x]^l[w];p+=lu;continue}for(let y=0,w;y<g;y++)w=p+y,i[w]=s[w]^u[y];p+=g}}function ER(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=hR({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return ef(s),ef(o),Sm(i),Sm(n),(a,c,u,l,h=0)=>{Vt(a),Vt(c),Vt(u);const f=u.length;if(l===void 0&&(l=new Uint8Array(f)),Vt(l),ef(h),h<0||h>=m5)throw new Error("arx: counter overflow");if(l.length<f)throw new Error(`arx: output (${l.length}) is shorter than data (${f})`);const d=[];let p=a.length,g,y;if(p===32)d.push(g=zd(a)),y=bR;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),y=mR,d.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);qd(c)||d.push(c=zd(c));const w=ls(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,w,ls(c.subarray(0,16)),w),c=c.subarray(16)}const x=16-s;if(x!==c.length)throw new Error(`arx: nonce must be ${x} or 16 bytes`);if(x!==12){const E=new Uint8Array(12);E.set(c,i?0:12-c.length),c=E,d.push(c)}const v=ls(c);return vR(t,y,w,v,u,l,h,o),To(...d),l}}const ot=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class xR{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Fd(e),Vt(e,32);const n=ot(e,0),r=ot(e,2),s=ot(e,4),i=ot(e,6),o=ot(e,8),a=ot(e,10),c=ot(e,12),u=ot(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=ot(e,16+2*l)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],u=o[2],l=o[3],h=o[4],f=o[5],d=o[6],p=o[7],g=o[8],y=o[9],w=ot(e,n+0),x=ot(e,n+2),v=ot(e,n+4),E=ot(e,n+6),I=ot(e,n+8),S=ot(e,n+10),P=ot(e,n+12),C=ot(e,n+14);let O=i[0]+(w&8191),j=i[1]+((w>>>13|x<<3)&8191),k=i[2]+((x>>>10|v<<6)&8191),L=i[3]+((v>>>7|E<<9)&8191),F=i[4]+((E>>>4|I<<12)&8191),R=i[5]+(I>>>1&8191),$=i[6]+((I>>>14|S<<2)&8191),_=i[7]+((S>>>11|P<<5)&8191),B=i[8]+((P>>>8|C<<8)&8191),D=i[9]+(C>>>5|s),N=0,U=N+O*a+j*(5*y)+k*(5*g)+L*(5*p)+F*(5*d);N=U>>>13,U&=8191,U+=R*(5*f)+$*(5*h)+_*(5*l)+B*(5*u)+D*(5*c),N+=U>>>13,U&=8191;let z=N+O*c+j*a+k*(5*y)+L*(5*g)+F*(5*p);N=z>>>13,z&=8191,z+=R*(5*d)+$*(5*f)+_*(5*h)+B*(5*l)+D*(5*u),N+=z>>>13,z&=8191;let V=N+O*u+j*c+k*a+L*(5*y)+F*(5*g);N=V>>>13,V&=8191,V+=R*(5*p)+$*(5*d)+_*(5*f)+B*(5*h)+D*(5*l),N+=V>>>13,V&=8191;let Q=N+O*l+j*u+k*c+L*a+F*(5*y);N=Q>>>13,Q&=8191,Q+=R*(5*g)+$*(5*p)+_*(5*d)+B*(5*f)+D*(5*h),N+=Q>>>13,Q&=8191;let W=N+O*h+j*l+k*u+L*c+F*a;N=W>>>13,W&=8191,W+=R*(5*y)+$*(5*g)+_*(5*p)+B*(5*d)+D*(5*f),N+=W>>>13,W&=8191;let ee=N+O*f+j*h+k*l+L*u+F*c;N=ee>>>13,ee&=8191,ee+=R*a+$*(5*y)+_*(5*g)+B*(5*p)+D*(5*d),N+=ee>>>13,ee&=8191;let te=N+O*d+j*f+k*h+L*l+F*u;N=te>>>13,te&=8191,te+=R*c+$*a+_*(5*y)+B*(5*g)+D*(5*p),N+=te>>>13,te&=8191;let oe=N+O*p+j*d+k*f+L*h+F*l;N=oe>>>13,oe&=8191,oe+=R*u+$*c+_*a+B*(5*y)+D*(5*g),N+=oe>>>13,oe&=8191;let ie=N+O*g+j*p+k*d+L*f+F*h;N=ie>>>13,ie&=8191,ie+=R*l+$*u+_*c+B*a+D*(5*y),N+=ie>>>13,ie&=8191;let re=N+O*y+j*g+k*p+L*d+F*f;N=re>>>13,re&=8191,re+=R*h+$*l+_*u+B*c+D*a,N+=re>>>13,re&=8191,N=(N<<2)+N|0,N=N+U|0,U=N&8191,N=N>>>13,z+=N,i[0]=U,i[1]=z,i[2]=V,i[3]=Q,i[4]=W,i[5]=ee,i[6]=te,i[7]=oe,i[8]=ie,i[9]=re}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;To(r)}update(e){_m(this);const{buffer:n,blockLen:r}=this;e=Fd(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){To(this.h,this.r,this.buffer,this.pad)}digestInto(e){_m(this),aR(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function $R(t){const e=(r,s)=>t(s).update(Fd(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const IR=$R(t=>new xR(t));function _R(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],u=t[3],l=e[0],h=e[1],f=e[2],d=e[3],p=e[4],g=e[5],y=e[6],w=e[7],x=s,v=n[0],E=n[1],I=n[2],S=o,P=a,C=c,O=u,j=l,k=h,L=f,F=d,R=p,$=g,_=y,B=w,D=x,N=v,U=E,z=I;for(let Q=0;Q<i;Q+=2)S=S+j|0,D=ge(D^S,16),R=R+D|0,j=ge(j^R,12),S=S+j|0,D=ge(D^S,8),R=R+D|0,j=ge(j^R,7),P=P+k|0,N=ge(N^P,16),$=$+N|0,k=ge(k^$,12),P=P+k|0,N=ge(N^P,8),$=$+N|0,k=ge(k^$,7),C=C+L|0,U=ge(U^C,16),_=_+U|0,L=ge(L^_,12),C=C+L|0,U=ge(U^C,8),_=_+U|0,L=ge(L^_,7),O=O+F|0,z=ge(z^O,16),B=B+z|0,F=ge(F^B,12),O=O+F|0,z=ge(z^O,8),B=B+z|0,F=ge(F^B,7),S=S+k|0,z=ge(z^S,16),_=_+z|0,k=ge(k^_,12),S=S+k|0,z=ge(z^S,8),_=_+z|0,k=ge(k^_,7),P=P+L|0,D=ge(D^P,16),B=B+D|0,L=ge(L^B,12),P=P+L|0,D=ge(D^P,8),B=B+D|0,L=ge(L^B,7),C=C+F|0,N=ge(N^C,16),R=R+N|0,F=ge(F^R,12),C=C+F|0,N=ge(N^C,8),R=R+N|0,F=ge(F^R,7),O=O+j|0,U=ge(U^O,16),$=$+U|0,j=ge(j^$,12),O=O+j|0,U=ge(U^O,8),$=$+U|0,j=ge(j^$,7);let V=0;r[V++]=o+S|0,r[V++]=a+P|0,r[V++]=c+C|0,r[V++]=u+O|0,r[V++]=l+j|0,r[V++]=h+k|0,r[V++]=f+L|0,r[V++]=d+F|0,r[V++]=p+R|0,r[V++]=g+$|0,r[V++]=y+_|0,r[V++]=w+B|0,r[V++]=x+D|0,r[V++]=v+N|0,r[V++]=E+U|0,r[V++]=I+z|0}const SR=ER(_R,{counterRight:!1,counterLength:4,allowShortKeys:!1}),PR=new Uint8Array(16),Cm=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(PR.subarray(n))},AR=new Uint8Array(32);function Tm(t,e,n,r,s){const i=t(e,n,AR),o=IR.create(i);s&&Cm(o,s),Cm(o,r);const a=new Uint8Array(16),c=cR(a);Am(c,0,BigInt(s?s.length:0),!0),Am(c,8,BigInt(r.length),!0),o.update(a);const u=o.digest();return To(i,a),u}const OR=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=Pm(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=Tm(t,e,n,a,r);return i.set(c,o),To(c),i},decrypt(s,i){i=Pm(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=Tm(t,e,n,o,r);if(!fR(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),To(c),i}}),b5=dR({blockSize:64,nonceLength:12,tagLength:16},OR(SR));let w5=class extends U0{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,k0(e);const r=Co(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Oo(this),this.iHash.update(e),this}digestInto(e){Oo(this),kc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const ql=(t,e,n)=>new w5(t,e).update(n).digest();ql.create=(t,e)=>new w5(t,e);function CR(t,e,n){return k0(t),n===void 0&&(n=new Uint8Array(t.outputLen)),ql(t,Co(n),Co(e))}const tf=new Uint8Array([0]),Dm=new Uint8Array;function TR(t,e,n,r=32){if(k0(t),nc(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=Dm);const i=new Uint8Array(s*t.outputLen),o=ql.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let u=0;u<s;u++)tf[0]=u+1,a.update(u===0?Dm:c).update(n).update(tf).digestInto(c),i.set(c,t.outputLen*u),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),tf.fill(0),i.slice(0,r)}const DR=(t,e,n,r,s)=>TR(t,CR(t,e,n),r,s);function BR(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function NR(t,e,n){return t&e^~t&n}function RR(t,e,n){return t&e^t&n^e&n}let kR=class extends U0{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Xh(this.buffer)}update(e){Oo(this);const{view:n,buffer:r,blockLen:s}=this;e=Co(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Xh(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Oo(this),o5(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let h=o;h<s;h++)n[h]=0;BR(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Xh(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,l[h],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const UR=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Vr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Kr=new Uint32Array(64);class MR extends kR{constructor(){super(64,32,8,!1),this.A=Vr[0]|0,this.B=Vr[1]|0,this.C=Vr[2]|0,this.D=Vr[3]|0,this.E=Vr[4]|0,this.F=Vr[5]|0,this.G=Vr[6]|0,this.H=Vr[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let h=0;h<16;h++,n+=4)Kr[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const f=Kr[h-15],d=Kr[h-2],p=Hn(f,7)^Hn(f,18)^f>>>3,g=Hn(d,17)^Hn(d,19)^d>>>10;Kr[h]=g+Kr[h-7]+p+Kr[h-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let h=0;h<64;h++){const f=Hn(a,6)^Hn(a,11)^Hn(a,25),d=l+f+NR(a,c,u)+UR[h]+Kr[h]|0,p=(Hn(r,2)^Hn(r,13)^Hn(r,22))+RR(r,s,i)|0;l=u,u=c,c=a,a=o+d|0,o=i,i=s,s=r,r=d+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,c,u,l)}roundClean(){Kr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Uc=a5(()=>new MR);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hl=BigInt(0),Vl=BigInt(1),LR=BigInt(2);function oi(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Mc(t){if(!oi(t))throw new Error("Uint8Array expected")}function Do(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const jR=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Bo(t){Mc(t);let e="";for(let n=0;n<t.length;n++)e+=jR[t[n]];return e}function Qi(t){const e=t.toString(16);return e.length&1?"0"+e:e}function L0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Hl:BigInt("0x"+t)}const dr={_0:48,_9:57,A:65,F:70,a:97,f:102};function Bm(t){if(t>=dr._0&&t<=dr._9)return t-dr._0;if(t>=dr.A&&t<=dr.F)return t-(dr.A-10);if(t>=dr.a&&t<=dr.f)return t-(dr.a-10)}function No(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Bm(t.charCodeAt(i)),a=Bm(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Hs(t){return L0(Bo(t))}function sc(t){return Mc(t),L0(Bo(Uint8Array.from(t).reverse()))}function Ro(t,e){return No(t.toString(16).padStart(e*2,"0"))}function Kl(t,e){return Ro(t,e).reverse()}function FR(t){return No(Qi(t))}function Ht(t,e,n){let r;if(typeof e=="string")try{r=No(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(oi(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function ic(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Mc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function zR(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function qR(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const nf=t=>typeof t=="bigint"&&Hl<=t;function Gl(t,e,n){return nf(t)&&nf(e)&&nf(n)&&e<=t&&t<n}function Or(t,e,n,r){if(!Gl(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function v5(t){let e;for(e=0;t>Hl;t>>=Vl,e+=1);return e}function HR(t,e){return t>>BigInt(e)&Vl}function VR(t,e,n){return t|(n?Vl:Hl)<<BigInt(e)}const j0=t=>(LR<<BigInt(t-1))-Vl,rf=t=>new Uint8Array(t),Nm=t=>Uint8Array.from(t);function E5(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=rf(t),s=rf(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...l)=>n(s,r,...l),c=(l=rf())=>{s=a(Nm([0]),l),r=a(),l.length!==0&&(s=a(Nm([1]),l),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const h=[];for(;l<e;){r=a();const f=r.slice();h.push(f),l+=r.length}return ic(...h)};return(l,h)=>{o(),c(l);let f;for(;!(f=h(u()));)c();return o(),f}}const KR={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||oi(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Zo(t,e,n={}){const r=(s,i,o)=>{const a=KR[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const GR=()=>{throw new Error("not implemented")};function Hd(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var WR=Object.freeze({__proto__:null,isBytes:oi,abytes:Mc,abool:Do,bytesToHex:Bo,numberToHexUnpadded:Qi,hexToNumber:L0,hexToBytes:No,bytesToNumberBE:Hs,bytesToNumberLE:sc,numberToBytesBE:Ro,numberToBytesLE:Kl,numberToVarBytesBE:FR,ensureBytes:Ht,concatBytes:ic,equalBytes:zR,utf8ToBytes:qR,inRange:Gl,aInRange:Or,bitLen:v5,bitGet:HR,bitSet:VR,bitMask:j0,createHmacDrbg:E5,validateObject:Zo,notImplemented:GR,memoized:Hd});const it=BigInt(0),je=BigInt(1),Is=BigInt(2),ZR=BigInt(3),Vd=BigInt(4),Rm=BigInt(5),km=BigInt(8);function Dt(t,e){const n=t%e;return n>=it?n:e+n}function x5(t,e,n){if(e<it)throw new Error("invalid exponent, negatives unsupported");if(n<=it)throw new Error("invalid modulus");if(n===je)return it;let r=je;for(;e>it;)e&je&&(r=r*t%n),t=t*t%n,e>>=je;return r}function $n(t,e,n){let r=t;for(;e-- >it;)r*=r,r%=n;return r}function Kd(t,e){if(t===it)throw new Error("invert: expected non-zero number");if(e<=it)throw new Error("invert: expected positive modulus, got "+e);let n=Dt(t,e),r=e,s=it,i=je;for(;n!==it;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==je)throw new Error("invert: does not exist");return Dt(s,e)}function YR(t){const e=(t-je)/Is;let n,r,s;for(n=t-je,r=0;n%Is===it;n/=Is,r++);for(s=Is;s<t&&x5(s,e,t)!==t-je;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+je)/Vd;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(n+je)/Is;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,u=o.pow(o.mul(o.ONE,s),n),l=o.pow(a,i),h=o.pow(a,n);for(;!o.eql(h,o.ONE);){if(o.eql(h,o.ZERO))return o.ZERO;let f=1;for(let p=o.sqr(h);f<c&&!o.eql(p,o.ONE);f++)p=o.sqr(p);const d=o.pow(u,je<<BigInt(c-f-1));u=o.sqr(d),l=o.mul(l,d),h=o.mul(h,u),c=f}return l}}function QR(t){if(t%Vd===ZR){const e=(t+je)/Vd;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%km===Rm){const e=(t-Rm)/km;return function(n,r){const s=n.mul(r,Is),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Is),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return YR(t)}const JR=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function XR(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=JR.reduce((r,s)=>(r[s]="function",r),e);return Zo(t,n)}function ek(t,e,n){if(n<it)throw new Error("invalid exponent, negatives unsupported");if(n===it)return t.ONE;if(n===je)return e;let r=t.ONE,s=e;for(;n>it;)n&je&&(r=t.mul(r,s)),s=t.sqr(s),n>>=je;return r}function tk(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function $5(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function I5(t,e,n=!1,r={}){if(t<=it)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=$5(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:j0(s),ZERO:it,ONE:je,create:c=>Dt(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return it<=c&&c<t},is0:c=>c===it,isOdd:c=>(c&je)===je,neg:c=>Dt(-c,t),eql:(c,u)=>c===u,sqr:c=>Dt(c*c,t),add:(c,u)=>Dt(c+u,t),sub:(c,u)=>Dt(c-u,t),mul:(c,u)=>Dt(c*u,t),pow:(c,u)=>ek(a,c,u),div:(c,u)=>Dt(c*Kd(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Kd(c,t),sqrt:r.sqrt||(c=>(o||(o=QR(t)),o(a,c))),invertBatch:c=>tk(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>n?Kl(c,i):Ro(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?sc(c):Hs(c)}});return Object.freeze(a)}function _5(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function S5(t){const e=_5(t);return e+Math.ceil(e/2)}function nk(t,e,n=!1){const r=t.length,s=_5(e),i=S5(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?sc(t):Hs(t),a=Dt(o,e-je)+je;return n?Kl(a,s):Ro(a,s)}const Um=BigInt(0),hu=BigInt(1);function sf(t,e){const n=e.negate();return t?n:e}function P5(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function of(t,e){P5(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function rk(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function sk(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const af=new WeakMap,A5=new WeakMap;function cf(t){return A5.get(t)||1}function ik(t,e){return{constTimeNegate:sf,hasPrecomputes(n){return cf(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Um;)r&hu&&(s=s.add(i)),i=i.double(),r>>=hu;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=of(r,e),o=[];let a=n,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=of(n,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**n-1),l=2**n,h=BigInt(n);for(let f=0;f<i;f++){const d=f*o;let p=Number(s&u);s>>=h,p>o&&(p-=l,s+=hu);const g=d,y=d+Math.abs(p)-1,w=f%2!==0,x=p<0;p===0?c=c.add(sf(w,r[g])):a=a.add(sf(x,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=of(n,e),c=BigInt(2**n-1),u=2**n,l=BigInt(n);for(let h=0;h<o;h++){const f=h*a;if(s===Um)break;let d=Number(s&c);if(s>>=l,d>a&&(d-=u,s+=hu),d===0)continue;let p=r[f+Math.abs(d)-1];d<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=af.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&af.set(r,s(i))),i},wNAFCached(n,r,s){const i=cf(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=cf(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){P5(r,e),A5.set(n,r),af.delete(n)}}}function ok(t,e,n,r){if(rk(n,t),sk(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=v5(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),u=Math.floor((e.BITS-1)/o)*o;let l=s;for(let h=u;h>=0;h-=o){c.fill(s);for(let d=0;d<r.length;d++){const p=r[d],g=Number(p>>BigInt(h)&BigInt(a));c[g]=c[g].add(n[d])}let f=s;for(let d=c.length-1,p=s;d>0;d--)p=p.add(c[d]),f=f.add(p);if(l=l.add(f),h!==0)for(let d=0;d<o;d++)l=l.double()}return l}function O5(t){return XR(t.Fp),Zo(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...$5(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Ai=BigInt(0),uf=BigInt(1);function ak(t){return Zo(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function ck(t){const e=ak(t),{P:n}=e,r=x=>Dt(x,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(x=>x),c=e.powPminus2||(x=>x5(x,n-BigInt(2),n));function u(x,v,E){const I=r(x*(v-E));return v=r(v-I),E=r(E+I),[v,E]}const l=(e.a-BigInt(2))/BigInt(4);function h(x,v){Or("u",x,Ai,n),Or("scalar",v,Ai,n);const E=v,I=x;let S=uf,P=Ai,C=x,O=uf,j=Ai,k;for(let F=BigInt(s-1);F>=Ai;F--){const R=E>>F&uf;j^=R,k=u(j,S,C),S=k[0],C=k[1],k=u(j,P,O),P=k[0],O=k[1],j=R;const $=S+P,_=r($*$),B=S-P,D=r(B*B),N=_-D,U=C+O,z=C-O,V=r(z*$),Q=r(U*B),W=V+Q,ee=V-Q;C=r(W*W),O=r(I*r(ee*ee)),S=r(_*D),P=r(N*(_+r(l*N)))}k=u(j,S,C),S=k[0],C=k[1],k=u(j,P,O),P=k[0],O=k[1];const L=c(P);return r(S*L)}function f(x){return Kl(r(x),i)}function d(x){const v=Ht("u coordinate",x,i);return o===32&&(v[31]&=127),sc(v)}function p(x){const v=Ht("scalar",x),E=v.length;if(E!==i&&E!==o){let I=""+i+" or "+o;throw new Error("invalid scalar, expected "+I+" bytes, got "+E)}return sc(a(v))}function g(x,v){const E=d(v),I=p(x),S=h(E,I);if(S===Ai)throw new Error("invalid private or public key received");return f(S)}const y=f(e.Gu);function w(x){return g(x,y)}return{scalarMult:g,scalarMultBase:w,getSharedSecret:(x,v)=>g(x,v),getPublicKey:x=>w(x),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:y}}const Gd=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const uk=BigInt(1),Mm=BigInt(2),lk=BigInt(3),hk=BigInt(5);BigInt(8);function fk(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=Gd,o=t*t%i*t%i,a=$n(o,Mm,i)*o%i,c=$n(a,uk,i)*t%i,u=$n(c,hk,i)*c%i,l=$n(u,e,i)*u%i,h=$n(l,n,i)*l%i,f=$n(h,r,i)*h%i,d=$n(f,s,i)*f%i,p=$n(d,s,i)*f%i,g=$n(p,e,i)*u%i;return{pow_p_5_8:$n(g,Mm,i)*t%i,b2:o}}function dk(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Wd=ck({P:Gd,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=Gd,{pow_p_5_8:n,b2:r}=fk(t);return Dt($n(n,lk,e)*r,e)},adjustScalarBytes:dk,randomBytes:Wo});function Lm(t){t.lowS!==void 0&&Do("lowS",t.lowS),t.prehash!==void 0&&Do("prehash",t.prehash)}function pk(t){const e=O5(t);Zo(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:gk,hexToBytes:yk}=WR;class mk extends Error{constructor(e=""){super(e)}}const vr={Err:mk,_tlv:{encode:(t,e)=>{const{Err:n}=vr;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Qi(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Qi(s.length/2|128):"";return Qi(t)+i+s+e},decode(t,e){const{Err:n}=vr;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=vr;if(t<_r)throw new e("integer: negative integers are not allowed");let n=Qi(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=vr;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return gk(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=vr,s=typeof t=="string"?yk(t):t;Mc(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=vr,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},_r=BigInt(0),tt=BigInt(1);BigInt(2);const jm=BigInt(3);BigInt(4);function bk(t){const e=pk(t),{Fp:n}=e,r=I5(e.n,e.nBitLength),s=e.toBytes||((g,y,w)=>{const x=y.toAffine();return ic(Uint8Array.from([4]),n.toBytes(x.x),n.toBytes(x.y))}),i=e.fromBytes||(g=>{const y=g.subarray(1),w=n.fromBytes(y.subarray(0,n.BYTES)),x=n.fromBytes(y.subarray(n.BYTES,2*n.BYTES));return{x:w,y:x}});function o(g){const{a:y,b:w}=e,x=n.sqr(g),v=n.mul(x,g);return n.add(n.add(v,n.mul(g,y)),w)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return Gl(g,tt,e.n)}function c(g){const{allowedPrivateKeyLengths:y,nByteLength:w,wrapPrivateKey:x,n:v}=e;if(y&&typeof g!="bigint"){if(oi(g)&&(g=Bo(g)),typeof g!="string"||!y.includes(g.length))throw new Error("invalid private key");g=g.padStart(w*2,"0")}let E;try{E=typeof g=="bigint"?g:Hs(Ht("private key",g,w))}catch{throw new Error("invalid private key, expected hex or "+w+" bytes, got "+typeof g)}return x&&(E=Dt(E,v)),Or("private key",E,tt,v),E}function u(g){if(!(g instanceof f))throw new Error("ProjectivePoint expected")}const l=Hd((g,y)=>{const{px:w,py:x,pz:v}=g;if(n.eql(v,n.ONE))return{x:w,y:x};const E=g.is0();y==null&&(y=E?n.ONE:n.inv(v));const I=n.mul(w,y),S=n.mul(x,y),P=n.mul(v,y);if(E)return{x:n.ZERO,y:n.ZERO};if(!n.eql(P,n.ONE))throw new Error("invZ was invalid");return{x:I,y:S}}),h=Hd(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:y,y:w}=g.toAffine();if(!n.isValid(y)||!n.isValid(w))throw new Error("bad point: x or y not FE");const x=n.sqr(w),v=o(y);if(!n.eql(x,v))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class f{constructor(y,w,x){if(this.px=y,this.py=w,this.pz=x,y==null||!n.isValid(y))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(x==null||!n.isValid(x))throw new Error("z required");Object.freeze(this)}static fromAffine(y){const{x:w,y:x}=y||{};if(!y||!n.isValid(w)||!n.isValid(x))throw new Error("invalid affine point");if(y instanceof f)throw new Error("projective point not allowed");const v=E=>n.eql(E,n.ZERO);return v(w)&&v(x)?f.ZERO:new f(w,x,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const w=n.invertBatch(y.map(x=>x.pz));return y.map((x,v)=>x.toAffine(w[v])).map(f.fromAffine)}static fromHex(y){const w=f.fromAffine(i(Ht("pointHex",y)));return w.assertValidity(),w}static fromPrivateKey(y){return f.BASE.multiply(c(y))}static msm(y,w){return ok(f,r,y,w)}_setWindowSize(y){p.setWindowSize(this,y)}assertValidity(){h(this)}hasEvenY(){const{y}=this.toAffine();if(n.isOdd)return!n.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){u(y);const{px:w,py:x,pz:v}=this,{px:E,py:I,pz:S}=y,P=n.eql(n.mul(w,S),n.mul(E,v)),C=n.eql(n.mul(x,S),n.mul(I,v));return P&&C}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:y,b:w}=e,x=n.mul(w,jm),{px:v,py:E,pz:I}=this;let S=n.ZERO,P=n.ZERO,C=n.ZERO,O=n.mul(v,v),j=n.mul(E,E),k=n.mul(I,I),L=n.mul(v,E);return L=n.add(L,L),C=n.mul(v,I),C=n.add(C,C),S=n.mul(y,C),P=n.mul(x,k),P=n.add(S,P),S=n.sub(j,P),P=n.add(j,P),P=n.mul(S,P),S=n.mul(L,S),C=n.mul(x,C),k=n.mul(y,k),L=n.sub(O,k),L=n.mul(y,L),L=n.add(L,C),C=n.add(O,O),O=n.add(C,O),O=n.add(O,k),O=n.mul(O,L),P=n.add(P,O),k=n.mul(E,I),k=n.add(k,k),O=n.mul(k,L),S=n.sub(S,O),C=n.mul(k,j),C=n.add(C,C),C=n.add(C,C),new f(S,P,C)}add(y){u(y);const{px:w,py:x,pz:v}=this,{px:E,py:I,pz:S}=y;let P=n.ZERO,C=n.ZERO,O=n.ZERO;const j=e.a,k=n.mul(e.b,jm);let L=n.mul(w,E),F=n.mul(x,I),R=n.mul(v,S),$=n.add(w,x),_=n.add(E,I);$=n.mul($,_),_=n.add(L,F),$=n.sub($,_),_=n.add(w,v);let B=n.add(E,S);return _=n.mul(_,B),B=n.add(L,R),_=n.sub(_,B),B=n.add(x,v),P=n.add(I,S),B=n.mul(B,P),P=n.add(F,R),B=n.sub(B,P),O=n.mul(j,_),P=n.mul(k,R),O=n.add(P,O),P=n.sub(F,O),O=n.add(F,O),C=n.mul(P,O),F=n.add(L,L),F=n.add(F,L),R=n.mul(j,R),_=n.mul(k,_),F=n.add(F,R),R=n.sub(L,R),R=n.mul(j,R),_=n.add(_,R),L=n.mul(F,_),C=n.add(C,L),L=n.mul(B,_),P=n.mul($,P),P=n.sub(P,L),L=n.mul($,F),O=n.mul(B,O),O=n.add(O,L),new f(P,C,O)}subtract(y){return this.add(y.negate())}is0(){return this.equals(f.ZERO)}wNAF(y){return p.wNAFCached(this,y,f.normalizeZ)}multiplyUnsafe(y){const{endo:w,n:x}=e;Or("scalar",y,_r,x);const v=f.ZERO;if(y===_r)return v;if(this.is0()||y===tt)return this;if(!w||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,y,f.normalizeZ);let{k1neg:E,k1:I,k2neg:S,k2:P}=w.splitScalar(y),C=v,O=v,j=this;for(;I>_r||P>_r;)I&tt&&(C=C.add(j)),P&tt&&(O=O.add(j)),j=j.double(),I>>=tt,P>>=tt;return E&&(C=C.negate()),S&&(O=O.negate()),O=new f(n.mul(O.px,w.beta),O.py,O.pz),C.add(O)}multiply(y){const{endo:w,n:x}=e;Or("scalar",y,tt,x);let v,E;if(w){const{k1neg:I,k1:S,k2neg:P,k2:C}=w.splitScalar(y);let{p:O,f:j}=this.wNAF(S),{p:k,f:L}=this.wNAF(C);O=p.constTimeNegate(I,O),k=p.constTimeNegate(P,k),k=new f(n.mul(k.px,w.beta),k.py,k.pz),v=O.add(k),E=j.add(L)}else{const{p:I,f:S}=this.wNAF(y);v=I,E=S}return f.normalizeZ([v,E])[0]}multiplyAndAddUnsafe(y,w,x){const v=f.BASE,E=(S,P)=>P===_r||P===tt||!S.equals(v)?S.multiplyUnsafe(P):S.multiply(P),I=E(this,w).add(E(y,x));return I.is0()?void 0:I}toAffine(y){return l(this,y)}isTorsionFree(){const{h:y,isTorsionFree:w}=e;if(y===tt)return!0;if(w)return w(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:w}=e;return y===tt?this:w?w(f,this):this.multiplyUnsafe(e.h)}toRawBytes(y=!0){return Do("isCompressed",y),this.assertValidity(),s(f,this,y)}toHex(y=!0){return Do("isCompressed",y),Bo(this.toRawBytes(y))}}f.BASE=new f(e.Gx,e.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const d=e.nBitLength,p=ik(f,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function wk(t){const e=O5(t);return Zo(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function vk(t){const e=wk(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(R){return Dt(R,r)}function a(R){return Kd(R,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:h}=bk({...e,toBytes(R,$,_){const B=$.toAffine(),D=n.toBytes(B.x),N=ic;return Do("isCompressed",_),_?N(Uint8Array.from([$.hasEvenY()?2:3]),D):N(Uint8Array.from([4]),D,n.toBytes(B.y))},fromBytes(R){const $=R.length,_=R[0],B=R.subarray(1);if($===s&&(_===2||_===3)){const D=Hs(B);if(!Gl(D,tt,n.ORDER))throw new Error("Point is not on curve");const N=l(D);let U;try{U=n.sqrt(N)}catch(V){const Q=V instanceof Error?": "+V.message:"";throw new Error("Point is not on curve"+Q)}const z=(U&tt)===tt;return(_&1)===1!==z&&(U=n.neg(U)),{x:D,y:U}}else if($===i&&_===4){const D=n.fromBytes(B.subarray(0,n.BYTES)),N=n.fromBytes(B.subarray(n.BYTES,2*n.BYTES));return{x:D,y:N}}else{const D=s,N=i;throw new Error("invalid Point, expected length of "+D+", or uncompressed "+N+", got "+$)}}}),f=R=>Bo(Ro(R,e.nByteLength));function d(R){const $=r>>tt;return R>$}function p(R){return d(R)?o(-R):R}const g=(R,$,_)=>Hs(R.slice($,_));class y{constructor($,_,B){this.r=$,this.s=_,this.recovery=B,this.assertValidity()}static fromCompact($){const _=e.nByteLength;return $=Ht("compactSignature",$,_*2),new y(g($,0,_),g($,_,2*_))}static fromDER($){const{r:_,s:B}=vr.toSig(Ht("DER",$));return new y(_,B)}assertValidity(){Or("r",this.r,tt,r),Or("s",this.s,tt,r)}addRecoveryBit($){return new y(this.r,this.s,$)}recoverPublicKey($){const{r:_,s:B,recovery:D}=this,N=S(Ht("msgHash",$));if(D==null||![0,1,2,3].includes(D))throw new Error("recovery id invalid");const U=D===2||D===3?_+e.n:_;if(U>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const z=D&1?"03":"02",V=c.fromHex(z+f(U)),Q=a(U),W=o(-N*Q),ee=o(B*Q),te=c.BASE.multiplyAndAddUnsafe(V,W,ee);if(!te)throw new Error("point at infinify");return te.assertValidity(),te}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return No(this.toDERHex())}toDERHex(){return vr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return No(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const w={isValidPrivateKey(R){try{return u(R),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const R=S5(e.n);return nk(e.randomBytes(R),e.n)},precompute(R=8,$=c.BASE){return $._setWindowSize(R),$.multiply(BigInt(3)),$}};function x(R,$=!0){return c.fromPrivateKey(R).toRawBytes($)}function v(R){const $=oi(R),_=typeof R=="string",B=($||_)&&R.length;return $?B===s||B===i:_?B===2*s||B===2*i:R instanceof c}function E(R,$,_=!0){if(v(R))throw new Error("first arg must be private key");if(!v($))throw new Error("second arg must be public key");return c.fromHex($).multiply(u(R)).toRawBytes(_)}const I=e.bits2int||function(R){if(R.length>8192)throw new Error("input is too large");const $=Hs(R),_=R.length*8-e.nBitLength;return _>0?$>>BigInt(_):$},S=e.bits2int_modN||function(R){return o(I(R))},P=j0(e.nBitLength);function C(R){return Or("num < 2^"+e.nBitLength,R,_r,P),Ro(R,e.nByteLength)}function O(R,$,_=j){if(["recovered","canonical"].some(ie=>ie in _))throw new Error("sign() legacy options not supported");const{hash:B,randomBytes:D}=e;let{lowS:N,prehash:U,extraEntropy:z}=_;N==null&&(N=!0),R=Ht("msgHash",R),Lm(_),U&&(R=Ht("prehashed msgHash",B(R)));const V=S(R),Q=u($),W=[C(Q),C(V)];if(z!=null&&z!==!1){const ie=z===!0?D(n.BYTES):z;W.push(Ht("extraEntropy",ie))}const ee=ic(...W),te=V;function oe(ie){const re=I(ie);if(!h(re))return;const be=a(re),Ee=c.BASE.multiply(re).toAffine(),pe=o(Ee.x);if(pe===_r)return;const de=o(be*o(te+pe*Q));if(de===_r)return;let we=(Ee.x===pe?0:2)|Number(Ee.y&tt),ke=de;return N&&d(de)&&(ke=p(de),we^=1),new y(pe,ke,we)}return{seed:ee,k2sig:oe}}const j={lowS:e.lowS,prehash:!1},k={lowS:e.lowS,prehash:!1};function L(R,$,_=j){const{seed:B,k2sig:D}=O(R,$,_),N=e;return E5(N.hash.outputLen,N.nByteLength,N.hmac)(B,D)}c.BASE._setWindowSize(8);function F(R,$,_,B=k){var de;const D=R;$=Ht("msgHash",$),_=Ht("publicKey",_);const{lowS:N,prehash:U,format:z}=B;if(Lm(B),"strict"in B)throw new Error("options.strict was renamed to lowS");if(z!==void 0&&z!=="compact"&&z!=="der")throw new Error("format must be compact or der");const V=typeof D=="string"||oi(D),Q=!V&&!z&&typeof D=="object"&&D!==null&&typeof D.r=="bigint"&&typeof D.s=="bigint";if(!V&&!Q)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let W,ee;try{if(Q&&(W=new y(D.r,D.s)),V){try{z!=="compact"&&(W=y.fromDER(D))}catch(we){if(!(we instanceof vr.Err))throw we}!W&&z!=="der"&&(W=y.fromCompact(D))}ee=c.fromHex(_)}catch{return!1}if(!W||N&&W.hasHighS())return!1;U&&($=e.hash($));const{r:te,s:oe}=W,ie=S($),re=a(oe),be=o(ie*re),Ee=o(te*re),pe=(de=c.BASE.multiplyAndAddUnsafe(ee,be,Ee))==null?void 0:de.toAffine();return pe?o(pe.x)===te:!1}return{CURVE:e,getPublicKey:x,getSharedSecret:E,sign:L,verify:F,ProjectivePoint:c,Signature:y,utils:w}}function Ek(t){return{hash:t,hmac:(e,...n)=>ql(t,e,_N(...n)),randomBytes:Wo}}function xk(t,e){const n=r=>vk({...t,...Ek(r)});return{...n(e),create:n}}const C5=I5(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),$k=C5.create(BigInt("-3")),Ik=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),_k=xk({a:$k,b:Ik,Fp:C5,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Uc),T5="base10",$t="base16",An="base64pad",Yr="base64url",Lc="utf8",D5=0,Cr=1,jc=2,Sk=0,Fm=1,va=12,F0=32;function Pk(){const t=Wd.utils.randomPrivateKey(),e=Wd.getPublicKey(t);return{privateKey:Nt(t,$t),publicKey:Nt(e,$t)}}function Zd(){const t=Wo(F0);return Nt(t,$t)}function Ak(t,e){const n=Wd.getSharedSecret(hn(t,$t),hn(e,$t)),r=DR(Uc,n,void 0,void 0,F0);return Nt(r,$t)}function Ou(t){const e=Uc(hn(t,$t));return Nt(e,$t)}function Xn(t){const e=Uc(hn(t,Lc));return Nt(e,$t)}function B5(t){return hn(`${t}`,T5)}function ai(t){return Number(Nt(t,T5))}function N5(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function R5(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function Ok(t){const e=B5(typeof t.type<"u"?t.type:D5);if(ai(e)===Cr&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?hn(t.senderPublicKey,$t):void 0,r=typeof t.iv<"u"?hn(t.iv,$t):Wo(va),s=hn(t.symKey,$t),i=b5(s,r).encrypt(hn(t.message,Lc)),o=k5({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Yr?N5(o):o}function Ck(t){const e=hn(t.symKey,$t),{sealed:n,iv:r}=oc({encoded:t.encoded,encoding:t.encoding}),s=b5(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return Nt(s,Lc)}function Tk(t,e){const n=B5(jc),r=Wo(va),s=hn(t,Lc),i=k5({type:n,sealed:s,iv:r});return e===Yr?N5(i):i}function Dk(t,e){const{sealed:n}=oc({encoded:t,encoding:e});return Nt(n,Lc)}function k5(t){if(ai(t.type)===jc)return Nt(wa([t.type,t.sealed]),An);if(ai(t.type)===Cr){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Nt(wa([t.type,t.senderPublicKey,t.iv,t.sealed]),An)}return Nt(wa([t.type,t.iv,t.sealed]),An)}function oc(t){const e=(t.encoding||An)===Yr?R5(t.encoded):t.encoded,n=hn(e,An),r=n.slice(Sk,Fm),s=Fm;if(ai(r)===Cr){const c=s+F0,u=c+va,l=n.slice(s,c),h=n.slice(c,u),f=n.slice(u);return{type:r,sealed:f,iv:h,senderPublicKey:l}}if(ai(r)===jc){const c=n.slice(s),u=Wo(va);return{type:r,sealed:c,iv:u}}const i=s+va,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function Bk(t,e){const n=oc({encoded:t,encoding:e==null?void 0:e.encoding});return U5({type:ai(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Nt(n.senderPublicKey,$t):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function U5(t){const e=(t==null?void 0:t.type)||D5;if(e===Cr){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function zm(t){return t.type===Cr&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function qm(t){return t.type===jc}function Nk(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return wa([new Uint8Array([4]),e,n])}function Rk(t,e){const[n,r,s]=t.split("."),i=Buffer.from(R5(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,u=Uc(c),l=Nk(e);if(!_k.verify(wa([o,a]),u,l))throw new Error("Invalid signature");return Ud(t).payload}const kk="irn";function Zu(t){return(t==null?void 0:t.relay)||{protocol:kk}}function ma(t){const e=F9[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function Uk(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function Hm(t){if(!t.includes("wc:")){const u=i5(t);u!=null&&u.includes("wc:")&&(t=u)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((u,l)=>{a[l]=u});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:Mk(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:Uk(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Mk(t){return t.startsWith("//")?t.substring(2):t}function Lk(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function Vm(t){const e=new URLSearchParams,n=Lk(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function fu(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var jk=Object.defineProperty,Fk=Object.defineProperties,zk=Object.getOwnPropertyDescriptors,Km=Object.getOwnPropertySymbols,qk=Object.prototype.hasOwnProperty,Hk=Object.prototype.propertyIsEnumerable,Gm=(t,e,n)=>e in t?jk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vk=(t,e)=>{for(var n in e||(e={}))qk.call(e,n)&&Gm(t,n,e[n]);if(Km)for(var n of Km(e))Hk.call(e,n)&&Gm(t,n,e[n]);return t},Kk=(t,e)=>Fk(t,zk(e));function Yo(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function Gk(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Yo(n.accounts))}),e}function Wk(t,e){const n=[];return Object.values(t).forEach(r=>{Yo(r.accounts).includes(e)&&n.push(...r.methods)}),n}function Zk(t,e){const n=[];return Object.values(t).forEach(r=>{Yo(r.accounts).includes(e)&&n.push(...r.events)}),n}function Wl(t){return t.includes(":")}function Ji(t){return Wl(t)?t.split(":")[0]:t}function Wm(t){var e,n,r;const s={};if(!hs(t))return s;for(const[i,o]of Object.entries(t)){const a=Wl(i)?[i]:o.chains,c=o.methods||[],u=o.events||[],l=Ji(i);s[l]=Kk(Vk({},s[l]),{chains:rr(a,(e=s[l])==null?void 0:e.chains),methods:rr(c,(n=s[l])==null?void 0:n.methods),events:rr(u,(r=s[l])==null?void 0:r.events)})}return s}function Yk(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function Zm(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=Yk(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=rr(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function Qk(t,e){var n,r,s,i,o,a;const c=Wm(t),u=Wm(e),l={},h=Object.keys(c).concat(Object.keys(u));for(const f of h)l[f]={chains:rr((n=c[f])==null?void 0:n.chains,(r=u[f])==null?void 0:r.chains),methods:rr((s=c[f])==null?void 0:s.methods,(i=u[f])==null?void 0:i.methods),events:rr((o=c[f])==null?void 0:o.events,(a=u[f])==null?void 0:a.events)};return l}const Jk={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Xk={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function X(t,e){const{message:n,code:r}=Xk[t];return{message:e?`${n} ${e}`:n,code:r}}function xe(t,e){const{message:n,code:r}=Jk[t];return{message:e?`${n} ${e}`:n,code:r}}function Cn(t,e){return!!Array.isArray(t)}function hs(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function ut(t){return typeof t>"u"}function qe(t,e){return e&&ut(t)?!0:typeof t=="string"&&!!t.trim().length}function z0(t,e){return e&&ut(t)?!0:typeof t=="number"&&!isNaN(t)}function eU(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Cs(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],l=Yo(a),h=n[o];(!Cs(e5(o,h),l)||!Cs(h.methods,c)||!Cs(h.events,u))&&(i=!1)}),i):!1}function Yu(t){return qe(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function tU(t){if(qe(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&Yu(n)}}return!1}function nU(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(qe(t,!1)){if(e(t))return!0;const n=i5(t);return e(n)}}catch{}return!1}function rU(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function sU(t){return t==null?void 0:t.topic}function iU(t,e){let n=null;return qe(t==null?void 0:t.publicKey,!1)||(n=X("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function Ym(t){let e=!0;return Cn(t)?t.length&&(e=t.every(n=>qe(n,!1))):e=!1,e}function oU(t,e,n){let r=null;return Cn(e)&&e.length?e.forEach(s=>{r||Yu(s)||(r=xe("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Yu(t)||(r=xe("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function aU(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=oU(s,e5(s,i),`${e} ${n}`);o&&(r=o)}),r}function cU(t,e){let n=null;return Cn(t)?t.forEach(r=>{n||tU(r)||(n=xe("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=xe("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function uU(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=cU(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function lU(t,e){let n=null;return Ym(t==null?void 0:t.methods)?Ym(t==null?void 0:t.events)||(n=xe("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=xe("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function M5(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=lU(r,`${e}, namespace`);s&&(n=s)}),n}function hU(t,e,n){let r=null;if(t&&hs(t)){const s=M5(t,e);s&&(r=s);const i=aU(t,e,n);i&&(r=i)}else r=X("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function lf(t,e){let n=null;if(t&&hs(t)){const r=M5(t,e);r&&(n=r);const s=uU(t,e);s&&(n=s)}else n=X("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function L5(t){return qe(t.protocol,!0)}function fU(t,e){let n=!1;return t?t&&Cn(t)&&t.length&&t.forEach(r=>{n=L5(r)}):n=!0,n}function dU(t){return typeof t=="number"}function At(t){return typeof t<"u"&&typeof t!==null}function pU(t){return!(!t||typeof t!="object"||!t.code||!z0(t.code,!1)||!t.message||!qe(t.message,!1))}function gU(t){return!(ut(t)||!qe(t.method,!1))}function yU(t){return!(ut(t)||ut(t.result)&&ut(t.error)||!z0(t.id,!1)||!qe(t.jsonrpc,!1))}function mU(t){return!(ut(t)||!qe(t.name,!1))}function Qm(t,e){return!(!Yu(e)||!Gk(t).includes(e))}function bU(t,e,n){return qe(n,!1)?Wk(t,e).includes(n):!1}function wU(t,e,n){return qe(n,!1)?Zk(t,e).includes(n):!1}function Jm(t,e,n){let r=null;const s=vU(t),i=EU(e),o=Object.keys(s),a=Object.keys(i),c=Xm(Object.keys(t)),u=Xm(Object.keys(e)),l=c.filter(h=>!u.includes(h));return l.length&&(r=X("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(e).toString()}`)),Cs(o,a)||(r=X("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(h=>{if(!h.includes(":")||r)return;const f=Yo(e[h].accounts);f.includes(h)||(r=X("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${h}
        Required: ${h}
        Approved: ${f.toString()}`))}),o.forEach(h=>{r||(Cs(s[h].methods,i[h].methods)?Cs(s[h].events,i[h].events)||(r=X("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${h}`)):r=X("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${h}`))}),r}function vU(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function Xm(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function EU(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=Yo(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function xU(t,e){return z0(t,!1)&&t<=e.max&&t>=e.min}function eb(){const t=Rc();return new Promise(e=>{switch(t){case Gt.browser:e($U());break;case Gt.reactNative:e(IU());break;case Gt.node:e(_U());break;default:e(!0)}})}function $U(){return Go()&&(navigator==null?void 0:navigator.onLine)}async function IU(){if(ps()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo){const t=await(globalThis==null?void 0:globalThis.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function _U(){return!0}function SU(t){switch(Rc()){case Gt.browser:PU(t);break;case Gt.reactNative:AU(t);break}}function PU(t){!ps()&&Go()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function AU(t){ps()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo&&(globalThis==null||globalThis.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function OU(){var t;return Go()&&ti()?((t=ti())==null?void 0:t.visibilityState)==="visible":!0}const hf={};class la{static get(e){return hf[e]}static set(e,n){hf[e]=n}static delete(e){delete hf[e]}}class yi{}let CU=class extends yi{constructor(e){super()}};const tb=J.FIVE_SECONDS,mi={pulse:"heartbeat_pulse"};let TU=class j5 extends CU{constructor(e){super(e),this.events=new en.EventEmitter,this.interval=tb,this.interval=(e==null?void 0:e.interval)||tb}static async init(e){const n=new j5(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),J.toMiliseconds(this.interval))}pulse(){this.events.emit(mi.pulse)}};const DU=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,BU=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,NU=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function RU(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){kU(t);return}return e}function kU(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function du(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!NU.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(DU.test(t)||BU.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,RU)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function UU(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Qe(t,...e){try{return UU(t(...e))}catch(n){return Promise.reject(n)}}function MU(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function LU(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Cu(t){if(MU(t))return String(t);if(LU(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Cu(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Yd="base64:";function jU(t){return typeof t=="string"?t:Yd+qU(t)}function FU(t){return typeof t!="string"||!t.startsWith(Yd)?t:zU(t.slice(Yd.length))}function zU(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function qU(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Pt(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function HU(...t){return Pt(t.join(":"))}function pu(t){return t=Pt(t),t?t+":":""}function VU(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function KU(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const GU="memory",WU=()=>{const t=new Map;return{name:GU,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function ZU(t={}){const e={mounts:{"":t.driver||WU()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=u=>{for(const l of e.mountpoints)if(u.startsWith(l))return{base:l,relativeKey:u.slice(l.length),driver:e.mounts[l]};return{base:"",relativeKey:u,driver:e.mounts[""]}},r=(u,l)=>e.mountpoints.filter(h=>h.startsWith(u)||l&&u.startsWith(h)).map(h=>({relativeBase:u.length>h.length?u.slice(h.length):void 0,mountpoint:h,driver:e.mounts[h]})),s=(u,l)=>{if(e.watching){l=Pt(l);for(const h of e.watchListeners)h(u,l)}},i=async()=>{if(!e.watching){e.watching=!0;for(const u in e.mounts)e.unwatch[u]=await nb(e.mounts[u],s,u)}},o=async()=>{if(e.watching){for(const u in e.unwatch)await e.unwatch[u]();e.unwatch={},e.watching=!1}},a=(u,l,h)=>{const f=new Map,d=p=>{let g=f.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},f.set(p.base,g)),g};for(const p of u){const g=typeof p=="string",y=Pt(g?p:p.key),w=g?void 0:p.value,x=g||!p.options?l:{...l,...p.options},v=n(y);d(v).items.push({key:y,value:w,relativeKey:v.relativeKey,options:x})}return Promise.all([...f.values()].map(p=>h(p))).then(p=>p.flat())},c={hasItem(u,l={}){u=Pt(u);const{relativeKey:h,driver:f}=n(u);return Qe(f.hasItem,h,l)},getItem(u,l={}){u=Pt(u);const{relativeKey:h,driver:f}=n(u);return Qe(f.getItem,h,l).then(d=>du(d))},getItems(u,l={}){return a(u,l,h=>h.driver.getItems?Qe(h.driver.getItems,h.items.map(f=>({key:f.relativeKey,options:f.options})),l).then(f=>f.map(d=>({key:HU(h.base,d.key),value:du(d.value)}))):Promise.all(h.items.map(f=>Qe(h.driver.getItem,f.relativeKey,f.options).then(d=>({key:f.key,value:du(d)})))))},getItemRaw(u,l={}){u=Pt(u);const{relativeKey:h,driver:f}=n(u);return f.getItemRaw?Qe(f.getItemRaw,h,l):Qe(f.getItem,h,l).then(d=>FU(d))},async setItem(u,l,h={}){if(l===void 0)return c.removeItem(u);u=Pt(u);const{relativeKey:f,driver:d}=n(u);d.setItem&&(await Qe(d.setItem,f,Cu(l),h),d.watch||s("update",u))},async setItems(u,l){await a(u,l,async h=>{if(h.driver.setItems)return Qe(h.driver.setItems,h.items.map(f=>({key:f.relativeKey,value:Cu(f.value),options:f.options})),l);h.driver.setItem&&await Promise.all(h.items.map(f=>Qe(h.driver.setItem,f.relativeKey,Cu(f.value),f.options)))})},async setItemRaw(u,l,h={}){if(l===void 0)return c.removeItem(u,h);u=Pt(u);const{relativeKey:f,driver:d}=n(u);if(d.setItemRaw)await Qe(d.setItemRaw,f,l,h);else if(d.setItem)await Qe(d.setItem,f,jU(l),h);else return;d.watch||s("update",u)},async removeItem(u,l={}){typeof l=="boolean"&&(l={removeMeta:l}),u=Pt(u);const{relativeKey:h,driver:f}=n(u);f.removeItem&&(await Qe(f.removeItem,h,l),(l.removeMeta||l.removeMata)&&await Qe(f.removeItem,h+"$",l),f.watch||s("remove",u))},async getMeta(u,l={}){typeof l=="boolean"&&(l={nativeOnly:l}),u=Pt(u);const{relativeKey:h,driver:f}=n(u),d=Object.create(null);if(f.getMeta&&Object.assign(d,await Qe(f.getMeta,h,l)),!l.nativeOnly){const p=await Qe(f.getItem,h+"$",l).then(g=>du(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(d,p))}return d},setMeta(u,l,h={}){return this.setItem(u+"$",l,h)},removeMeta(u,l={}){return this.removeItem(u+"$",l)},async getKeys(u,l={}){var y;u=pu(u);const h=r(u,!0);let f=[];const d=[];let p=!0;for(const w of h){(y=w.driver.flags)!=null&&y.maxDepth||(p=!1);const x=await Qe(w.driver.getKeys,w.relativeBase,l);for(const v of x){const E=w.mountpoint+Pt(v);f.some(I=>E.startsWith(I))||d.push(E)}f=[w.mountpoint,...f.filter(v=>!v.startsWith(w.mountpoint))]}const g=l.maxDepth!==void 0&&!p;return d.filter(w=>(!g||VU(w,l.maxDepth))&&KU(w,u))},async clear(u,l={}){u=pu(u),await Promise.all(r(u,!1).map(async h=>{if(h.driver.clear)return Qe(h.driver.clear,h.relativeBase,l);if(h.driver.removeItem){const f=await h.driver.getKeys(h.relativeBase||"",l);return Promise.all(f.map(d=>h.driver.removeItem(d,l)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(u=>rb(u)))},async watch(u){return await i(),e.watchListeners.push(u),async()=>{e.watchListeners=e.watchListeners.filter(l=>l!==u),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(u,l){if(u=pu(u),u&&e.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(e.mountpoints.push(u),e.mountpoints.sort((h,f)=>f.length-h.length)),e.mounts[u]=l,e.watching&&Promise.resolve(nb(l,s,u)).then(h=>{e.unwatch[u]=h}).catch(console.error),c},async unmount(u,l=!0){var h,f;u=pu(u),!(!u||!e.mounts[u])&&(e.watching&&u in e.unwatch&&((f=(h=e.unwatch)[u])==null||f.call(h),delete e.unwatch[u]),l&&await rb(e.mounts[u]),e.mountpoints=e.mountpoints.filter(d=>d!==u),delete e.mounts[u])},getMount(u=""){u=Pt(u)+":";const l=n(u);return{driver:l.driver,base:l.base}},getMounts(u="",l={}){return u=Pt(u),r(u,l.parents).map(f=>({driver:f.driver,base:f.mountpoint}))},keys:(u,l={})=>c.getKeys(u,l),get:(u,l={})=>c.getItem(u,l),set:(u,l,h={})=>c.setItem(u,l,h),has:(u,l={})=>c.hasItem(u,l),del:(u,l={})=>c.removeItem(u,l),remove:(u,l={})=>c.removeItem(u,l)};return c}function nb(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function rb(t){typeof t.dispose=="function"&&await Qe(t.dispose)}const YU="idb-keyval";var QU=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=N2(t.dbName,t.storeName)),{name:YU,options:t,async hasItem(s){return!(typeof await cy(n(s),r)>"u")},async getItem(s){return await cy(n(s),r)??null},setItem(s,i){return eO(n(s),i,r)},removeItem(s){return tO(n(s),r)},getKeys(){return sO(r)},clear(){return nO(r)}}};const JU="WALLET_CONNECT_V2_INDEXED_DB",XU="keyvaluestorage";let e7=class{constructor(){this.indexedDb=ZU({driver:QU({dbName:JU,storeName:XU})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Rr(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var ff=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},Tu={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof ff<"u"&&ff.localStorage?Tu.exports=ff.localStorage:typeof window<"u"&&window.localStorage?Tu.exports=window.localStorage:Tu.exports=new e})();function t7(t){var e;return[t[0],si((e=t[1])!=null?e:"")]}let n7=class{constructor(){this.localStorage=Tu.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(t7)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return si(n)}async setItem(e,n){this.localStorage.setItem(e,Rr(n))}async removeItem(e){this.localStorage.removeItem(e)}};const r7="wc_storage_version",sb=1,s7=async(t,e,n)=>{const r=r7,s=await e.getItem(r);if(s&&s>=sb){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const u=await t.getItem(a);await e.setItem(a,u),o.push(a)}}await e.setItem(r,sb),n(e),i7(t,o)},i7=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let o7=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new n7;this.storage=e;try{const n=new e7;s7(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function a7(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var c7=u7;function u7(t,e,n){var r=n&&n.stringify||a7,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var u="",l=1-s,h=-1,f=t&&t.length||0,d=0;d<f;){if(t.charCodeAt(d)===37&&d+1<f){switch(h=h>-1?h:0,t.charCodeAt(d+1)){case 100:case 102:if(l>=c||e[l]==null)break;h<d&&(u+=t.slice(h,d)),u+=Number(e[l]),h=d+2,d++;break;case 105:if(l>=c||e[l]==null)break;h<d&&(u+=t.slice(h,d)),u+=Math.floor(Number(e[l])),h=d+2,d++;break;case 79:case 111:case 106:if(l>=c||e[l]===void 0)break;h<d&&(u+=t.slice(h,d));var p=typeof e[l];if(p==="string"){u+="'"+e[l]+"'",h=d+2,d++;break}if(p==="function"){u+=e[l].name||"<anonymous>",h=d+2,d++;break}u+=r(e[l]),h=d+2,d++;break;case 115:if(l>=c)break;h<d&&(u+=t.slice(h,d)),u+=String(e[l]),h=d+2,d++;break;case 37:h<d&&(u+=t.slice(h,d)),u+="%",h=d+2,d++,l--;break}++l}++d}return h===-1?t:(h<f&&(u+=t.slice(h)),u)}const ib=c7;var Vi=sr;const ac=w7().console||{},l7={mapHttpRequest:gu,mapHttpResponse:gu,wrapRequestSerializer:df,wrapResponseSerializer:df,wrapErrorSerializer:df,req:gu,res:gu,err:g7};function h7(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function sr(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||ac;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=h7(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=cc),Object.defineProperty(c,"levelVal",{get:l}),Object.defineProperty(c,"level",{get:h,set:f});const u={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:y7(t)};c.levels=sr.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=cc,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=d,e&&(c._logEvent=Qd());function l(){return this.level==="silent"?1/0:this.levels.values[this.level]}function h(){return this._level}function f(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,Oi(u,c,"error","log"),Oi(u,c,"fatal","error"),Oi(u,c,"warn","error"),Oi(u,c,"info","log"),Oi(u,c,"debug","log"),Oi(u,c,"trace","log")}function d(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const y=g.serializers;if(s&&y){var w=Object.assign({},r,y),x=t.browser.serialize===!0?Object.keys(w):s;delete p.serializers,Zl([p],x,w,this._stdErrSerialize)}function v(E){this._childLevel=(E._childLevel|0)+1,this.error=Ci(E,p,"error"),this.fatal=Ci(E,p,"fatal"),this.warn=Ci(E,p,"warn"),this.info=Ci(E,p,"info"),this.debug=Ci(E,p,"debug"),this.trace=Ci(E,p,"trace"),w&&(this.serializers=w,this._serialize=x),e&&(this._logEvent=Qd([].concat(E._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}sr.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};sr.stdSerializers=l7;sr.stdTimeFunctions=Object.assign({},{nullTime:F5,epochTime:z5,unixTime:m7,isoTime:b7});function Oi(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?cc:s[n]?s[n]:ac[n]||ac[r]||cc,f7(t,e,n)}function f7(t,e,n){!t.transmit&&e[n]===cc||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===ac?ac:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&Zl(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,d7(this,n,o,i)):r.apply(a,o),t.transmit){const u=t.transmit.level||e.level,l=sr.levels.values[u],h=sr.levels.values[n];if(h<l)return;p7(this,{ts:i,methodLevel:n,methodValue:h,transmitValue:sr.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function d7(t,e,n,r){t._serialize&&Zl(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=sr.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?ib(s.shift(),s):void 0}else typeof i=="string"&&(i=ib(s.shift(),s));return i!==void 0&&(o.msg=i),o}function Zl(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=sr.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Ci(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function p7(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;Zl(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(u){return c.indexOf(u)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=Qd(c)}function Qd(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function g7(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function y7(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?F5:z5}function gu(){return{}}function df(t){return t}function cc(){}function F5(){return!1}function z5(){return Date.now()}function m7(){return Math.round(Date.now()/1e3)}function b7(){return new Date(Date.now()).toISOString()}function w7(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const Fc=il(Vi),v7={level:"info"},zc="custom_context",q0=1e3*1024;let E7=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},ob=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new E7(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},q5=class{constructor(e,n=q0){this.level=e??"error",this.levelValue=Vi.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new ob(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Vi.levels.values.error?console.error(e):n===Vi.levels.values.warn?console.warn(e):n===Vi.levels.values.debug?console.debug(e):n===Vi.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Rr({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new ob(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Rr({extraMetadata:e})),new Blob(n,{type:"application/json"})}},x7=class{constructor(e,n=q0){this.baseChunkLogger=new q5(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},$7=class{constructor(e,n=q0){this.baseChunkLogger=new q5(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var I7=Object.defineProperty,_7=Object.defineProperties,S7=Object.getOwnPropertyDescriptors,ab=Object.getOwnPropertySymbols,P7=Object.prototype.hasOwnProperty,A7=Object.prototype.propertyIsEnumerable,cb=(t,e,n)=>e in t?I7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qu=(t,e)=>{for(var n in e||(e={}))P7.call(e,n)&&cb(t,n,e[n]);if(ab)for(var n of ab(e))A7.call(e,n)&&cb(t,n,e[n]);return t},Ju=(t,e)=>_7(t,S7(e));function Yl(t){return Ju(Qu({},t),{level:(t==null?void 0:t.level)||v7.level})}function O7(t,e=zc){return t[e]||""}function C7(t,e,n=zc){return t[n]=e,t}function Lt(t,e=zc){let n="";return typeof t.bindings>"u"?n=O7(t,e):n=t.bindings().context||"",n}function T7(t,e,n=zc){const r=Lt(t,n);return r.trim()?`${r}/${e}`:e}function It(t,e,n=zc){const r=T7(t,e,n),s=t.child({context:r});return C7(s,r,n)}function D7(t){var e,n;const r=new x7((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Fc(Ju(Qu({},t.opts),{level:"trace",browser:Ju(Qu({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function B7(t){var e;const n=new $7((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Fc(Ju(Qu({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function N7(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?D7(t):B7(t)}var R7=Object.defineProperty,k7=(t,e,n)=>e in t?R7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ub=(t,e,n)=>k7(t,typeof e!="symbol"?e+"":e,n);let U7=class extends yi{constructor(e){super(),this.opts=e,ub(this,"protocol","wc"),ub(this,"version",2)}};var M7=Object.defineProperty,L7=(t,e,n)=>e in t?M7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,j7=(t,e,n)=>L7(t,e+"",n);let F7=class extends yi{constructor(e,n){super(),this.core=e,this.logger=n,j7(this,"records",new Map)}},z7=class{constructor(e,n){this.logger=e,this.core=n}},q7=class extends yi{constructor(e,n){super(),this.relayer=e,this.logger=n}},H7=class extends yi{constructor(e){super()}},V7=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},K7=class extends yi{constructor(e,n){super(),this.relayer=e,this.logger=n}},G7=class extends yi{constructor(e,n){super(),this.core=e,this.logger=n}},W7=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},Z7=class{constructor(e,n){this.projectId=e,this.logger=n}},Y7=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var Q7=Object.defineProperty,J7=(t,e,n)=>e in t?Q7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lb=(t,e,n)=>J7(t,typeof e!="symbol"?e+"":e,n);let X7=class{constructor(e){this.opts=e,lb(this,"protocol","wc"),lb(this,"version",2)}},eM=class{constructor(e){this.client=e}};const tM="PARSE_ERROR",nM="INVALID_REQUEST",rM="METHOD_NOT_FOUND",sM="INVALID_PARAMS",H5="INTERNAL_ERROR",H0="SERVER_ERROR",iM=[-32700,-32600,-32601,-32602,-32603],Ea={[tM]:{code:-32700,message:"Parse error"},[nM]:{code:-32600,message:"Invalid Request"},[rM]:{code:-32601,message:"Method not found"},[sM]:{code:-32602,message:"Invalid params"},[H5]:{code:-32603,message:"Internal error"},[H0]:{code:-32e3,message:"Server error"}},V5=H0;function oM(t){return iM.includes(t)}function hb(t){return Object.keys(Ea).includes(t)?Ea[t]:Ea[V5]}function aM(t){const e=Object.values(Ea).find(n=>n.code===t);return e||Ea[V5]}function K5(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var G5={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Jd=function(t,e){return Jd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},Jd(t,e)};function cM(t,e){Jd(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Xd=function(){return Xd=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Xd.apply(this,arguments)};function uM(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function lM(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function hM(t,e){return function(n,r){e(n,r,t)}}function fM(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function dM(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(h){o(h)}}function c(l){try{u(r.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function pM(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(l){u=[6,l],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function gM(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function yM(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function ep(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function W5(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function mM(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(W5(arguments[e]));return t}function bM(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function uc(t){return this instanceof uc?(this.v=t,this):new uc(t)}function wM(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){r[f]&&(s[f]=function(d){return new Promise(function(p,g){i.push([f,d,p,g])>1||a(f,d)})})}function a(f,d){try{c(r[f](d))}catch(p){h(i[0][3],p)}}function c(f){f.value instanceof uc?Promise.resolve(f.value.v).then(u,l):h(i[0][2],f)}function u(f){a("next",f)}function l(f){a("throw",f)}function h(f,d){f(d),i.shift(),i.length&&a(i[0][0],i[0][1])}}function vM(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:uc(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function EM(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ep=="function"?ep(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function xM(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function $M(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function IM(t){return t&&t.__esModule?t:{default:t}}function _M(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function SM(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const PM=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Xd},__asyncDelegator:vM,__asyncGenerator:wM,__asyncValues:EM,__await:uc,__awaiter:dM,__classPrivateFieldGet:_M,__classPrivateFieldSet:SM,__createBinding:gM,__decorate:lM,__exportStar:yM,__extends:cM,__generator:pM,__importDefault:IM,__importStar:$M,__makeTemplateObject:xM,__metadata:fM,__param:hM,__read:W5,__rest:uM,__spread:mM,__spreadArrays:bM,__values:ep},Symbol.toStringTag,{value:"Module"})),AM=wp(PM);var pr={},fb;function OM(){if(fb)return pr;fb=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.isBrowserCryptoAvailable=pr.getSubtleCrypto=pr.getBrowerCrypto=void 0;function t(){return(globalThis==null?void 0:globalThis.crypto)||(globalThis==null?void 0:globalThis.msCrypto)||{}}pr.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}pr.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return pr.isBrowserCryptoAvailable=n,pr}var gr={},db;function CM(){if(db)return gr;db=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.isBrowser=gr.isNode=gr.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}gr.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}gr.isNode=e;function n(){return!t()&&!e()}return gr.isBrowser=n,gr}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=AM;e.__exportStar(OM(),t),e.__exportStar(CM(),t)})(G5);function Wn(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Ts(t=6){return BigInt(Wn(t))}function as(t,e,n){return{id:n||Wn(),jsonrpc:"2.0",method:t,params:e}}function Ql(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Jl(t,e,n){return{id:t,jsonrpc:"2.0",error:TM(e)}}function TM(t,e){return typeof t>"u"?hb(H5):(typeof t=="string"&&(t=Object.assign(Object.assign({},hb(H0)),{message:t})),oM(t.code)&&(t=aM(t.code)),t)}let DM=class{},BM=class extends DM{constructor(){super()}},NM=class extends BM{constructor(e){super()}};const RM="^https?:",kM="^wss?:";function UM(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Z5(t,e){const n=UM(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function pb(t){return Z5(t,RM)}function gb(t){return Z5(t,kM)}function MM(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Y5(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function V0(t){return Y5(t)&&"method"in t}function Xl(t){return Y5(t)&&(Zn(t)||ln(t))}function Zn(t){return"result"in t}function ln(t){return"error"in t}let yn=class extends NM{constructor(e){super(e),this.events=new en.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(as(e.method,e.params||[],e.id||Ts().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{ln(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Xl(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const LM=()=>typeof WebSocket<"u"?WebSocket:typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"?globalThis.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),jM=()=>typeof WebSocket<"u"||typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",yb=t=>t.split("?")[0],mb=10,FM=LM();let zM=class{constructor(e){if(this.url=e,this.events=new en.EventEmitter,this.registering=!1,!gb(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Rr(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!gb(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=G5.isReactNative()?void 0:{rejectUnauthorized:!MM(e)},i=new FM(e,[],s);jM()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?si(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=Jl(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return K5(e,yb(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>mb&&this.events.setMaxListeners(mb)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${yb(this.url)}`));return this.events.emit("register_error",n),n}};var qM={};const Q5="wc",J5=2,tp="core",ir=`${Q5}@2:${tp}:`,HM={logger:"error"},VM={database:":memory:"},KM="crypto",bb="client_ed25519_seed",GM=J.ONE_DAY,WM="keychain",ZM="0.3",YM="messages",QM="0.3",wb=J.SIX_HOURS,JM="publisher",X5="irn",XM="error",eE="wss://relay.walletconnect.org",eL="relayer",nt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},tL="_subscription",rn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},nL=.1,np="2.21.1",Ce={link_mode:"link_mode",relay:"relay"},Du={inbound:"inbound",outbound:"outbound"},rL="0.3",sL="WALLETCONNECT_CLIENT_ID",vb="WALLETCONNECT_LINK_MODE_APPS",qt={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},iL="subscription",oL="0.3",aL="pairing",cL="0.3",ha={wc_pairingDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:J.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:J.ONE_DAY,prompt:!1,tag:0},res:{ttl:J.ONE_DAY,prompt:!1,tag:0}}},_s={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},vn={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},uL="history",lL="0.3",hL="expirer",on={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},fL="0.3",dL="verify-api",pL="https://verify.walletconnect.com",tE="https://verify.walletconnect.org",xa=tE,gL=`${xa}/v3`,yL=[pL,tE],mL="echo",bL="https://echo.walletconnect.com",Gn={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},mr={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},En={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},ms={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},bs={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},fa={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},wL=.1,vL="event-client",EL=86400,xL="https://pulse.walletconnect.org/batch";function $L(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,x=p.length;w!==x&&p[w]===0;)w++,g++;for(var v=(x-w)*l+1>>>0,E=new Uint8Array(v);w!==x;){for(var I=p[w],S=0,P=v-1;(I!==0||S<y)&&P!==-1;P--,S++)I+=256*E[P]>>>0,E[P]=I%a>>>0,I=I/a>>>0;if(I!==0)throw new Error("Non-zero carry");y=S,w++}for(var C=v-y;C!==v&&E[C]===0;)C++;for(var O=c.repeat(g);C<v;++C)O+=t.charAt(E[C]);return O}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var x=(p.length-g)*u+1>>>0,v=new Uint8Array(x);p[g];){var E=n[p.charCodeAt(g)];if(E===255)return;for(var I=0,S=x-1;(E!==0||I<w)&&S!==-1;S--,I++)E+=a*v[S]>>>0,v[S]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");w=I,g++}if(p[g]!==" "){for(var P=x-w;P!==x&&v[P]===0;)P++;for(var C=new Uint8Array(y+(x-P)),O=y;P!==x;)C[O++]=v[P++];return C}}}function d(p){var g=f(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:f,decode:d}}var IL=$L,_L=IL;const nE=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},SL=t=>new TextEncoder().encode(t),PL=t=>new TextDecoder().decode(t);class AL{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class OL{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return rE(this,e)}}class CL{constructor(e){this.decoders=e}or(e){return rE(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const rE=(t,e)=>new CL({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class TL{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new AL(e,n,r),this.decoder=new OL(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const eh=({name:t,prefix:e,encode:n,decode:r})=>new TL(t,e,n,r),qc=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=_L(n,e);return eh({prefix:t,name:e,encode:r,decode:i=>nE(s(i))})},DL=(t,e,n,r)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const h=s[t[l]];if(h===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|h,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},BL=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},pt=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>eh({prefix:e,name:t,encode(s){return BL(s,r,n)},decode(s){return DL(s,r,n,t)}}),NL=eh({prefix:"\0",name:"identity",encode:t=>PL(t),decode:t=>SL(t)});var RL=Object.freeze({__proto__:null,identity:NL});const kL=pt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var UL=Object.freeze({__proto__:null,base2:kL});const ML=pt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var LL=Object.freeze({__proto__:null,base8:ML});const jL=qc({prefix:"9",name:"base10",alphabet:"0123456789"});var FL=Object.freeze({__proto__:null,base10:jL});const zL=pt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),qL=pt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var HL=Object.freeze({__proto__:null,base16:zL,base16upper:qL});const VL=pt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),KL=pt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),GL=pt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),WL=pt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ZL=pt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),YL=pt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),QL=pt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),JL=pt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),XL=pt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var ej=Object.freeze({__proto__:null,base32:VL,base32upper:KL,base32pad:GL,base32padupper:WL,base32hex:ZL,base32hexupper:YL,base32hexpad:QL,base32hexpadupper:JL,base32z:XL});const tj=qc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),nj=qc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var rj=Object.freeze({__proto__:null,base36:tj,base36upper:nj});const sj=qc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ij=qc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var oj=Object.freeze({__proto__:null,base58btc:sj,base58flickr:ij});const aj=pt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cj=pt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),uj=pt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),lj=pt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var hj=Object.freeze({__proto__:null,base64:aj,base64pad:cj,base64url:uj,base64urlpad:lj});const sE=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),fj=sE.reduce((t,e,n)=>(t[n]=e,t),[]),dj=sE.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function pj(t){return t.reduce((e,n)=>(e+=fj[n],e),"")}function gj(t){const e=[];for(const n of t){const r=dj[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const yj=eh({prefix:"🚀",name:"base256emoji",encode:pj,decode:gj});var mj=Object.freeze({__proto__:null,base256emoji:yj}),bj=iE,Eb=128,wj=-128,vj=Math.pow(2,31);function iE(t,e,n){e=e||[],n=n||0;for(var r=n;t>=vj;)e[n++]=t&255|Eb,t/=128;for(;t&wj;)e[n++]=t&255|Eb,t>>>=7;return e[n]=t|0,iE.bytes=n-r+1,e}var Ej=rp,xj=128,xb=127;function rp(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw rp.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&xb)<<s:(o&xb)*Math.pow(2,s),s+=7}while(o>=xj);return rp.bytes=i-r,n}var $j=Math.pow(2,7),Ij=Math.pow(2,14),_j=Math.pow(2,21),Sj=Math.pow(2,28),Pj=Math.pow(2,35),Aj=Math.pow(2,42),Oj=Math.pow(2,49),Cj=Math.pow(2,56),Tj=Math.pow(2,63),Dj=function(t){return t<$j?1:t<Ij?2:t<_j?3:t<Sj?4:t<Pj?5:t<Aj?6:t<Oj?7:t<Cj?8:t<Tj?9:10},Bj={encode:bj,decode:Ej,encodingLength:Dj},oE=Bj;const $b=(t,e,n=0)=>(oE.encode(t,e,n),e),Ib=t=>oE.encodingLength(t),sp=(t,e)=>{const n=e.byteLength,r=Ib(t),s=r+Ib(n),i=new Uint8Array(s+n);return $b(t,i,0),$b(n,i,r),i.set(e,s),new Nj(t,n,e,i)};class Nj{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const aE=({name:t,code:e,encode:n})=>new Rj(t,e,n);class Rj{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?sp(this.code,n):n.then(r=>sp(this.code,r))}else throw Error("Unknown type, must be binary type")}}const cE=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),kj=aE({name:"sha2-256",code:18,encode:cE("SHA-256")}),Uj=aE({name:"sha2-512",code:19,encode:cE("SHA-512")});var Mj=Object.freeze({__proto__:null,sha256:kj,sha512:Uj});const uE=0,Lj="identity",lE=nE,jj=t=>sp(uE,lE(t)),Fj={code:uE,name:Lj,encode:lE,digest:jj};var zj=Object.freeze({__proto__:null,identity:Fj});new TextEncoder,new TextDecoder;const _b={...RL,...UL,...LL,...FL,...HL,...ej,...rj,...oj,...hj,...mj};({...Mj,...zj});function qj(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function hE(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Sb=hE("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),pf=hE("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=qj(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Hj={utf8:Sb,"utf-8":Sb,hex:_b.base16,latin1:pf,ascii:pf,binary:pf,..._b};function Vj(t,e="utf8"){const n=Hj[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var Kj=Object.defineProperty,Gj=(t,e,n)=>e in t?Kj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vn=(t,e,n)=>Gj(t,typeof e!="symbol"?e+"":e,n);class Wj{constructor(e,n){this.core=e,this.logger=n,Vn(this,"keychain",new Map),Vn(this,"name",WM),Vn(this,"version",ZM),Vn(this,"initialized",!1),Vn(this,"storagePrefix",ir),Vn(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Vn(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Vn(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Vn(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=X("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Vn(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=It(n,this.name)}get context(){return Lt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Md(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Ld(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Zj=Object.defineProperty,Yj=(t,e,n)=>e in t?Zj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,at=(t,e,n)=>Yj(t,typeof e!="symbol"?e+"":e,n);class Qj{constructor(e,n,r){this.core=e,this.logger=n,at(this,"name",KM),at(this,"keychain"),at(this,"randomSessionIdentifier",Zd()),at(this,"initialized",!1),at(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),at(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),at(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=im(s);return W6(i.publicKey)}),at(this,"generateKeyPair",()=>{this.isInitialized();const s=Pk();return this.setPrivateKey(s.publicKey,s.privateKey)}),at(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=im(i),a=this.randomSessionIdentifier;return await HB(a,s,GM,o)}),at(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=Ak(a,i);return this.setSymKey(c,o)}),at(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||Ou(s);return await this.keychain.set(o,s),o}),at(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),at(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),at(this,"encode",async(s,i,o)=>{this.isInitialized();const a=U5(o),c=Rr(i);if(qm(a))return Tk(c,o==null?void 0:o.encoding);if(zm(a)){const f=a.senderPublicKey,d=a.receiverPublicKey;s=await this.generateSharedKey(f,d)}const u=this.getSymKey(s),{type:l,senderPublicKey:h}=a;return Ok({type:l,symKey:u,message:c,senderPublicKey:h,encoding:o==null?void 0:o.encoding})}),at(this,"decode",async(s,i,o)=>{this.isInitialized();const a=Bk(i,o);if(qm(a)){const c=Dk(i,o==null?void 0:o.encoding);return si(c)}if(zm(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;s=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(s),u=Ck({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return si(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),at(this,"getPayloadType",(s,i=An)=>{const o=oc({encoded:s,encoding:i});return ai(o.type)}),at(this,"getPayloadSenderPublicKey",(s,i=An)=>{const o=oc({encoded:s,encoding:i});return o.senderPublicKey?Nt(o.senderPublicKey,$t):void 0}),this.core=e,this.logger=It(n,this.name),this.keychain=r||new Wj(this.core,this.logger)}get context(){return Lt(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(bb)}catch{e=Zd(),await this.keychain.set(bb,e)}return Vj(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Jj=Object.defineProperty,Xj=Object.defineProperties,eF=Object.getOwnPropertyDescriptors,Pb=Object.getOwnPropertySymbols,tF=Object.prototype.hasOwnProperty,nF=Object.prototype.propertyIsEnumerable,ip=(t,e,n)=>e in t?Jj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rF=(t,e)=>{for(var n in e||(e={}))tF.call(e,n)&&ip(t,n,e[n]);if(Pb)for(var n of Pb(e))nF.call(e,n)&&ip(t,n,e[n]);return t},sF=(t,e)=>Xj(t,eF(e)),Ft=(t,e,n)=>ip(t,typeof e!="symbol"?e+"":e,n);class iF extends z7{constructor(e,n){super(e,n),this.logger=e,this.core=n,Ft(this,"messages",new Map),Ft(this,"messagesWithoutClientAck",new Map),Ft(this,"name",YM),Ft(this,"version",QM),Ft(this,"initialized",!1),Ft(this,"storagePrefix",ir),Ft(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Ft(this,"set",async(r,s,i)=>{this.isInitialized();const o=Xn(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===Du.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,sF(rF({},c),{[o]:s}))}return await this.persist(),o}),Ft(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Ft(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Ft(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Xn(s);return typeof i[o]<"u"}),Ft(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Xn(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),Ft(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=It(e,this.name),this.core=n}get context(){return Lt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Md(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Md(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Ld(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?Ld(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}}var oF=Object.defineProperty,aF=Object.defineProperties,cF=Object.getOwnPropertyDescriptors,Ab=Object.getOwnPropertySymbols,uF=Object.prototype.hasOwnProperty,lF=Object.prototype.propertyIsEnumerable,op=(t,e,n)=>e in t?oF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yu=(t,e)=>{for(var n in e||(e={}))uF.call(e,n)&&op(t,n,e[n]);if(Ab)for(var n of Ab(e))lF.call(e,n)&&op(t,n,e[n]);return t},gf=(t,e)=>aF(t,cF(e)),xn=(t,e,n)=>op(t,typeof e!="symbol"?e+"":e,n);class hF extends q7{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,xn(this,"events",new en.EventEmitter),xn(this,"name",JM),xn(this,"queue",new Map),xn(this,"publishTimeout",J.toMiliseconds(J.ONE_MINUTE)),xn(this,"initialPublishTimeout",J.toMiliseconds(J.ONE_SECOND*15)),xn(this,"needsTransportRestart",!1),xn(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||wb,c=Zu(i),u=(i==null?void 0:i.prompt)||!1,l=(i==null?void 0:i.tag)||0,h=(i==null?void 0:i.id)||Ts().toString(),f={topic:r,message:s,opts:{ttl:a,relay:c,prompt:u,tag:l,id:h,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},d=`Failed to publish payload, please try again. id:${h} tag:${l}`;try{const p=new Promise(async g=>{const y=({id:x})=>{f.opts.id===x&&(this.removeRequestFromQueue(x),this.relayer.events.removeListener(nt.publish,y),g(f))};this.relayer.events.on(nt.publish,y);const w=os(new Promise((x,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:u,tag:l,id:h,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(x).catch(E=>{this.logger.warn(E,E==null?void 0:E.message),v(E)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${h} tag:${l}`);try{await w,this.events.removeListener(nt.publish,y)}catch(x){this.queue.set(h,gf(yu({},f),{attempt:1})),this.logger.warn(x,x==null?void 0:x.message)}});this.logger.trace({type:"method",method:"publish",params:{id:h,topic:r,message:s,opts:i}}),await os(p,this.publishTimeout,d)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(h)}}),xn(this,"on",(r,s)=>{this.events.on(r,s)}),xn(this,"once",(r,s)=>{this.events.once(r,s)}),xn(this,"off",(r,s)=>{this.events.off(r,s)}),xn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=It(n,this.name),this.registerEventListeners()}get context(){return Lt(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=wb,prompt:u,tag:l,id:h,attestation:f,tvf:d}=e,p={method:ma(Zu().protocol).publish,params:yu({topic:o,message:a,ttl:c,prompt:u,tag:l,attestation:f},d),id:h};ut((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),ut((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(nt.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,gf(yu({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(gf(yu({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(mi.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(nt.connection_stalled);return}this.checkQueue()}),this.relayer.on(nt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var fF=Object.defineProperty,dF=(t,e,n)=>e in t?fF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ti=(t,e,n)=>dF(t,typeof e!="symbol"?e+"":e,n);class pF{constructor(){Ti(this,"map",new Map),Ti(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Ti(this,"get",e=>this.map.get(e)||[]),Ti(this,"exists",(e,n)=>this.get(e).includes(n)),Ti(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Ti(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var gF=Object.defineProperty,yF=Object.defineProperties,mF=Object.getOwnPropertyDescriptors,Ob=Object.getOwnPropertySymbols,bF=Object.prototype.hasOwnProperty,wF=Object.prototype.propertyIsEnumerable,ap=(t,e,n)=>e in t?gF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,da=(t,e)=>{for(var n in e||(e={}))bF.call(e,n)&&ap(t,n,e[n]);if(Ob)for(var n of Ob(e))wF.call(e,n)&&ap(t,n,e[n]);return t},yf=(t,e)=>yF(t,mF(e)),_e=(t,e,n)=>ap(t,typeof e!="symbol"?e+"":e,n);class vF extends K7{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,_e(this,"subscriptions",new Map),_e(this,"topicMap",new pF),_e(this,"events",new en.EventEmitter),_e(this,"name",iL),_e(this,"version",oL),_e(this,"pending",new Map),_e(this,"cached",[]),_e(this,"initialized",!1),_e(this,"storagePrefix",ir),_e(this,"subscribeTimeout",J.toMiliseconds(J.ONE_MINUTE)),_e(this,"initialSubscribeTimeout",J.toMiliseconds(J.ONE_SECOND*15)),_e(this,"clientId"),_e(this,"batchSubscribeTopicsLimit",500),_e(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),_e(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=Zu(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),_e(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),_e(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),_e(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),_e(this,"on",(r,s)=>{this.events.on(r,s)}),_e(this,"once",(r,s)=>{this.events.once(r,s)}),_e(this,"off",(r,s)=>{this.events.off(r,s)}),_e(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),_e(this,"start",async()=>{await this.onConnect()}),_e(this,"stop",async()=>{await this.onDisconnect()}),_e(this,"restart",async()=>{await this.restore(),await this.onRestart()}),_e(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),_e(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(mi.pulse,async()=>{await this.checkPending()}),this.events.on(qt.created,async r=>{const s=qt.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(qt.deleted,async r=>{const s=qt.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=It(n,this.name),this.clientId=""}get context(){return Lt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=Zu(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=xe("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===Ce.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:ma(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===Ce.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(l=>this.logger.warn(l))},J.toMiliseconds(J.ONE_SECOND)),a;const c=new Promise(async l=>{const h=f=>{f.topic===e&&(this.events.removeListener(qt.created,h),l(f.id))};this.events.on(qt.created,h);try{const f=await os(new Promise((d,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(d)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(qt.created,h),l(f)}catch{}}),u=await os(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return u?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(nt.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:ma(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await os(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(nt.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:ma(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await os(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(nt.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:ma(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,yf(da({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,da({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,da({},n)),this.topicMap.set(n.topic,e),this.events.emit(qt.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(qt.deleted,yf(da({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(qt.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(qt.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>yf(da({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await pN(J.toMiliseconds(J.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Xn(e+await this.getClientId())}}var EF=Object.defineProperty,Cb=Object.getOwnPropertySymbols,xF=Object.prototype.hasOwnProperty,$F=Object.prototype.propertyIsEnumerable,cp=(t,e,n)=>e in t?EF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tb=(t,e)=>{for(var n in e||(e={}))xF.call(e,n)&&cp(t,n,e[n]);if(Cb)for(var n of Cb(e))$F.call(e,n)&&cp(t,n,e[n]);return t},ye=(t,e,n)=>cp(t,typeof e!="symbol"?e+"":e,n);class IF extends H7{constructor(e){super(e),ye(this,"protocol","wc"),ye(this,"version",2),ye(this,"core"),ye(this,"logger"),ye(this,"events",new en.EventEmitter),ye(this,"provider"),ye(this,"messages"),ye(this,"subscriber"),ye(this,"publisher"),ye(this,"name",eL),ye(this,"transportExplicitlyClosed",!1),ye(this,"initialized",!1),ye(this,"connectionAttemptInProgress",!1),ye(this,"relayUrl"),ye(this,"projectId"),ye(this,"packageName"),ye(this,"bundleId"),ye(this,"hasExperiencedNetworkDisruption",!1),ye(this,"pingTimeout"),ye(this,"heartBeatTimeout",J.toMiliseconds(J.THIRTY_SECONDS+J.FIVE_SECONDS)),ye(this,"reconnectTimeout"),ye(this,"connectPromise"),ye(this,"reconnectInProgress",!1),ye(this,"requestsInFlight",[]),ye(this,"connectTimeout",J.toMiliseconds(J.ONE_SECOND*15)),ye(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||Ts().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),ye(this,"resetPingTimeout",()=>{Gu()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),ye(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),ye(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(nt.connect)}),ye(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),ye(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(nt.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),ye(this,"registerProviderListeners",()=>{this.provider.on(rn.payload,this.onPayloadHandler),this.provider.on(rn.connect,this.onConnectHandler),this.provider.on(rn.disconnect,this.onDisconnectHandler),this.provider.on(rn.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?It(e.logger,this.name):Fc(Yl({level:e.logger||XM})),this.messages=new iF(this.logger,e.core),this.subscriber=new vF(this,this.logger),this.publisher=new hF(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||eE,this.projectId=e.projectId,J9()?this.packageName=fm():X9()&&(this.bundleId=fm()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return Lt(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Ce.relay},Du.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const u=l=>{l.topic===e&&(this.subscriber.off(qt.created,u),c())};return await Promise.all([new Promise(l=>{c=l,this.subscriber.on(qt.created,u)}),new Promise(async(l,h)=>{a=await this.subscriber.subscribe(e,Tb({internal:{throwOnFailedPublish:o}},n)).catch(f=>{o&&h(f)})||a,l()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await os(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await eb())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Ge(J.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(nt.message,e),await this.recordMessageEvent(e,Du.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(rn.disconnect,i),await os(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(rn.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(rn.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(rn.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,J.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(Gu())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new yn(new zM(sN({sdkVersion:np,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),V0(e)){if(!e.method.endsWith(tL))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Ce.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Tb({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Xl(e)&&this.events.emit(nt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Du.inbound),this.events.emit(nt.message,e))}async acknowledgePayload(e){const n=Ql(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(rn.payload,this.onPayloadHandler),this.provider.off(rn.connect,this.onConnectHandler),this.provider.off(rn.disconnect,this.onDisconnectHandler),this.provider.off(rn.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await eb();SU(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(mi.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&OU())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(nt.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},J.toMiliseconds(nL)))))}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function _F(){}function Db(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Bb(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Nb(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const SF="[object RegExp]",PF="[object String]",AF="[object Number]",OF="[object Boolean]",Rb="[object Arguments]",CF="[object Symbol]",TF="[object Date]",DF="[object Map]",BF="[object Set]",NF="[object Array]",RF="[object Function]",kF="[object ArrayBuffer]",mf="[object Object]",UF="[object Error]",MF="[object DataView]",LF="[object Uint8Array]",jF="[object Uint8ClampedArray]",FF="[object Uint16Array]",zF="[object Uint32Array]",qF="[object BigUint64Array]",HF="[object Int8Array]",VF="[object Int16Array]",KF="[object Int32Array]",GF="[object BigInt64Array]",WF="[object Float32Array]",ZF="[object Float64Array]";function YF(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function QF(t,e,n){return ba(t,e,void 0,void 0,void 0,void 0,n)}function ba(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return $a(t,e,i,o)}return $a(t,e,i,o)}function $a(t,e,n,r){if(Object.is(t,e))return!0;let s=Nb(t),i=Nb(e);if(s===Rb&&(s=mf),i===Rb&&(i=mf),s!==i)return!1;switch(s){case PF:return t.toString()===e.toString();case AF:{const c=t.valueOf(),u=e.valueOf();return YF(c,u)}case OF:case TF:case CF:return Object.is(t.valueOf(),e.valueOf());case SF:return t.source===e.source&&t.flags===e.flags;case RF:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case DF:{if(t.size!==e.size)return!1;for(const[c,u]of t.entries())if(!e.has(c)||!ba(u,e.get(c),c,t,e,n,r))return!1;return!0}case BF:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),u=Array.from(e.values());for(let l=0;l<c.length;l++){const h=c[l],f=u.findIndex(d=>ba(h,d,void 0,t,e,n,r));if(f===-1)return!1;u.splice(f,1)}return!0}case NF:case LF:case jF:case FF:case zF:case qF:case HF:case VF:case KF:case GF:case WF:case ZF:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!ba(t[c],e[c],c,t,e,n,r))return!1;return!0}case kF:return t.byteLength!==e.byteLength?!1:$a(new Uint8Array(t),new Uint8Array(e),n,r);case MF:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:$a(new Uint8Array(t),new Uint8Array(e),n,r);case UF:return t.name===e.name&&t.message===e.message;case mf:{if(!($a(t.constructor,e.constructor,n,r)||Db(t)&&Db(e)))return!1;const c=[...Object.keys(t),...Bb(t)],u=[...Object.keys(e),...Bb(e)];if(c.length!==u.length)return!1;for(let l=0;l<c.length;l++){const h=c[l],f=t[h];if(!Object.hasOwn(e,h))return!1;const d=e[h];if(!ba(f,d,h,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function JF(t,e){return QF(t,e,_F)}var XF=Object.defineProperty,kb=Object.getOwnPropertySymbols,ez=Object.prototype.hasOwnProperty,tz=Object.prototype.propertyIsEnumerable,up=(t,e,n)=>e in t?XF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ub=(t,e)=>{for(var n in e||(e={}))ez.call(e,n)&&up(t,n,e[n]);if(kb)for(var n of kb(e))tz.call(e,n)&&up(t,n,e[n]);return t},St=(t,e,n)=>up(t,typeof e!="symbol"?e+"":e,n);class bi extends V7{constructor(e,n,r,s=ir,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,St(this,"map",new Map),St(this,"version",rL),St(this,"cached",[]),St(this,"initialized",!1),St(this,"getKey"),St(this,"storagePrefix",ir),St(this,"recentlyDeleted",[]),St(this,"recentlyDeletedLimit",200),St(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!ut(o)?this.map.set(this.getKey(o),o):rU(o)?this.map.set(o.id,o):sU(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),St(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),St(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),St(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>JF(a[c],o[c]))):this.values)),St(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=Ub(Ub({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),St(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=It(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return Lt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=X("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}}var nz=Object.defineProperty,rz=(t,e,n)=>e in t?nz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,le=(t,e,n)=>rz(t,typeof e!="symbol"?e+"":e,n);class sz{constructor(e,n){this.core=e,this.logger=n,le(this,"name",aL),le(this,"version",cL),le(this,"events",new w0),le(this,"pairings"),le(this,"initialized",!1),le(this,"storagePrefix",ir),le(this,"ignoredPayloadTypes",[Cr]),le(this,"registeredMethods",[]),le(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),le(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),le(this,"create",async r=>{this.isInitialized();const s=Zd(),i=await this.core.crypto.setSymKey(s),o=Ge(J.FIVE_MINUTES),a={protocol:X5},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},u=Vm({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(_s.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:u}}),le(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Gn.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:u}=Hm(r.uri);s.props.properties.topic=i,s.addTrace(Gn.pairing_uri_validation_success),s.addTrace(Gn.pairing_uri_not_expired);let l;if(this.pairings.keys.includes(i)){if(l=this.pairings.get(i),s.addTrace(Gn.existing_pairing),l.active)throw s.setError(mr.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Gn.pairing_not_expired)}const h=c||Ge(J.FIVE_MINUTES),f={topic:i,relay:a,expiry:h,active:!1,methods:u};this.core.expirer.set(i,h),await this.pairings.set(i,f),s.addTrace(Gn.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(_s.create,f),s.addTrace(Gn.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Gn.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(mr.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(d){throw s.setError(mr.subscribe_pairing_topic_failure),d}return s.addTrace(Gn.subscribe_pairing_topic_success),f}),le(this,"activate",async({topic:r})=>{this.isInitialized();const s=Ge(J.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),le(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=vs();this.events.once(ve("pairing_ping",i),({error:u})=>{u?c(u):a()}),await o()}}),le(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),le(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),le(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),le(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",xe("USER_DISCONNECTED")),await this.deletePairing(s))}),le(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return Vm({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),le(this,"sendRequest",async(r,s,i)=>{const o=as(s,i),a=await this.core.crypto.encode(r,o),c=ha[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),le(this,"sendResult",async(r,s,i)=>{const o=Ql(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,u=ha[c].res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),le(this,"sendError",async(r,s,i)=>{const o=Jl(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,u=ha[c]?ha[c].res:ha.unregistered_method.res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),le(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,xe("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),le(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Zr(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),le(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),le(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),le(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(_s.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),le(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Zn(s)?this.events.emit(ve("pairing_ping",i),{}):ln(s)&&this.events.emit(ve("pairing_ping",i),{error:s.error})},500)}),le(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(_s.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),le(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=xe("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),le(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(xe("WC_METHOD_UNSUPPORTED",r))}),le(this,"isValidPair",(r,s)=>{var i;if(!At(r)){const{message:a}=X("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(mr.malformed_pairing_uri),new Error(a)}if(!nU(r.uri)){const{message:a}=X("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(mr.malformed_pairing_uri),new Error(a)}const o=Hm(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=X("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(mr.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=X("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(mr.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&J.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(mr.pairing_expired);const{message:a}=X("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),le(this,"isValidPing",async r=>{if(!At(r)){const{message:i}=X("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),le(this,"isValidDisconnect",async r=>{if(!At(r)){const{message:i}=X("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),le(this,"isValidPairingTopic",async r=>{if(!qe(r,!1)){const{message:s}=X("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=X("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Zr(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=X("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=It(n,this.name),this.pairings=new bi(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Lt(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(nt.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Ce.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);V0(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):Xl(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(on.expired,async e=>{const{topic:n}=s5(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(_s.expire,{topic:n}))})}}var iz=Object.defineProperty,oz=(t,e,n)=>e in t?iz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ct=(t,e,n)=>oz(t,typeof e!="symbol"?e+"":e,n);class az extends F7{constructor(e,n){super(e,n),this.core=e,this.logger=n,ct(this,"records",new Map),ct(this,"events",new en.EventEmitter),ct(this,"name",uL),ct(this,"version",lL),ct(this,"cached",[]),ct(this,"initialized",!1),ct(this,"storagePrefix",ir),ct(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ct(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Ge(J.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(vn.created,o)}),ct(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=ln(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(vn.updated,s))}),ct(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),ct(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(vn.deleted,i)}}),this.persist()}),ct(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),ct(this,"on",(r,s)=>{this.events.on(r,s)}),ct(this,"once",(r,s)=>{this.events.once(r,s)}),ct(this,"off",(r,s)=>{this.events.off(r,s)}),ct(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=It(n,this.name)}get context(){return Lt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:as(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(vn.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(vn.created,e=>{const n=vn.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(vn.updated,e=>{const n=vn.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(vn.deleted,e=>{const n=vn.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(mi.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{J.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(vn.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}}var cz=Object.defineProperty,uz=(t,e,n)=>e in t?cz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gt=(t,e,n)=>uz(t,typeof e!="symbol"?e+"":e,n);class lz extends G7{constructor(e,n){super(e,n),this.core=e,this.logger=n,gt(this,"expirations",new Map),gt(this,"events",new en.EventEmitter),gt(this,"name",hL),gt(this,"version",fL),gt(this,"cached",[]),gt(this,"initialized",!1),gt(this,"storagePrefix",ir),gt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),gt(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),gt(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(on.created,{target:i,expiration:o})}),gt(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),gt(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(on.deleted,{target:s,expiration:i})}}),gt(this,"on",(r,s)=>{this.events.on(r,s)}),gt(this,"once",(r,s)=>{this.events.once(r,s)}),gt(this,"off",(r,s)=>{this.events.off(r,s)}),gt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=It(n,this.name)}get context(){return Lt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return iN(e);if(typeof e=="number")return oN(e);const{message:n}=X("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(on.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;J.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(on.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(mi.pulse,()=>this.checkExpirations()),this.events.on(on.created,e=>{const n=on.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(on.expired,e=>{const n=on.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(on.deleted,e=>{const n=on.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}}var hz=Object.defineProperty,fz=(t,e,n)=>e in t?hz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ze=(t,e,n)=>fz(t,typeof e!="symbol"?e+"":e,n);class dz extends W7{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,ze(this,"name",dL),ze(this,"abortController"),ze(this,"isDevEnv"),ze(this,"verifyUrlV3",gL),ze(this,"storagePrefix",ir),ze(this,"version",J5),ze(this,"publicKey"),ze(this,"fetchPromise"),ze(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&J.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),ze(this,"register",async s=>{if(!Go()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const u=ti(),l=this.startAbortTimer(J.ONE_SECOND*5),h=await new Promise((f,d)=>{const p=()=>{window.removeEventListener("message",y),u.body.removeChild(g),d("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=u.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const y=w=>{if(w.data&&typeof w.data=="string")try{const x=JSON.parse(w.data);if(x.type==="verify_attestation"){if(Ud(x.attestation).payload.id!==o)return;clearInterval(l),u.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",y),f(x.attestation===null?"":x.attestation)}}catch(x){this.logger.warn(x)}};u.body.appendChild(g),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",h),h}catch(u){this.logger.warn(u)}return""}),ze(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(Ud(i).payload.id!==a)return;const u=await this.isValidJwtAttestation(i);if(u){if(!u.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return u}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),ze(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(J.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),ze(this,"getVerifyUrl",s=>{let i=s||xa;return yL.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${xa}`),i=xa),i}),ze(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(J.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),ze(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),ze(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),ze(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),ze(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),ze(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),ze(this,"validateAttestation",(s,i)=>{const o=Rk(s,i.publicKey),a={hasExpired:J.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=It(n,this.name),this.abortController=new AbortController,this.isDevEnv=R0(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Lt(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),J.toMiliseconds(e))}}var pz=Object.defineProperty,gz=(t,e,n)=>e in t?pz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mb=(t,e,n)=>gz(t,typeof e!="symbol"?e+"":e,n);class yz extends Z7{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,Mb(this,"context",mL),Mb(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${bL}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=It(n,this.context)}}var mz=Object.defineProperty,Lb=Object.getOwnPropertySymbols,bz=Object.prototype.hasOwnProperty,wz=Object.prototype.propertyIsEnumerable,lp=(t,e,n)=>e in t?mz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pa=(t,e)=>{for(var n in e||(e={}))bz.call(e,n)&&lp(t,n,e[n]);if(Lb)for(var n of Lb(e))wz.call(e,n)&&lp(t,n,e[n]);return t},Ze=(t,e,n)=>lp(t,typeof e!="symbol"?e+"":e,n);class vz extends Y7{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Ze(this,"context",vL),Ze(this,"storagePrefix",ir),Ze(this,"storageVersion",wL),Ze(this,"events",new Map),Ze(this,"shouldPersist",!1),Ze(this,"init",async()=>{if(!R0())try{const s={eventId:pm(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:n5(this.core.relayer.protocol,this.core.relayer.version,np)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Ze(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,u=pm(),l=this.core.projectId||"",h=Date.now(),f=pa({eventId:u,timestamp:h,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:l,domain:this.getAppDomain()},this.setMethods(u));return this.telemetryEnabled&&(this.events.set(u,f),this.shouldPersist=!0),f}),Ze(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return pa(pa({},a),this.setMethods(a.eventId))}),Ze(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Ze(this,"setEventListeners",()=>{this.core.heartbeat.on(mi.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{J.fromMiliseconds(Date.now())-J.fromMiliseconds(s.timestamp)>EL&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Ze(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Ze(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Ze(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Ze(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Ze(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,pa(pa({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Ze(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Ze(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${xL}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${np}${i}`,{method:"POST",body:JSON.stringify(s)})}),Ze(this,"getAppDomain",()=>t5().url),this.logger=It(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Ez=Object.defineProperty,jb=Object.getOwnPropertySymbols,xz=Object.prototype.hasOwnProperty,$z=Object.prototype.propertyIsEnumerable,hp=(t,e,n)=>e in t?Ez(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fb=(t,e)=>{for(var n in e||(e={}))xz.call(e,n)&&hp(t,n,e[n]);if(jb)for(var n of jb(e))$z.call(e,n)&&hp(t,n,e[n]);return t},Pe=(t,e,n)=>hp(t,typeof e!="symbol"?e+"":e,n);let Iz=class fE extends U7{constructor(e){var n;super(e),Pe(this,"protocol",Q5),Pe(this,"version",J5),Pe(this,"name",tp),Pe(this,"relayUrl"),Pe(this,"projectId"),Pe(this,"customStoragePrefix"),Pe(this,"events",new en.EventEmitter),Pe(this,"logger"),Pe(this,"heartbeat"),Pe(this,"relayer"),Pe(this,"crypto"),Pe(this,"storage"),Pe(this,"history"),Pe(this,"expirer"),Pe(this,"pairing"),Pe(this,"verify"),Pe(this,"echoClient"),Pe(this,"linkModeSupportedApps"),Pe(this,"eventClient"),Pe(this,"initialized",!1),Pe(this,"logChunkController"),Pe(this,"on",(a,c)=>this.events.on(a,c)),Pe(this,"once",(a,c)=>this.events.once(a,c)),Pe(this,"off",(a,c)=>this.events.off(a,c)),Pe(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Pe(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:u})=>{if(!a||!c)return;const l={topic:a,message:c,publishedAt:Date.now(),transportType:Ce.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:u})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||eE,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Yl({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:HM.logger,name:tp}),{logger:i,chunkLoggerController:o}=N7({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=It(i,this.name),this.heartbeat=new TU,this.crypto=new Qj(this,this.logger,e==null?void 0:e.keychain),this.history=new az(this,this.logger),this.expirer=new lz(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new o7(Fb(Fb({},VM),e==null?void 0:e.storageOptions)),this.relayer=new IF({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new sz(this,this.logger),this.verify=new dz(this,this.logger,this.storage),this.echoClient=new yz(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new vz(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new fE(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(sL,r),n}get context(){return Lt(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(vb,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(vb)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&qM.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const _z=Iz,dE="wc",pE=2,gE="client",K0=`${dE}@${pE}:${gE}:`,bf={name:gE,logger:"error"},zb="WALLETCONNECT_DEEPLINK_CHOICE",Sz="proposal",qb="Proposal expired",Pz="session",Di=J.SEVEN_DAYS,Az="engine",Ye={wc_sessionPropose:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1104},res:{ttl:J.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1106},res:{ttl:J.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1112},res:{ttl:J.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1114},res:{ttl:J.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:J.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:J.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1119}}},wf={min:J.FIVE_MINUTES,max:J.SEVEN_DAYS},Kn={idle:"IDLE",active:"ACTIVE"},Hb={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},Oz="request",Cz=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Tz="wc",Dz="auth",Bz="authKeys",Nz="pairingTopics",Rz="requests",th=`${Tz}@${1.5}:${Dz}:`,Bu=`${th}:PUB_KEY`;var kz=Object.defineProperty,Uz=Object.defineProperties,Mz=Object.getOwnPropertyDescriptors,Vb=Object.getOwnPropertySymbols,Lz=Object.prototype.hasOwnProperty,jz=Object.prototype.propertyIsEnumerable,fp=(t,e,n)=>e in t?kz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Se=(t,e)=>{for(var n in e||(e={}))Lz.call(e,n)&&fp(t,n,e[n]);if(Vb)for(var n of Vb(e))jz.call(e,n)&&fp(t,n,e[n]);return t},bt=(t,e)=>Uz(t,Mz(e)),Z=(t,e,n)=>fp(t,typeof e!="symbol"?e+"":e,n);class Fz extends eM{constructor(e){super(e),Z(this,"name",Az),Z(this,"events",new w0),Z(this,"initialized",!1),Z(this,"requestQueue",{state:Kn.idle,queue:[]}),Z(this,"sessionRequestQueue",{state:Kn.idle,queue:[]}),Z(this,"requestQueueDelay",J.ONE_SECOND),Z(this,"expectedPairingMethodMap",new Map),Z(this,"recentlyDeletedMap",new Map),Z(this,"recentlyDeletedLimit",200),Z(this,"relayMessageCache",[]),Z(this,"pendingSessions",new Map),Z(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Ye)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},J.toMiliseconds(this.requestQueueDelay)))}),Z(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=bt(Se({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=Qk(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:u}=r;let l=s,h,f=!1;try{if(l){const S=this.client.core.pairing.pairings.get(l);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),f=S.active}}catch(S){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),S}if(!l||!f){const{topic:S,uri:P}=await this.client.core.pairing.create();l=S,h=P}if(!l){const{message:S}=X("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(S)}const d=await this.client.core.crypto.generateKeyPair(),p=Ye.wc_sessionPropose.req.ttl||J.FIVE_MINUTES,g=Ge(p),y=bt(Se(Se({requiredNamespaces:i,optionalNamespaces:o,relays:u??[{protocol:X5}],proposer:{publicKey:d,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:l},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Wn()}),w=ve("session_connect",y.id),{reject:x,resolve:v,done:E}=vs(p,qb),I=({id:S})=>{S===y.id&&(this.client.events.off("proposal_expire",I),this.pendingSessions.delete(y.id),this.events.emit(w,{error:{message:qb,code:0}}))};return this.client.events.on("proposal_expire",I),this.events.once(w,({error:S,session:P})=>{this.client.events.off("proposal_expire",I),S?x(S):P&&v(P)}),await this.sendRequest({topic:l,method:"wc_sessionPropose",params:y,throwOnFailedPublish:!0,clientRpcId:y.id}),await this.setProposal(y.id,y),{uri:h,approval:E}}),Z(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),Z(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[En.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(O){throw o.setError(ms.no_internet_connection),O}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(O){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(ms.proposal_not_found),O}try{await this.isValidApprove(n)}catch(O){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(ms.session_approve_namespace_validation_failure),O}const{id:a,relayProtocol:c,namespaces:u,sessionProperties:l,scopedProperties:h,sessionConfig:f}=n,d=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:y,optionalNamespaces:w}=d;let x=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});x||(x=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:En.session_approve_started,properties:{topic:p,trace:[En.session_approve_started,En.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),E=g.publicKey,I=await this.client.core.crypto.generateSharedKey(v,E),S=Se(Se(Se({relay:{protocol:c??"irn"},namespaces:u,controller:{publicKey:v,metadata:this.client.metadata},expiry:Ge(Di)},l&&{sessionProperties:l}),h&&{scopedProperties:h}),f&&{sessionConfig:f}),P=Ce.relay;x.addTrace(En.subscribing_session_topic);try{await this.client.core.relayer.subscribe(I,{transportType:P})}catch(O){throw x.setError(ms.subscribe_session_topic_failure),O}x.addTrace(En.subscribe_session_topic_success);const C=bt(Se({},S),{topic:I,requiredNamespaces:y,optionalNamespaces:w,pairingTopic:p,acknowledged:!1,self:S.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:Ce.relay});await this.client.session.set(I,C),x.addTrace(En.store_session);try{x.addTrace(En.publishing_session_settle),await this.sendRequest({topic:I,method:"wc_sessionSettle",params:S,throwOnFailedPublish:!0}).catch(O=>{throw x==null||x.setError(ms.session_settle_publish_failure),O}),x.addTrace(En.session_settle_publish_success),x.addTrace(En.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(O=>{throw x==null||x.setError(ms.session_approve_publish_failure),O}),x.addTrace(En.session_approve_publish_success)}catch(O){throw this.client.logger.error(O),this.client.session.delete(I,xe("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(I),O}return this.client.core.eventClient.deleteEvent({eventId:x.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,xe("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(I,Ge(Di)),{topic:I,acknowledged:()=>Promise.resolve(this.client.session.get(I))}}),Z(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:Ye.wc_sessionPropose.reject}),await this.client.proposal.delete(r,xe("USER_DISCONNECTED")))}),Z(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(h){throw this.client.logger.error("update() -> isValidUpdate() failed"),h}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=vs(),c=Wn(),u=Ts().toString(),l=this.client.session.get(r).namespaces;return this.events.once(ve("session_update",c),({error:h})=>{h?a(h):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:u}).catch(h=>{this.client.logger.error(h),this.client.session.update(r,{namespaces:l}),a(h)}),{acknowledged:i}}),Z(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Wn(),{done:i,resolve:o,reject:a}=vs();return this.events.once(ve("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Ge(Di)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),Z(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(w){throw this.client.logger.error("request() -> isValidRequest() failed"),w}const{chainId:r,request:s,topic:i,expiry:o=Ye.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Ce.relay&&await this.confirmOnlineStateOrThrow();const c=Wn(),u=Ts().toString(),{done:l,resolve:h,reject:f}=vs(o,"Request expired. Please try again.");this.events.once(ve("session_request",c),({error:w,result:x})=>{w?f(w):h(x)});const d="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:d,params:{request:bt(Se({},s),{expiryTimestamp:Ge(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(w=>f(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await l();const g={request:bt(Se({},s),{expiryTimestamp:Ge(o)}),chainId:r},y=this.shouldSetTVF(d,g);return await Promise.all([new Promise(async w=>{await this.sendRequest(Se({clientRpcId:c,relayRpcId:u,topic:i,method:d,params:g,expiry:o,throwOnFailedPublish:!0},y&&{tvf:this.getTVFParams(c,g)})).catch(x=>f(x)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),w()}),new Promise(async w=>{var x;if(!((x=a.sessionConfig)!=null&&x.disableDeepLink)){const v=await lN(this.client.core.storage,zb);await aN({id:c,topic:i,wcDeepLink:v})}w()}),l()]).then(w=>w[2])}),Z(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===Ce.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Zn(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):ln(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),Z(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Wn(),i=Ts().toString(),{done:o,resolve:a,reject:c}=vs();this.events.once(ve("session_ping",s),({error:u})=>{u?c(u):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),Z(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Ts().toString(),a=Wn();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),Z(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:xe("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=X("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),Z(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>eU(r,n)))),Z(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),Z(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Ce.link_mode:Ce.relay;o===Ce.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:u,domain:l,nonce:h,type:f,exp:d,nbf:p,methods:g=[],expiry:y}=n,w=[...n.resources||[]],{topic:x,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:x,uri:v}});const E=await this.client.core.crypto.generateKeyPair(),I=Ou(E);if(await Promise.all([this.client.auth.authKeys.set(Bu,{responseTopic:I,publicKey:E}),this.client.auth.pairingTopics.set(I,{topic:I,pairingTopic:x})]),await this.client.core.relayer.subscribe(I,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${x}`),g.length>0){const{namespace:N}=so(a[0]);let U=nR(N,"request",g);Au(w)&&(U=sR(U,w.pop())),w.push(U)}const S=y&&y>Ye.wc_sessionAuthenticate.req.ttl?y:Ye.wc_sessionAuthenticate.req.ttl,P={authPayload:{type:f??"caip122",chains:a,statement:c,aud:u,domain:l,version:"1",nonce:h,iat:new Date().toISOString(),exp:d,nbf:p,resources:w},requester:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:Ge(S)},C={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},O={requiredNamespaces:{},optionalNamespaces:C,relays:[{protocol:"irn"}],pairingTopic:x,proposer:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:Ge(Ye.wc_sessionPropose.req.ttl),id:Wn()},{done:j,resolve:k,reject:L}=vs(S,"Request expired"),F=Wn(),R=ve("session_connect",O.id),$=ve("session_request",F),_=async({error:N,session:U})=>{this.events.off($,B),N?L(N):U&&k({session:U})},B=async N=>{var U,z,V;if(await this.deletePendingAuthRequest(F,{message:"fulfilled",code:0}),N.error){const re=xe("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return N.error.code===re.code?void 0:(this.events.off(R,_),L(N.error.message))}await this.deleteProposal(O.id),this.events.off(R,_);const{cacaos:Q,responder:W}=N.result,ee=[],te=[];for(const re of Q){await xm({cacao:re,projectId:this.client.core.projectId})||(this.client.logger.error(re,"Signature verification failed"),L(xe("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:be}=re,Ee=Au(be.resources),pe=[jd(be.iss)],de=Wu(be.iss);if(Ee){const we=$m(Ee),ke=Im(Ee);ee.push(...we),pe.push(...ke)}for(const we of pe)te.push(`${we}:${de}`)}const oe=await this.client.core.crypto.generateSharedKey(E,W.publicKey);let ie;ee.length>0&&(ie={topic:oe,acknowledged:!0,self:{publicKey:E,metadata:this.client.metadata},peer:W,controller:W.publicKey,expiry:Ge(Di),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:x,namespaces:Zm([...new Set(ee)],[...new Set(te)]),transportType:o},await this.client.core.relayer.subscribe(oe,{transportType:o}),await this.client.session.set(oe,ie),x&&await this.client.core.pairing.updateMetadata({topic:x,metadata:W.metadata}),ie=this.client.session.get(oe)),(U=this.client.metadata.redirect)!=null&&U.linkMode&&(z=W.metadata.redirect)!=null&&z.linkMode&&(V=W.metadata.redirect)!=null&&V.universal&&r&&(this.client.core.addLinkModeSupportedApp(W.metadata.redirect.universal),this.client.session.update(oe,{transportType:Ce.link_mode})),k({auths:Q,session:ie})};this.events.once(R,_),this.events.once($,B);let D;try{if(i){const N=as("wc_sessionAuthenticate",P,F);this.client.core.history.set(x,N);const U=await this.client.core.crypto.encode("",N,{type:jc,encoding:Yr});D=fu(r,x,U)}else await Promise.all([this.sendRequest({topic:x,method:"wc_sessionAuthenticate",params:P,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:F}),this.sendRequest({topic:x,method:"wc_sessionPropose",params:O,expiry:Ye.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:O.id})])}catch(N){throw this.events.off(R,_),this.events.off($,B),N}return await this.setProposal(O.id,O),await this.setAuthRequest(F,{request:bt(Se({},P),{verifyContext:{}}),pairingTopic:x,transportType:o}),{uri:D??v,response:j}}),Z(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[bs.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(fa.no_internet_connection),y}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(fa.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Ce.relay;a===Ce.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),l=Ou(c),h={type:Cr,receiverPublicKey:c,senderPublicKey:u},f=[],d=[];for(const y of s){if(!await xm({cacao:y,projectId:this.client.core.projectId})){i.setError(fa.invalid_cacao);const I=xe("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:l,error:I,encodeOpts:h}),new Error(I.message)}i.addTrace(bs.cacaos_verified);const{p:w}=y,x=Au(w.resources),v=[jd(w.iss)],E=Wu(w.iss);if(x){const I=$m(x),S=Im(x);f.push(...I),v.push(...S)}for(const I of v)d.push(`${I}:${E}`)}const p=await this.client.core.crypto.generateSharedKey(u,c);i.addTrace(bs.create_authenticated_session_topic);let g;if((f==null?void 0:f.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:u,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Ge(Di),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:Zm([...new Set(f)],[...new Set(d)]),transportType:a},i.addTrace(bs.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(y){throw i.setError(fa.subscribe_authenticated_session_topic_failure),y}i.addTrace(bs.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(bs.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(bs.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:r,result:{cacaos:s,responder:{publicKey:u,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(fa.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),Z(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Ce.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Ou(o),u={type:Cr,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:u,rpcOpts:Ye.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,xe("USER_DISCONNECTED"))}),Z(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return d5(r,s)}),Z(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),Z(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),Z(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,xe("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(zb).catch(u=>this.client.logger.warn(u)),this.getPendingSessionRequests().forEach(u=>{u.topic===s&&this.deletePendingSessionRequest(u.id,xe("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Kn.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),Z(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(ms.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,xe("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),Z(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Kn.idle,this.client.events.emit("session_request_expire",{id:n}))}),Z(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),Z(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),Z(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Ge(Ye.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),Z(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Ce.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),Z(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Ge(Ye.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),Z(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u,appLink:l,tvf:h}=n,f=as(s,i,c);let d;const p=!!l;try{const w=p?Yr:An;d=await this.client.core.crypto.encode(r,f,{encoding:w})}catch(w){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),w}let g;if(Cz.includes(s)){const w=Xn(JSON.stringify(f)),x=Xn(d);g=await this.client.core.verify.register({id:x,decryptedId:w})}const y=Ye[s].req;if(y.attestation=g,o&&(y.ttl=o),a&&(y.id=a),this.client.core.history.set(r,f),p){const w=fu(l,r,d);await globalThis.Linking.openURL(w,this.client.name)}else{const w=Ye[s].req;o&&(w.ttl=o),a&&(w.id=a),w.tvf=bt(Se({},h),{correlationId:f.id}),u?(w.internal=bt(Se({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,d,w)):this.client.core.relayer.publish(r,d,w).catch(x=>this.client.logger.error(x))}return f.id}),Z(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,u=Ql(r,i);let l;const h=c&&typeof(globalThis==null?void 0:globalThis.Linking)<"u";try{const p=h?Yr:An;l=await this.client.core.crypto.encode(s,u,bt(Se({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let f,d;try{f=await this.client.core.history.get(s,r);const p=f.request;try{this.shouldSetTVF(p.method,p.params)&&(d=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(h){const p=fu(c,s,l);await globalThis.Linking.openURL(p,this.client.name)}else{const p=f.request.method,g=Ye[p].res;g.tvf=bt(Se({},d),{correlationId:r}),o?(g.internal=bt(Se({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,l,g)):this.client.core.relayer.publish(s,l,g).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(u)}),Z(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,u=Jl(r,i);let l;const h=c&&typeof(globalThis==null?void 0:globalThis.Linking)<"u";try{const d=h?Yr:An;l=await this.client.core.crypto.encode(s,u,bt(Se({},o||{}),{encoding:d}))}catch(d){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),d}let f;try{f=await this.client.core.history.get(s,r)}catch(d){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),d}if(h){const d=fu(c,s,l);await globalThis.Linking.openURL(d,this.client.name)}else{const d=f.request.method,p=a||Ye[d].res;this.client.core.relayer.publish(s,l,p)}await this.client.core.history.resolve(u)}),Z(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Zr(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Zr(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),Z(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),Z(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),Z(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Kn.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Kn.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Kn.idle}),Z(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),Z(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),Z(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=X("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),Z(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),Z(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const u=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),u==null||u.setError(mr.proposal_listener_not_found)),this.isValidConnect(Se({},s.params));const l=a.expiryTimestamp||Ge(Ye.wc_sessionPropose.req.ttl),h=Se({id:c,pairingTopic:r,expiryTimestamp:l},a);await this.setProposal(c,h);const f=await this.getVerifyContext({attestationId:i,hash:Xn(JSON.stringify(s)),encryptedId:o,metadata:h.proposer.metadata});u==null||u.addTrace(Gn.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:h,verifyContext:f})}catch(u){await this.sendError({id:c,topic:r,error:u,rpcOpts:Ye.wc_sessionPropose.autoReject}),this.client.logger.error(u)}}),Z(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Zn(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const u=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const l=await this.client.core.crypto.generateSharedKey(c,u);this.pendingSessions.set(i,{sessionTopic:l,pairingTopic:n,proposalId:i,publicKey:c});const h=await this.client.core.relayer.subscribe(l,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),await this.client.core.pairing.activate({topic:n})}else if(ln(r)){await this.client.proposal.delete(i,xe("USER_DISCONNECTED"));const o=ve("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),Z(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:u,sessionProperties:l,scopedProperties:h,sessionConfig:f}=r.params,d=[...this.pendingSessions.values()].find(y=>y.sessionTopic===n);if(!d)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(d.proposalId),g=bt(Se(Se(Se({topic:n,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:d.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:d.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},l&&{sessionProperties:l}),h&&{scopedProperties:h}),f&&{sessionConfig:f}),{transportType:Ce.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:d.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(ve("session_connect",d.proposalId),{session:g}),this.pendingSessions.delete(d.proposalId),this.deleteProposal(d.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),Z(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Zn(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(ve("session_approve",s),{})):ln(r)&&(await this.client.session.delete(n,xe("USER_DISCONNECTED")),this.events.emit(ve("session_approve",s),{error:r.error}))}),Z(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=la.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:xe("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Se({topic:n},s));try{la.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw la.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),Z(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),Z(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=ve("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Zn(r)?this.events.emit(ve("session_update",s),{}):ln(r)&&this.events.emit(ve("session_update",s),{error:r.error})}),Z(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Ge(Di)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),Z(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=ve("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Zn(r)?this.events.emit(ve("session_extend",s),{}):ln(r)&&this.events.emit(ve("session_extend",s),{error:r.error})}),Z(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),Z(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=ve("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Zn(r)?this.events.emit(ve("session_ping",s),{}):ln(r)&&this.events.emit(ve("session_ping",s),{error:r.error})},500)}),Z(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(nt.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:xe("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),Z(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:u,transportType:l}=n,{id:h,params:f}=a;try{await this.isValidRequest(Se({topic:o},f));const d=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Xn(JSON.stringify(as("wc_sessionRequest",f,h))),encryptedId:u,metadata:d.peer.metadata,transportType:l}),g={id:h,topic:o,params:f,verifyContext:p};await this.setPendingSessionRequest(g),l===Ce.link_mode&&(r=d.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=d.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(d){await this.sendError({id:h,topic:o,error:d}),this.client.logger.error(d)}}),Z(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=ve("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Zn(r)?this.events.emit(ve("session_request",s),{result:r.result}):ln(r)&&this.events.emit(ve("session_request",s),{error:r.error})}),Z(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=la.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Se({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),la.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),Z(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Zn(r)?this.events.emit(ve("session_request",s),{result:r.result}):ln(r)&&this.events.emit(ve("session_request",s),{error:r.error})}),Z(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:u,authPayload:l,expiryTimestamp:h}=i.params,f=await this.getVerifyContext({attestationId:o,hash:Xn(JSON.stringify(i)),encryptedId:a,metadata:u.metadata,transportType:c}),d={requester:u,pairingTopic:s,id:i.id,authPayload:l,verifyContext:f,expiryTimestamp:h};await this.setAuthRequest(i.id,{request:d,pairingTopic:s,transportType:c}),c===Ce.link_mode&&(r=u.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(u.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:f})}catch(u){this.client.logger.error(u);const l=i.params.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),f=this.getAppLinkIfEnabled(i.params.requester.metadata,c),d={type:Cr,receiverPublicKey:l,senderPublicKey:h};await this.sendError({id:i.id,topic:s,error:u,encodeOpts:d,rpcOpts:Ye.wc_sessionAuthenticate.autoReject,appLink:f})}}),Z(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),Z(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Kn.idle,this.processSessionRequestQueue()},J.toMiliseconds(this.requestQueueDelay))}),Z(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=ve("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(ve("session_request",i.request.id),{error:r})})}),Z(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Kn.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Kn.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),Z(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),Z(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:as("wc_sessionPropose",bt(Se({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),Z(this,"isValidConnect",async n=>{if(!At(n)){const{message:u}=X("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(u)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(ut(r)||await this.isValidPairingTopic(r),!fU(c)){const{message:u}=X("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(u)}if(!ut(s)&&hs(s)!==0){const u="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(u):this.client.logger.warn(u),this.validateNamespaces(s,"requiredNamespaces")}if(!ut(i)&&hs(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),ut(o)||this.validateSessionProps(o,"sessionProperties"),!ut(a)){this.validateSessionProps(a,"scopedProperties");const u=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(l=>u.includes(l)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(u)}`)}}),Z(this,"validateNamespaces",(n,r)=>{const s=hU(n,"connect()",r);if(s)throw new Error(s.message)}),Z(this,"isValidApprove",async n=>{if(!At(n))throw new Error(X("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),u=lf(s,"approve()");if(u)throw new Error(u.message);const l=Jm(c.requiredNamespaces,s,"approve()");if(l)throw new Error(l.message);if(!qe(i,!0)){const{message:h}=X("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(h)}if(ut(o)||this.validateSessionProps(o,"sessionProperties"),!ut(a)){this.validateSessionProps(a,"scopedProperties");const h=new Set(Object.keys(s));if(!Object.keys(a).every(f=>h.has(f)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(h).join(", ")}`)}}),Z(this,"isValidReject",async n=>{if(!At(n)){const{message:i}=X("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!pU(s)){const{message:i}=X("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),Z(this,"isValidSessionSettleRequest",n=>{if(!At(n)){const{message:u}=X("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(u)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!L5(r)){const{message:u}=X("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=iU(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=lf(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Zr(o)){const{message:u}=X("EXPIRED","onSessionSettleRequest()");throw new Error(u)}}),Z(this,"isValidUpdate",async n=>{if(!At(n)){const{message:c}=X("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=lf(s,"update()");if(o)throw new Error(o.message);const a=Jm(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),Z(this,"isValidExtend",async n=>{if(!At(n)){const{message:s}=X("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),Z(this,"isValidRequest",async n=>{if(!At(n)){const{message:c}=X("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!Qm(a,i)){const{message:c}=X("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!gU(s)){const{message:c}=X("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!bU(a,i,s.method)){const{message:c}=X("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!xU(o,wf)){const{message:c}=X("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${wf.min} and ${wf.max}`);throw new Error(c)}}),Z(this,"isValidRespond",async n=>{var r;if(!At(n)){const{message:o}=X("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!yU(i)){const{message:o}=X("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),Z(this,"isValidPing",async n=>{if(!At(n)){const{message:s}=X("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Z(this,"isValidEmit",async n=>{if(!At(n)){const{message:a}=X("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!Qm(o,i)){const{message:a}=X("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!mU(s)){const{message:a}=X("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!wU(o,i,s.name)){const{message:a}=X("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),Z(this,"isValidDisconnect",async n=>{if(!At(n)){const{message:s}=X("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Z(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!qe(s,!1))throw new Error("uri is required parameter");if(!qe(i,!1))throw new Error("domain is required parameter");if(!qe(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>so(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=so(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),Z(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||xa,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Ce.link_mode){const l=this.getAppLinkIfEnabled(o,a);return c.verified.validation=l&&new URL(l).origin===new URL(o.url).origin?"VALID":"INVALID",c}const u=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});u&&(c.verified.origin=u.origin,c.verified.isScam=u.isScam,c.verified.validation=u.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.warn(u)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),Z(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=X("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),Z(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),Z(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),Z(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=X("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),Z(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,u,l,h,f;return!n||r!==Ce.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==""&&((l=n==null?void 0:n.redirect)==null?void 0:l.universal)!==void 0&&((h=n==null?void 0:n.redirect)==null?void 0:h.universal)!==""&&((f=n==null?void 0:n.redirect)==null?void 0:f.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(globalThis==null?void 0:globalThis.Linking)<"u"}),Z(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),Z(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=dm(n,"topic")||"",s=decodeURIComponent(dm(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Ce.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),Z(this,"registerLinkModeListeners",async()=>{var n;if(R0()||ps()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=globalThis==null?void 0:globalThis.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),Z(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(Hb).includes(s.method)}),Z(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return bt(Se({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),Z(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),Z(this,"extractTxHashesFromResult",(n,r)=>{try{const s=Hb[n];if(typeof r=="string")return[r];const i=r[s.key];if(Cn(i))return n==="solana_signAllTransactions"?i.map(o=>zN(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(nt.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Bu)?this.client.auth.authKeys.get(Bu):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Ce.link_mode?Yr:An});V0(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Xn(r)})):Xl(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(on.expired,async e=>{const{topic:n,id:r}=s5(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,X("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,X("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(_s.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(_s.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!qe(e,!1)){const{message:n}=X("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=X("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Zr(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=X("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!qe(e,!1)){const{message:n}=X("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=X("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Zr(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=X("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=X("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(qe(e,!1)){const{message:n}=X("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=X("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!dU(e)){const{message:n}=X("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=X("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Zr(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=X("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class zz extends bi{constructor(e,n){super(e,n,Sz,K0),this.core=e,this.logger=n}}let qz=class extends bi{constructor(e,n){super(e,n,Pz,K0),this.core=e,this.logger=n}};class Hz extends bi{constructor(e,n){super(e,n,Oz,K0,r=>r.id),this.core=e,this.logger=n}}class Vz extends bi{constructor(e,n){super(e,n,Bz,th,()=>Bu),this.core=e,this.logger=n}}class Kz extends bi{constructor(e,n){super(e,n,Nz,th),this.core=e,this.logger=n}}class Gz extends bi{constructor(e,n){super(e,n,Rz,th,r=>r.id),this.core=e,this.logger=n}}var Wz=Object.defineProperty,Zz=(t,e,n)=>e in t?Wz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vf=(t,e,n)=>Zz(t,typeof e!="symbol"?e+"":e,n);class Yz{constructor(e,n){this.core=e,this.logger=n,vf(this,"authKeys"),vf(this,"pairingTopics"),vf(this,"requests"),this.authKeys=new Vz(this.core,this.logger),this.pairingTopics=new Kz(this.core,this.logger),this.requests=new Gz(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var Qz=Object.defineProperty,Jz=(t,e,n)=>e in t?Qz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,he=(t,e,n)=>Jz(t,typeof e!="symbol"?e+"":e,n);let Xz=class yE extends X7{constructor(e){super(e),he(this,"protocol",dE),he(this,"version",pE),he(this,"name",bf.name),he(this,"metadata"),he(this,"core"),he(this,"logger"),he(this,"events",new en.EventEmitter),he(this,"engine"),he(this,"session"),he(this,"proposal"),he(this,"pendingRequest"),he(this,"auth"),he(this,"signConfig"),he(this,"on",(r,s)=>this.events.on(r,s)),he(this,"once",(r,s)=>this.events.once(r,s)),he(this,"off",(r,s)=>this.events.off(r,s)),he(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),he(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),he(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),he(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),he(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),he(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),he(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),he(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),he(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),he(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),he(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),he(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),he(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),he(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),he(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),he(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),he(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),he(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),he(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||bf.name,this.metadata=tN(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Fc(Yl({level:(e==null?void 0:e.logger)||bf.logger}));this.core=(e==null?void 0:e.core)||new _z(e),this.logger=It(n,this.name),this.session=new qz(this.core,this.logger),this.proposal=new zz(this.core,this.logger),this.pendingRequest=new Hz(this.core,this.logger),this.engine=new Fz(this),this.auth=new Yz(this.core,this.logger)}static async init(e){const n=new yE(e);return await n.initialize(),n}get context(){return Lt(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},J.toMiliseconds(J.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var dp={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof globalThis<"u"&&globalThis,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof i<"u"&&i||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u($){return $&&DataView.prototype.isPrototypeOf($)}if(c.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function($){return $&&l.indexOf(Object.prototype.toString.call($))>-1};function f($){if(typeof $!="string"&&($=String($)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test($)||$==="")throw new TypeError('Invalid character in header field name: "'+$+'"');return $.toLowerCase()}function d($){return typeof $!="string"&&($=String($)),$}function p($){var _={next:function(){var B=$.shift();return{done:B===void 0,value:B}}};return c.iterable&&(_[Symbol.iterator]=function(){return _}),_}function g($){this.map={},$ instanceof g?$.forEach(function(_,B){this.append(B,_)},this):Array.isArray($)?$.forEach(function(_){if(_.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+_.length);this.append(_[0],_[1])},this):$&&Object.getOwnPropertyNames($).forEach(function(_){this.append(_,$[_])},this)}g.prototype.append=function($,_){$=f($),_=d(_);var B=this.map[$];this.map[$]=B?B+", "+_:_},g.prototype.delete=function($){delete this.map[f($)]},g.prototype.get=function($){return $=f($),this.has($)?this.map[$]:null},g.prototype.has=function($){return this.map.hasOwnProperty(f($))},g.prototype.set=function($,_){this.map[f($)]=d(_)},g.prototype.forEach=function($,_){for(var B in this.map)this.map.hasOwnProperty(B)&&$.call(_,this.map[B],B,this)},g.prototype.keys=function(){var $=[];return this.forEach(function(_,B){$.push(B)}),p($)},g.prototype.values=function(){var $=[];return this.forEach(function(_){$.push(_)}),p($)},g.prototype.entries=function(){var $=[];return this.forEach(function(_,B){$.push([B,_])}),p($)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y($){if(!$._noBody){if($.bodyUsed)return Promise.reject(new TypeError("Already read"));$.bodyUsed=!0}}function w($){return new Promise(function(_,B){$.onload=function(){_($.result)},$.onerror=function(){B($.error)}})}function x($){var _=new FileReader,B=w(_);return _.readAsArrayBuffer($),B}function v($){var _=new FileReader,B=w(_),D=/charset=([A-Za-z0-9_-]+)/.exec($.type),N=D?D[1]:"utf-8";return _.readAsText($,N),B}function E($){for(var _=new Uint8Array($),B=new Array(_.length),D=0;D<_.length;D++)B[D]=String.fromCharCode(_[D]);return B.join("")}function I($){if($.slice)return $.slice(0);var _=new Uint8Array($.byteLength);return _.set(new Uint8Array($)),_.buffer}function S(){return this.bodyUsed=!1,this._initBody=function($){this.bodyUsed=this.bodyUsed,this._bodyInit=$,$?typeof $=="string"?this._bodyText=$:c.blob&&Blob.prototype.isPrototypeOf($)?this._bodyBlob=$:c.formData&&FormData.prototype.isPrototypeOf($)?this._bodyFormData=$:c.searchParams&&URLSearchParams.prototype.isPrototypeOf($)?this._bodyText=$.toString():c.arrayBuffer&&c.blob&&u($)?(this._bodyArrayBuffer=I($.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf($)||h($))?this._bodyArrayBuffer=I($):this._bodyText=$=Object.prototype.toString.call($):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof $=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf($)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var $=y(this);if($)return $;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var $=y(this);return $||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(x);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var $=y(this);if($)return $;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(j)}),this.json=function(){return this.text().then(JSON.parse)},this}var P=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function C($){var _=$.toUpperCase();return P.indexOf(_)>-1?_:$}function O($,_){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');_=_||{};var B=_.body;if($ instanceof O){if($.bodyUsed)throw new TypeError("Already read");this.url=$.url,this.credentials=$.credentials,_.headers||(this.headers=new g($.headers)),this.method=$.method,this.mode=$.mode,this.signal=$.signal,!B&&$._bodyInit!=null&&(B=$._bodyInit,$.bodyUsed=!0)}else this.url=String($);if(this.credentials=_.credentials||this.credentials||"same-origin",(_.headers||!this.headers)&&(this.headers=new g(_.headers)),this.method=C(_.method||this.method||"GET"),this.mode=_.mode||this.mode||null,this.signal=_.signal||this.signal||function(){if("AbortController"in a){var U=new AbortController;return U.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&B)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(B),(this.method==="GET"||this.method==="HEAD")&&(_.cache==="no-store"||_.cache==="no-cache")){var D=/([?&])_=[^&]*/;if(D.test(this.url))this.url=this.url.replace(D,"$1_="+new Date().getTime());else{var N=/\?/;this.url+=(N.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}O.prototype.clone=function(){return new O(this,{body:this._bodyInit})};function j($){var _=new FormData;return $.trim().split("&").forEach(function(B){if(B){var D=B.split("="),N=D.shift().replace(/\+/g," "),U=D.join("=").replace(/\+/g," ");_.append(decodeURIComponent(N),decodeURIComponent(U))}}),_}function k($){var _=new g,B=$.replace(/\r?\n[\t ]+/g," ");return B.split("\r").map(function(D){return D.indexOf(`
`)===0?D.substr(1,D.length):D}).forEach(function(D){var N=D.split(":"),U=N.shift().trim();if(U){var z=N.join(":").trim();try{_.append(U,z)}catch(V){console.warn("Response "+V.message)}}}),_}S.call(O.prototype);function L($,_){if(!(this instanceof L))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(_||(_={}),this.type="default",this.status=_.status===void 0?200:_.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=_.statusText===void 0?"":""+_.statusText,this.headers=new g(_.headers),this.url=_.url||"",this._initBody($)}S.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},L.error=function(){var $=new L(null,{status:200,statusText:""});return $.ok=!1,$.status=0,$.type="error",$};var F=[301,302,303,307,308];L.redirect=function($,_){if(F.indexOf(_)===-1)throw new RangeError("Invalid status code");return new L(null,{status:_,headers:{location:$}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(_,B){this.message=_,this.name=B;var D=Error(_);this.stack=D.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function R($,_){return new Promise(function(B,D){var N=new O($,_);if(N.signal&&N.signal.aborted)return D(new o.DOMException("Aborted","AbortError"));var U=new XMLHttpRequest;function z(){U.abort()}U.onload=function(){var W={statusText:U.statusText,headers:k(U.getAllResponseHeaders()||"")};N.url.indexOf("file://")===0&&(U.status<200||U.status>599)?W.status=200:W.status=U.status,W.url="responseURL"in U?U.responseURL:W.headers.get("X-Request-URL");var ee="response"in U?U.response:U.responseText;setTimeout(function(){B(new L(ee,W))},0)},U.onerror=function(){setTimeout(function(){D(new TypeError("Network request failed"))},0)},U.ontimeout=function(){setTimeout(function(){D(new TypeError("Network request timed out"))},0)},U.onabort=function(){setTimeout(function(){D(new o.DOMException("Aborted","AbortError"))},0)};function V(W){try{return W===""&&a.location.href?a.location.href:W}catch{return W}}if(U.open(N.method,V(N.url),!0),N.credentials==="include"?U.withCredentials=!0:N.credentials==="omit"&&(U.withCredentials=!1),"responseType"in U&&(c.blob?U.responseType="blob":c.arrayBuffer&&(U.responseType="arraybuffer")),_&&typeof _.headers=="object"&&!(_.headers instanceof g||a.Headers&&_.headers instanceof a.Headers)){var Q=[];Object.getOwnPropertyNames(_.headers).forEach(function(W){Q.push(f(W)),U.setRequestHeader(W,d(_.headers[W]))}),N.headers.forEach(function(W,ee){Q.indexOf(ee)===-1&&U.setRequestHeader(ee,W)})}else N.headers.forEach(function(W,ee){U.setRequestHeader(ee,W)});N.signal&&(N.signal.addEventListener("abort",z),U.onreadystatechange=function(){U.readyState===4&&N.signal.removeEventListener("abort",z)}),U.send(typeof N._bodyInit>"u"?null:N._bodyInit)})}return R.polyfill=!0,a.fetch||(a.fetch=R,a.Headers=g,a.Request=O,a.Response=L),o.Headers=g,o.Request=O,o.Response=L,o.fetch=R,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(dp,dp.exports);var eq=dp.exports;const Kb=il(eq);var tq=Object.defineProperty,nq=Object.defineProperties,rq=Object.getOwnPropertyDescriptors,Gb=Object.getOwnPropertySymbols,sq=Object.prototype.hasOwnProperty,iq=Object.prototype.propertyIsEnumerable,Wb=(t,e,n)=>e in t?tq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zb=(t,e)=>{for(var n in e||(e={}))sq.call(e,n)&&Wb(t,n,e[n]);if(Gb)for(var n of Gb(e))iq.call(e,n)&&Wb(t,n,e[n]);return t},Yb=(t,e)=>nq(t,rq(e));const oq={Accept:"application/json","Content-Type":"application/json"},aq="POST",Qb={headers:oq,method:aq},Jb=10;let Mn=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new en.EventEmitter,this.isAvailable=!1,this.registering=!1,!pb(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Rr(e),r=await(await Kb(this.url,Yb(Zb({},Qb),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!pb(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Rr({id:1,jsonrpc:"2.0",method:"test",params:[]});await Kb(e,Yb(Zb({},Qb),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?si(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=Jl(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return K5(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Jb&&this.events.setMaxListeners(Jb)}};const Xb="error",cq="wss://relay.walletconnect.org",uq="wc",lq="universal_provider",mu=`${uq}@2:${lq}:`,mE="https://rpc.walletconnect.org/v1/",Ki="generic",hq=`${mE}bundler`,mn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function fq(){}function G0(t){return t==null||typeof t!="object"&&typeof t!="function"}function W0(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function dq(t){if(G0(t))return t;if(Array.isArray(t)||W0(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function ew(t){return typeof t=="object"&&t!==null}function bE(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function wE(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const pq="[object RegExp]",vE="[object String]",EE="[object Number]",xE="[object Boolean]",$E="[object Arguments]",gq="[object Symbol]",yq="[object Date]",mq="[object Map]",bq="[object Set]",wq="[object Array]",vq="[object ArrayBuffer]",Eq="[object Object]",xq="[object DataView]",$q="[object Uint8Array]",Iq="[object Uint8ClampedArray]",_q="[object Uint16Array]",Sq="[object Uint32Array]",Pq="[object Int8Array]",Aq="[object Int16Array]",Oq="[object Int32Array]",Cq="[object Float32Array]",Tq="[object Float64Array]";function Dq(t,e){return Xi(t,void 0,t,new Map,e)}function Xi(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(G0(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Xi(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Xi(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Xi(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(W0(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Xi(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),Ss(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),Ss(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),Ss(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Ss(o,t,n,r,s),o}if(typeof t=="object"&&Bq(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),Ss(o,t,n,r,s),o}return t}function Ss(t,e,n=t,r,s){const i=[...Object.keys(e),...bE(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Xi(e[a],a,n,r,s))}}function Bq(t){switch(wE(t)){case $E:case wq:case vq:case xq:case xE:case yq:case Cq:case Tq:case Pq:case Aq:case Oq:case mq:case EE:case Eq:case pq:case bq:case vE:case gq:case $q:case Iq:case _q:case Sq:return!0;default:return!1}}function Nq(t,e){return Dq(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case EE:case vE:case xE:{const o=new t.constructor(t==null?void 0:t.valueOf());return Ss(o,t),o}case $E:{const o={};return Ss(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function tw(t){return Nq(t)}function nw(t){return t!==null&&typeof t=="object"&&wE(t)==="[object Arguments]"}function Rq(t){return W0(t)}function kq(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Uq(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=pp(s,o,r,new Map)}return s}function pp(t,e,n,r){if(G0(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return dq(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...bE(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(nw(a)&&(a={...a}),nw(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=tw(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const l=[],h=Reflect.ownKeys(c);for(let f=0;f<h.length;f++){const d=h[f];l[d]=c[d]}c=l}else c=[];const u=n(c,a,o,t,e,r);u!=null?t[o]=u:Array.isArray(a)||ew(c)&&ew(a)?t[o]=pp(c,a,n,r):c==null&&kq(a)?t[o]=pp({},a,n,r):c==null&&Rq(a)?t[o]=tw(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function Mq(t,...e){return Uq(t,...e,fq)}var Lq=Object.defineProperty,jq=Object.defineProperties,Fq=Object.getOwnPropertyDescriptors,rw=Object.getOwnPropertySymbols,zq=Object.prototype.hasOwnProperty,qq=Object.prototype.propertyIsEnumerable,sw=(t,e,n)=>e in t?Lq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bu=(t,e)=>{for(var n in e||(e={}))zq.call(e,n)&&sw(t,n,e[n]);if(rw)for(var n of rw(e))qq.call(e,n)&&sw(t,n,e[n]);return t},Hq=(t,e)=>jq(t,Fq(e));function Jt(t,e,n){var r;const s=so(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${mE}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function wi(t){return t.includes(":")?t.split(":")[1]:t}function IE(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Vq(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function wu(t={},e={}){const n=iw(t),r=iw(e);return Mq(n,r)}function iw(t){var e,n,r,s,i;const o={};if(!hs(t))return o;for(const[a,c]of Object.entries(t)){const u=Wl(a)?[a]:c.chains,l=c.methods||[],h=c.events||[],f=c.rpcMap||{},d=Ji(a);o[d]=Hq(bu(bu({},o[d]),c),{chains:rr(u,(e=o[d])==null?void 0:e.chains),methods:rr(l,(n=o[d])==null?void 0:n.methods),events:rr(h,(r=o[d])==null?void 0:r.events)}),(hs(f)||hs(((s=o[d])==null?void 0:s.rpcMap)||{}))&&(o[d].rpcMap=bu(bu({},f),(i=o[d])==null?void 0:i.rpcMap))}return o}function ow(t){return t.includes(":")?t.split(":")[2]:t}function aw(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=Wl(n)?[n]:r.chains?r.chains:IE(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function Ef(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const _E={},me=t=>_E[t],xf=(t,e)=>{_E[t]=e};var Kq=Object.defineProperty,Gq=(t,e,n)=>e in t?Kq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bi=(t,e,n)=>Gq(t,typeof e!="symbol"?e+"":e,n);class Wq{constructor(e){Bi(this,"name","polkadot"),Bi(this,"client"),Bi(this,"httpProviders"),Bi(this,"events"),Bi(this,"namespace"),Bi(this,"chainId"),this.namespace=e.namespace,this.events=me("events"),this.client=me("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=wi(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jt(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new yn(new Mn(r,me("disableProviderPing")))}}var Zq=Object.defineProperty,Yq=Object.defineProperties,Qq=Object.getOwnPropertyDescriptors,cw=Object.getOwnPropertySymbols,Jq=Object.prototype.hasOwnProperty,Xq=Object.prototype.propertyIsEnumerable,gp=(t,e,n)=>e in t?Zq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uw=(t,e)=>{for(var n in e||(e={}))Jq.call(e,n)&&gp(t,n,e[n]);if(cw)for(var n of cw(e))Xq.call(e,n)&&gp(t,n,e[n]);return t},lw=(t,e)=>Yq(t,Qq(e)),Ni=(t,e,n)=>gp(t,typeof e!="symbol"?e+"":e,n);class eH{constructor(e){Ni(this,"name","eip155"),Ni(this,"client"),Ni(this,"chainId"),Ni(this,"namespace"),Ni(this,"httpProviders"),Ni(this,"events"),this.namespace=e.namespace,this.events=me("events"),this.client=me("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Jt(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new yn(new Mn(r,me("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(wi(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],u=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const l=this.client.session.get(e.topic),h=((o=l==null?void 0:l.sessionProperties)==null?void 0:o.capabilities)||{};if(h!=null&&h[u])return h==null?void 0:h[u];const f=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:lw(uw({},l.sessionProperties||{}),{capabilities:lw(uw({},h||{}),{[u]:f})})})}catch(d){console.warn("Failed to update session with capabilities",d)}return f}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(as("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${hq}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var tH=Object.defineProperty,nH=(t,e,n)=>e in t?tH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ri=(t,e,n)=>nH(t,typeof e!="symbol"?e+"":e,n);class rH{constructor(e){Ri(this,"name","solana"),Ri(this,"client"),Ri(this,"httpProviders"),Ri(this,"events"),Ri(this,"namespace"),Ri(this,"chainId"),this.namespace=e.namespace,this.events=me("events"),this.client=me("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=wi(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jt(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new yn(new Mn(r,me("disableProviderPing")))}}var sH=Object.defineProperty,iH=(t,e,n)=>e in t?sH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ki=(t,e,n)=>iH(t,typeof e!="symbol"?e+"":e,n);class oH{constructor(e){ki(this,"name","cosmos"),ki(this,"client"),ki(this,"httpProviders"),ki(this,"events"),ki(this,"namespace"),ki(this,"chainId"),this.namespace=e.namespace,this.events=me("events"),this.client=me("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=wi(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jt(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new yn(new Mn(r,me("disableProviderPing")))}}var aH=Object.defineProperty,cH=(t,e,n)=>e in t?aH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ui=(t,e,n)=>cH(t,typeof e!="symbol"?e+"":e,n);class uH{constructor(e){Ui(this,"name","algorand"),Ui(this,"client"),Ui(this,"httpProviders"),Ui(this,"events"),Ui(this,"namespace"),Ui(this,"chainId"),this.namespace=e.namespace,this.events=me("events"),this.client=me("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Jt(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jt(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new yn(new Mn(r,me("disableProviderPing")))}}var lH=Object.defineProperty,hH=(t,e,n)=>e in t?lH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mi=(t,e,n)=>hH(t,typeof e!="symbol"?e+"":e,n);class fH{constructor(e){Mi(this,"name","cip34"),Mi(this,"client"),Mi(this,"httpProviders"),Mi(this,"events"),Mi(this,"namespace"),Mi(this,"chainId"),this.namespace=e.namespace,this.events=me("events"),this.client=me("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=wi(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new yn(new Mn(r,me("disableProviderPing")))}}var dH=Object.defineProperty,pH=(t,e,n)=>e in t?dH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Li=(t,e,n)=>pH(t,typeof e!="symbol"?e+"":e,n);class gH{constructor(e){Li(this,"name","elrond"),Li(this,"client"),Li(this,"httpProviders"),Li(this,"events"),Li(this,"namespace"),Li(this,"chainId"),this.namespace=e.namespace,this.events=me("events"),this.client=me("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=wi(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jt(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new yn(new Mn(r,me("disableProviderPing")))}}var yH=Object.defineProperty,mH=(t,e,n)=>e in t?yH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ji=(t,e,n)=>mH(t,typeof e!="symbol"?e+"":e,n);class bH{constructor(e){ji(this,"name","multiversx"),ji(this,"client"),ji(this,"httpProviders"),ji(this,"events"),ji(this,"namespace"),ji(this,"chainId"),this.namespace=e.namespace,this.events=me("events"),this.client=me("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=wi(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jt(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new yn(new Mn(r,me("disableProviderPing")))}}var wH=Object.defineProperty,vH=(t,e,n)=>e in t?wH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fi=(t,e,n)=>vH(t,typeof e!="symbol"?e+"":e,n);class EH{constructor(e){Fi(this,"name","near"),Fi(this,"client"),Fi(this,"httpProviders"),Fi(this,"events"),Fi(this,"namespace"),Fi(this,"chainId"),this.namespace=e.namespace,this.events=me("events"),this.client=me("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Jt(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jt(e,this.namespace);return typeof r>"u"?void 0:new yn(new Mn(r,me("disableProviderPing")))}}var xH=Object.defineProperty,$H=(t,e,n)=>e in t?xH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zi=(t,e,n)=>$H(t,typeof e!="symbol"?e+"":e,n);class IH{constructor(e){zi(this,"name","tezos"),zi(this,"client"),zi(this,"httpProviders"),zi(this,"events"),zi(this,"namespace"),zi(this,"chainId"),this.namespace=e.namespace,this.events=me("events"),this.client=me("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Jt(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jt(e,this.namespace);return typeof r>"u"?void 0:new yn(new Mn(r))}}var _H=Object.defineProperty,SH=(t,e,n)=>e in t?_H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qi=(t,e,n)=>SH(t,typeof e!="symbol"?e+"":e,n);class PH{constructor(e){qi(this,"name",Ki),qi(this,"client"),qi(this,"httpProviders"),qi(this,"events"),qi(this,"namespace"),qi(this,"chainId"),this.namespace=e.namespace,this.events=me("events"),this.client=me("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(mn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=so(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jt(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new yn(new Mn(r,me("disableProviderPing")))}}var AH=Object.defineProperty,OH=Object.defineProperties,CH=Object.getOwnPropertyDescriptors,hw=Object.getOwnPropertySymbols,TH=Object.prototype.hasOwnProperty,DH=Object.prototype.propertyIsEnumerable,yp=(t,e,n)=>e in t?AH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vu=(t,e)=>{for(var n in e||(e={}))TH.call(e,n)&&yp(t,n,e[n]);if(hw)for(var n of hw(e))DH.call(e,n)&&yp(t,n,e[n]);return t},$f=(t,e)=>OH(t,CH(e)),sn=(t,e,n)=>yp(t,typeof e!="symbol"?e+"":e,n);let BH=class SE{constructor(e){sn(this,"client"),sn(this,"namespaces"),sn(this,"optionalNamespaces"),sn(this,"sessionProperties"),sn(this,"scopedProperties"),sn(this,"events",new w0),sn(this,"rpcProviders",{}),sn(this,"session"),sn(this,"providerOpts"),sn(this,"logger"),sn(this,"uri"),sn(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Fc(Yl({level:(e==null?void 0:e.logger)||Xb})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new SE(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:vu({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,Ql(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:xe("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=aw(this.session.namespaces);this.namespaces=wu(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=aw(s.namespaces);return this.namespaces=wu(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===Ki?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Cn(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await Xz.init({core:this.providerOpts.core,logger:this.providerOpts.logger||Xb,relayUrl:this.providerOpts.relayUrl||cq,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Ji(n)))];xf("client",this.client),xf("events",this.events),xf("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=Vq(n,this.session),s=IE(r),i=wu(this.namespaces,this.optionalNamespaces),o=$f(vu({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new eH({namespace:o});break;case"algorand":this.rpcProviders[n]=new uH({namespace:o});break;case"solana":this.rpcProviders[n]=new rH({namespace:o});break;case"cosmos":this.rpcProviders[n]=new oH({namespace:o});break;case"polkadot":this.rpcProviders[n]=new Wq({namespace:o});break;case"cip34":this.rpcProviders[n]=new fH({namespace:o});break;case"elrond":this.rpcProviders[n]=new gH({namespace:o});break;case"multiversx":this.rpcProviders[n]=new bH({namespace:o});break;case"near":this.rpcProviders[n]=new EH({namespace:o});break;case"tezos":this.rpcProviders[n]=new IH({namespace:o});break;default:this.rpcProviders[Ki]?this.rpcProviders[Ki].updateNamespace(o):this.rpcProviders[Ki]=new PH({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Cn(o)&&this.events.emit("accountsChanged",o.map(ow))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Ji(o),u=Ef(o)!==Ef(a)?`${c}:${Ef(a)}`:o;this.onChainChanged(u)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=$f(vu({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",$f(vu({},xe("USER_DISCONNECTED")),{data:e.topic})))}),this.on(mn.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Ki]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=wu(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>Ji(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Ji(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(ow);if(!Cn(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${mu}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${mu}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${mu}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(mu)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};const NH=BH,RH="wc",kH="ethereum_provider",UH=`${RH}@2:${kH}:`,MH="https://rpc.walletconnect.org/v1/",Xu=["eth_sendTransaction","personal_sign"],PE=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],el=["chainChanged","accountsChanged"],AE=["chainChanged","accountsChanged","message","disconnect","connect"],LH=async()=>{const{createAppKit:t}=await fi(()=>import("./core-C26L7qkO.js").then(e=>e.J),[]);return t};var jH=Object.defineProperty,FH=Object.defineProperties,zH=Object.getOwnPropertyDescriptors,fw=Object.getOwnPropertySymbols,qH=Object.prototype.hasOwnProperty,HH=Object.prototype.propertyIsEnumerable,mp=(t,e,n)=>e in t?jH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Es=(t,e)=>{for(var n in e||(e={}))qH.call(e,n)&&mp(t,n,e[n]);if(fw)for(var n of fw(e))HH.call(e,n)&&mp(t,n,e[n]);return t},ga=(t,e)=>FH(t,zH(e)),zt=(t,e,n)=>mp(t,typeof e!="symbol"?e+"":e,n);function tl(t){return Number(t[0].split(":")[1])}function Eu(t){return`0x${t.toString(16)}`}function VH(t){const{chains:e,optionalChains:n,methods:r,optionalMethods:s,events:i,optionalEvents:o,rpcMap:a}=t;if(!Cn(e))throw new Error("Invalid chains");const c={chains:e,methods:r||Xu,events:i||el,rpcMap:Es({},e.length?{[tl(e)]:a[tl(e)]}:{})},u=i==null?void 0:i.filter(d=>!el.includes(d)),l=r==null?void 0:r.filter(d=>!Xu.includes(d));if(!n&&!o&&!s&&!(u!=null&&u.length)&&!(l!=null&&l.length))return{required:e.length?c:void 0};const h=(u==null?void 0:u.length)&&(l==null?void 0:l.length)||!n,f={chains:[...new Set(h?c.chains.concat(n||[]):n)],methods:[...new Set(c.methods.concat(s!=null&&s.length?s:PE))],events:[...new Set(c.events.concat(o!=null&&o.length?o:AE))],rpcMap:a};return{required:e.length?c:void 0,optional:n.length?f:void 0}}let OE=class CE{constructor(){zt(this,"events",new en.EventEmitter),zt(this,"namespace","eip155"),zt(this,"accounts",[]),zt(this,"signer"),zt(this,"chainId",1),zt(this,"modal"),zt(this,"rpc"),zt(this,"STORAGE_KEY",UH),zt(this,"on",(e,n)=>(this.events.on(e,n),this)),zt(this,"once",(e,n)=>(this.events.once(e,n),this)),zt(this,"removeListener",(e,n)=>(this.events.removeListener(e,n),this)),zt(this,"off",(e,n)=>(this.events.off(e,n),this)),zt(this,"parseAccount",e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e),this.signer={},this.rpc={}}static async init(e){const n=new CE;return await n.initialize(e),n}async request(e,n){return await this.signer.request(e,this.formatChainId(this.chainId),n)}sendAsync(e,n,r){this.signer.sendAsync(e,n,this.formatChainId(this.chainId),r)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){var n;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:r,optional:s}=VH(this.rpc);try{const i=await new Promise(async(a,c)=>{var u,l;this.rpc.showQrModal&&((u=this.modal)==null||u.open(),(l=this.modal)==null||l.subscribeState(f=>{!f.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),c(new Error("Connection request reset. Please try again.")))}));const h=e!=null&&e.scopedProperties?{[this.namespace]:e.scopedProperties}:void 0;await this.signer.connect(ga(Es({namespaces:Es({},r&&{[this.namespace]:r})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e==null?void 0:e.pairingTopic,scopedProperties:h})).then(f=>{a(f)}).catch(f=>{var d;(d=this.modal)==null||d.showErrorMessage("Unable to connect"),c(new Error(f.message))})});if(!i)return;const o=cm(i.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:Eu(this.chainId)})}catch(i){throw this.signer.logger.error(i),i}finally{(n=this.modal)==null||n.close()}}async authenticate(e,n){var r;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e==null?void 0:e.chains});try{const s=await new Promise(async(o,a)=>{var c,u;this.rpc.showQrModal&&((c=this.modal)==null||c.open(),(u=this.modal)==null||u.subscribeState(l=>{!l.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),a(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(ga(Es({},e),{chains:this.rpc.chains}),n).then(l=>{o(l)}).catch(l=>{var h;(h=this.modal)==null||h.showErrorMessage("Unable to connect"),a(new Error(l.message))})}),i=s.session;if(i){const o=cm(i.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:Eu(this.chainId)})}return s}catch(s){throw this.signer.logger.error(s),s}finally{(r=this.modal)==null||r.close()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:n}=e,{event:r}=n;r.name==="accountsChanged"?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):r.name==="chainChanged"?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",e)}),this.signer.on("accountsChanged",e=>{this.accounts=this.parseAccounts(e),this.events.emit("accountsChanged",this.accounts)}),this.signer.on("chainChanged",e=>{const n=parseInt(e);this.chainId=n,this.events.emit("chainChanged",Eu(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",ga(Es({},xe("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const n=e.filter(r=>this.isCompatibleChainId(r)).map(r=>this.parseChainId(r));n.length&&(this.chainId=n[0],this.events.emit("chainChanged",Eu(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const n=this.parseChainId(e);this.chainId=n,this.switchEthereumChain(n)}}parseAccountId(e){const[n,r,s]=e.split(":");return{chainId:`${n}:${r}`,address:s}}setAccounts(e){this.accounts=e.filter(n=>this.parseChainId(this.parseAccountId(n).chainId)===this.chainId).map(n=>this.parseAccountId(n).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var n,r;const s=(n=e==null?void 0:e.chains)!=null?n:[],i=(r=e==null?void 0:e.optionalChains)!=null?r:[],o=s.concat(i);if(!o.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const a=s.length?(e==null?void 0:e.methods)||Xu:[],c=s.length?(e==null?void 0:e.events)||el:[],u=(e==null?void 0:e.optionalMethods)||[],l=(e==null?void 0:e.optionalEvents)||[],h=(e==null?void 0:e.rpcMap)||this.buildRpcMap(o,e.projectId),f=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:s==null?void 0:s.map(d=>this.formatChainId(d)),optionalChains:i.map(d=>this.formatChainId(d)),methods:a,events:c,optionalMethods:u,optionalEvents:l,rpcMap:h,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:f,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,n){const r={};return e.forEach(s=>{r[s]=this.getRpcUrl(s,n)}),r}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?tl(this.rpc.chains):tl(this.rpc.optionalChains),this.signer=await NH.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storage:e.storage,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled,logger:e.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let n;try{const r=await LH(),{convertWCMToAppKitOptions:s}=await Promise.resolve().then(function(){return nV}),i=s(ga(Es({},this.rpc.qrModalOptions),{chains:[...new Set([...this.rpc.chains,...this.rpc.optionalChains])],metadata:this.rpc.metadata,projectId:this.rpc.projectId}));if(!i.networks.length)throw new Error("No networks found for WalletConnect·");n=r(ga(Es({},i),{universalProvider:this.signer,manualWCControl:!0}))}catch(r){throw console.warn(r),new Error("To use QR modal, please install @reown/appkit package")}if(n)try{this.modal=n}catch(r){throw this.signer.logger.error(r),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:n,optionalChains:r,rpcMap:s}=e;n&&Cn(n)&&(this.rpc.chains=n.map(i=>this.formatChainId(i)),n.forEach(i=>{this.rpc.rpcMap[i]=(s==null?void 0:s[i])||this.getRpcUrl(i)})),r&&Cn(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r==null?void 0:r.map(i=>this.formatChainId(i)),r.forEach(i=>{this.rpc.rpcMap[i]=(s==null?void 0:s[i])||this.getRpcUrl(i)}))}getRpcUrl(e,n){var r;return((r=this.rpc.rpcMap)==null?void 0:r[e])||`${MH}?chainId=eip155:${e}&projectId=${n||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),n=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:n==null?void 0:n.accounts),this.setAccounts(n==null?void 0:n.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(n=>this.signer.logger.warn(n))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(n=>this.parseAccount(n))}};const KH=OE;var GH=Object.defineProperty,WH=Object.defineProperties,ZH=Object.getOwnPropertyDescriptors,dw=Object.getOwnPropertySymbols,YH=Object.prototype.hasOwnProperty,QH=Object.prototype.propertyIsEnumerable,pw=(t,e,n)=>e in t?GH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,TE=(t,e)=>{for(var n in e||(e={}))YH.call(e,n)&&pw(t,n,e[n]);if(dw)for(var n of dw(e))QH.call(e,n)&&pw(t,n,e[n]);return t},JH=(t,e)=>WH(t,ZH(e));function XH(t){if(t)return{"--w3m-font-family":t["--wcm-font-family"],"--w3m-accent":t["--wcm-accent-color"],"--w3m-color-mix":t["--wcm-background-color"],"--w3m-z-index":t["--wcm-z-index"]?Number(t["--wcm-z-index"]):void 0,"--w3m-qr-color":t["--wcm-accent-color"],"--w3m-font-size-master":t["--wcm-text-medium-regular-size"],"--w3m-border-radius-master":t["--wcm-container-border-radius"],"--w3m-color-mix-strength":0}}const eV=t=>{const[e,n]=t.split(":");return DE({id:n,caipNetworkId:t,chainNamespace:e,name:"",nativeCurrency:{name:"",symbol:"",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}})};function tV(t){var e,n,r,s,i,o,a;const c=(e=t.chains)==null?void 0:e.map(eV).filter(Boolean);if(c.length===0)throw new Error("At least one chain must be specified");const u=c.find(h=>{var f;return h.id===((f=t.defaultChain)==null?void 0:f.id)}),l={projectId:t.projectId,networks:c,themeMode:t.themeMode,themeVariables:XH(t.themeVariables),chainImages:t.chainImages,connectorImages:t.walletImages,defaultNetwork:u,metadata:JH(TE({},t.metadata),{name:((n=t.metadata)==null?void 0:n.name)||"WalletConnect",description:((r=t.metadata)==null?void 0:r.description)||"Connect to WalletConnect-compatible wallets",url:((s=t.metadata)==null?void 0:s.url)||"https://walletconnect.org",icons:((i=t.metadata)==null?void 0:i.icons)||["https://walletconnect.org/walletconnect-logo.png"]}),showWallets:!0,featuredWalletIds:t.explorerRecommendedWalletIds==="NONE"?[]:Array.isArray(t.explorerRecommendedWalletIds)?t.explorerRecommendedWalletIds:[],excludeWalletIds:t.explorerExcludedWalletIds==="ALL"?[]:Array.isArray(t.explorerExcludedWalletIds)?t.explorerExcludedWalletIds:[],enableEIP6963:!1,enableInjected:!1,enableCoinbase:!0,enableWalletConnect:!0,features:{email:!1,socials:!1}};if((o=t.mobileWallets)!=null&&o.length||(a=t.desktopWallets)!=null&&a.length){const h=[...(t.mobileWallets||[]).map(p=>({id:p.id,name:p.name,links:p.links})),...(t.desktopWallets||[]).map(p=>({id:p.id,name:p.name,links:{native:p.links.native,universal:p.links.universal}}))],f=[...l.featuredWalletIds||[],...l.excludeWalletIds||[]],d=h.filter(p=>!f.includes(p.id));d.length&&(l.customWallets=d)}return l}function DE(t){return TE({formatters:void 0,fees:void 0,serializers:void 0},t)}var nV=Object.freeze({__proto__:null,convertWCMToAppKitOptions:tV,defineChain:DE});const rV=Object.freeze(Object.defineProperty({__proto__:null,EthereumProvider:KH,OPTIONAL_EVENTS:AE,OPTIONAL_METHODS:PE,REQUIRED_EVENTS:el,REQUIRED_METHODS:Xu,default:OE},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Nu=globalThis,Z0=Nu.ShadowRoot&&(Nu.ShadyCSS===void 0||Nu.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Y0=Symbol(),gw=new WeakMap;let BE=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==Y0)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(Z0&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=gw.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&gw.set(n,e))}return e}toString(){return this.cssText}};const sV=t=>new BE(typeof t=="string"?t:t+"",void 0,Y0),xG=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new BE(n,t,Y0)},iV=(t,e)=>{if(Z0)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=Nu.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},yw=Z0?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return sV(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:oV,defineProperty:aV,getOwnPropertyDescriptor:cV,getOwnPropertyNames:uV,getOwnPropertySymbols:lV,getPrototypeOf:hV}=Object,fs=globalThis,mw=fs.trustedTypes,fV=mw?mw.emptyScript:"",If=fs.reactiveElementPolyfillSupport,Ia=(t,e)=>t,nl={toAttribute(t,e){switch(e){case Boolean:t=t?fV:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},Q0=(t,e)=>!oV(t,e),bw={attribute:!0,type:String,converter:nl,reflect:!1,useDefault:!1,hasChanged:Q0};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),fs.litPropertyMetadata??(fs.litPropertyMetadata=new WeakMap);let Gi=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=bw){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&aV(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=cV(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??bw}static _$Ei(){if(this.hasOwnProperty(Ia("elementProperties")))return;const e=hV(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Ia("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Ia("properties"))){const n=this.properties,r=[...uV(n),...lV(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(yw(s))}else e!==void 0&&n.push(yw(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return iV(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:nl).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:nl;this._$Em=s;const u=c.fromAttribute(n,a.type);this[s]=u??((o=this._$Ej)==null?void 0:o.get(s))??u,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??Q0)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};Gi.elementStyles=[],Gi.shadowRootOptions={mode:"open"},Gi[Ia("elementProperties")]=new Map,Gi[Ia("finalized")]=new Map,If==null||If({ReactiveElement:Gi}),(fs.reactiveElementVersions??(fs.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const _a=globalThis,rl=_a.trustedTypes,ww=rl?rl.createPolicy("lit-html",{createHTML:t=>t}):void 0,NE="$lit$",Qr=`lit$${Math.random().toFixed(9).slice(2)}$`,RE="?"+Qr,dV=`<${RE}>`,ci=document,lc=()=>ci.createComment(""),hc=t=>t===null||typeof t!="object"&&typeof t!="function",J0=Array.isArray,pV=t=>J0(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",_f=`[ 	
\f\r]`,ya=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,vw=/-->/g,Ew=/>/g,ws=RegExp(`>|${_f}(?:([^\\s"'>=/]+)(${_f}*=${_f}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),xw=/'/g,$w=/"/g,kE=/^(?:script|style|textarea|title)$/i,UE=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),IG=UE(1),_G=UE(2),ui=Symbol.for("lit-noChange"),Fe=Symbol.for("lit-nothing"),Iw=new WeakMap,Ds=ci.createTreeWalker(ci,129);function ME(t,e){if(!J0(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return ww!==void 0?ww.createHTML(e):e}const gV=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=ya;for(let a=0;a<n;a++){const c=t[a];let u,l,h=-1,f=0;for(;f<c.length&&(o.lastIndex=f,l=o.exec(c),l!==null);)f=o.lastIndex,o===ya?l[1]==="!--"?o=vw:l[1]!==void 0?o=Ew:l[2]!==void 0?(kE.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=ws):l[3]!==void 0&&(o=ws):o===ws?l[0]===">"?(o=s??ya,h=-1):l[1]===void 0?h=-2:(h=o.lastIndex-l[2].length,u=l[1],o=l[3]===void 0?ws:l[3]==='"'?$w:xw):o===$w||o===xw?o=ws:o===vw||o===Ew?o=ya:(o=ws,s=void 0);const d=o===ws&&t[a+1].startsWith("/>")?" ":"";i+=o===ya?c+dV:h>=0?(r.push(u),c.slice(0,h)+NE+c.slice(h)+Qr+d):c+Qr+(h===-2?a:d)}return[ME(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class fc{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[u,l]=gV(e,n);if(this.el=fc.createElement(u,r),Ds.currentNode=this.el.content,n===2||n===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(s=Ds.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const h of s.getAttributeNames())if(h.endsWith(NE)){const f=l[o++],d=s.getAttribute(h).split(Qr),p=/([.?@])?(.*)/.exec(f);c.push({type:1,index:i,name:p[2],strings:d,ctor:p[1]==="."?mV:p[1]==="?"?bV:p[1]==="@"?wV:nh}),s.removeAttribute(h)}else h.startsWith(Qr)&&(c.push({type:6,index:i}),s.removeAttribute(h));if(kE.test(s.tagName)){const h=s.textContent.split(Qr),f=h.length-1;if(f>0){s.textContent=rl?rl.emptyScript:"";for(let d=0;d<f;d++)s.append(h[d],lc()),Ds.nextNode(),c.push({type:2,index:++i});s.append(h[f],lc())}}}else if(s.nodeType===8)if(s.data===RE)c.push({type:2,index:i});else{let h=-1;for(;(h=s.data.indexOf(Qr,h+1))!==-1;)c.push({type:7,index:i}),h+=Qr.length-1}i++}}static createElement(e,n){const r=ci.createElement("template");return r.innerHTML=e,r}}function ko(t,e,n=t,r){var o,a;if(e===ui)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=hc(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=ko(t,s._$AS(t,e.values),s,r)),e}class yV{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??ci).importNode(n,!0);Ds.currentNode=s;let i=Ds.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let u;c.type===2?u=new Hc(i,i.nextSibling,this,e):c.type===1?u=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(u=new vV(i,this,e)),this._$AV.push(u),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Ds.nextNode(),o++)}return Ds.currentNode=ci,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class Hc{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=Fe,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=ko(this,e,n),hc(e)?e===Fe||e==null||e===""?(this._$AH!==Fe&&this._$AR(),this._$AH=Fe):e!==this._$AH&&e!==ui&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):pV(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Fe&&hc(this._$AH)?this._$AA.nextSibling.data=e:this.T(ci.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=fc.createElement(ME(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new yV(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=Iw.get(e.strings);return n===void 0&&Iw.set(e.strings,n=new fc(e)),n}k(e){J0(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new Hc(this.O(lc()),this.O(lc()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class nh{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=Fe,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Fe}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=ko(this,e,n,0),o=!hc(e)||e!==this._$AH&&e!==ui,o&&(this._$AH=e);else{const a=e;let c,u;for(e=i[0],c=0;c<i.length-1;c++)u=ko(this,a[r+c],n,c),u===ui&&(u=this._$AH[c]),o||(o=!hc(u)||u!==this._$AH[c]),u===Fe?e=Fe:e!==Fe&&(e+=(u??"")+i[c+1]),this._$AH[c]=u}o&&!s&&this.j(e)}j(e){e===Fe?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class mV extends nh{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Fe?void 0:e}}class bV extends nh{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Fe)}}class wV extends nh{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=ko(this,e,n,0)??Fe)===ui)return;const r=this._$AH,s=e===Fe&&r!==Fe||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==Fe&&(r===Fe||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class vV{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){ko(this,e)}}const Sf=_a.litHtmlPolyfillSupport;Sf==null||Sf(fc,Hc),(_a.litHtmlVersions??(_a.litHtmlVersions=[])).push("3.3.1");const EV=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new Hc(e.insertBefore(lc(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Vs=globalThis;let Ru=class extends Gi{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=EV(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return ui}};var Rw;Ru._$litElement$=!0,Ru.finalized=!0,(Rw=Vs.litElementHydrateSupport)==null||Rw.call(Vs,{LitElement:Ru});const Pf=Vs.litElementPolyfillSupport;Pf==null||Pf({LitElement:Ru});(Vs.litElementVersions??(Vs.litElementVersions=[])).push("4.2.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const xV={attribute:!0,type:String,converter:nl,reflect:!1,hasChanged:Q0},$V=(t=xV,e,n)=>{const{kind:r,metadata:s}=n;let i=globalThis.litPropertyMetadata.get(s);if(i===void 0&&globalThis.litPropertyMetadata.set(s,i=new Map),r==="setter"&&((t=Object.create(t)).wrapped=!0),i.set(n.name,t),r==="accessor"){const{name:o}=n;return{set(a){const c=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,c,t)},init(a){return a!==void 0&&this.C(o,void 0,t,a),a}}}if(r==="setter"){const{name:o}=n;return function(a){const c=this[o];e.call(this,a),this.requestUpdate(o,c,t)}}throw Error("Unsupported decorator location: "+r)};function IV(t){return(e,n)=>typeof n=="object"?$V(t,e,n):((r,s,i)=>{const o=s.hasOwnProperty(i);return s.constructor.createProperty(i,r),o?Object.getOwnPropertyDescriptor(s,i):void 0})(t,e,n)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function PG(t){return IV({...t,state:!0,attribute:!1})}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const AG=t=>t??Fe;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const OG=t=>t===null||typeof t!="object"&&typeof t!="function",_V=t=>t.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const LE={ATTRIBUTE:1,CHILD:2},jE=t=>(...e)=>({_$litDirective$:t,values:e});class FE{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,n,r){this._$Ct=e,this._$AM=n,this._$Ci=r}_$AS(e,n){return this.update(e,n)}update(e,n){return this.render(...n)}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Sa=(t,e)=>{var r;const n=t._$AN;if(n===void 0)return!1;for(const s of n)(r=s._$AO)==null||r.call(s,e,!1),Sa(s,e);return!0},sl=t=>{let e,n;do{if((e=t._$AM)===void 0)break;n=e._$AN,n.delete(t),t=e}while((n==null?void 0:n.size)===0)},zE=t=>{for(let e;e=t._$AM;t=e){let n=e._$AN;if(n===void 0)e._$AN=n=new Set;else if(n.has(t))break;n.add(t),AV(e)}};function SV(t){this._$AN!==void 0?(sl(this),this._$AM=t,zE(this)):this._$AM=t}function PV(t,e=!1,n=0){const r=this._$AH,s=this._$AN;if(s!==void 0&&s.size!==0)if(e)if(Array.isArray(r))for(let i=n;i<r.length;i++)Sa(r[i],!1),sl(r[i]);else r!=null&&(Sa(r,!1),sl(r));else Sa(this,t)}const AV=t=>{t.type==LE.CHILD&&(t._$AP??(t._$AP=PV),t._$AQ??(t._$AQ=SV))};class OV extends FE{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,n,r){super._$AT(e,n,r),zE(this),this.isConnected=e._$AU}_$AO(e,n=!0){var r,s;e!==this.isConnected&&(this.isConnected=e,e?(r=this.reconnected)==null||r.call(this):(s=this.disconnected)==null||s.call(this)),n&&(Sa(this,e),sl(this))}setValue(e){if(_V(this._$Ct))this._$Ct._$AI(e,this);else{const n=[...this._$Ct._$AH];n[this._$Ci]=e,this._$Ct._$AI(n,this,0)}}disconnected(){}reconnected(){}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const CG=jE(class extends FE{constructor(t){var e;if(super(t),t.type!==LE.ATTRIBUTE||t.name!=="class"||((e=t.strings)==null?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,s;if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(i=>i!=="")));for(const i in e)e[i]&&!((r=this.nt)!=null&&r.has(i))&&this.st.add(i);return this.render(e)}const n=t.element.classList;for(const i of this.st)i in e||(n.remove(i),this.st.delete(i));for(const i in e){const o=!!e[i];o===this.st.has(i)||(s=this.nt)!=null&&s.has(i)||(o?(n.add(i),this.st.add(i)):(n.remove(i),this.st.delete(i)))}return ui}});var TG=function(e){for(var n=[],r=e.length,s=0;s<r;s++){var i=e.charCodeAt(s);if(i>=55296&&i<=56319&&r>s+1){var o=e.charCodeAt(s+1);o>=56320&&o<=57343&&(i=(i-55296)*1024+o-56320+65536,s+=1)}if(i<128){n.push(i);continue}if(i<2048){n.push(i>>6|192),n.push(i&63|128);continue}if(i<55296||i>=57344&&i<65536){n.push(i>>12|224),n.push(i>>6&63|128),n.push(i&63|128);continue}if(i>=65536&&i<=1114111){n.push(i>>18|240),n.push(i>>12&63|128),n.push(i>>6&63|128),n.push(i&63|128);continue}n.push(239,191,189)}return new Uint8Array(n).buffer},qE={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,r,s){var i={},o={};o[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var c,u,l,h,f,d,p,g,y;!a.empty();){c=a.pop(),u=c.value,h=c.cost,f=n[u]||{};for(l in f)f.hasOwnProperty(l)&&(d=f[l],p=h+d,g=o[l],y=typeof o[l]>"u",(y||g>p)&&(o[l]=p,a.push(l,p),i[l]=u))}if(typeof s<"u"&&typeof o[s]>"u"){var w=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(w)}return i},extract_shortest_path_from_predecessor_list:function(n,r){for(var s=[],i=r;i;)s.push(i),n[i],i=n[i];return s.reverse(),s},find_path:function(n,r,s){var i=e.single_source_shortest_paths(n,r,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,s={},i;n=n||{};for(i in r)r.hasOwnProperty(i)&&(s[i]=r[i]);return s.queue=[],s.sorter=n.sorter||r.default_sorter,s},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var s={value:n,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(qE);var DG=qE.exports;/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const BG=()=>new CV;class CV{}const Af=new WeakMap,NG=jE(class extends OV{render(t){return Fe}update(t,[e]){var r;const n=e!==this.G;return n&&this.G!==void 0&&this.rt(void 0),(n||this.lt!==this.ct)&&(this.G=e,this.ht=(r=t.options)==null?void 0:r.host,this.rt(this.ct=t.element)),Fe}rt(t){if(this.isConnected||(t=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let n=Af.get(e);n===void 0&&(n=new WeakMap,Af.set(e,n)),n.get(this.G)!==void 0&&this.G.call(this.ht,void 0),n.set(this.G,t),t!==void 0&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){var t,e;return typeof this.G=="function"?(t=Af.get(this.ht??globalThis))==null?void 0:t.get(this.G):(e=this.G)==null?void 0:e.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});export{y2 as $,ne as A,Jf as B,kn as C,x1 as D,G as E,pl as F,On as G,P1 as H,f$ as I,Lf as J,N1 as K,lt as L,EK as M,eP as N,Yt as O,Un as P,xK as Q,qI as R,uK as S,Qp as T,Fp as U,Br as V,mK as W,Dv as X,He as Y,Nr as Z,Fo as _,In as a,Xl as a$,pd as a0,di as a1,hK as a2,Ke as a3,Dn as a4,N2 as a5,eO as a6,tO as a7,cy as a8,Nv as a9,nO as aA,sO as aB,yi as aC,fi as aD,G2 as aE,hn as aF,Nt as aG,J as aH,ti as aI,F9 as aJ,v0 as aK,CO as aL,K2 as aM,wa as aN,Ud as aO,J4 as aP,Yl as aQ,N7 as aR,It as aS,TU as aT,Lt as aU,as as aV,mi as aW,Fc as aX,yn as aY,zM as aZ,V0 as a_,Gs as aa,Zt as ab,lK as ac,Ls as ad,dn as ae,Wt as af,p$ as ag,go as ah,De as ai,pK as aj,nK as ak,qV as al,Et as am,yc as an,NV as ao,fn as ap,jo as aq,TK as ar,gK as as,aO as at,DK as au,en as av,O1 as aw,du as ax,si as ay,Rr as az,QA as b,Ql as b0,w0 as b1,im as b2,W6 as b3,HB as b4,Ts as b5,Jl as b6,Zn as b7,ln as b8,Wn as b9,Mn as ba,fK as bb,sV as bc,xG as bd,IV as be,Ru as bf,IG as bg,AG as bh,PG as bi,TG as bj,DG as bk,_G as bl,BG as bm,NG as bn,CG as bo,jE as bp,OV as bq,ui as br,OG as bs,yK as c,SK as d,CK as e,y0 as f,IK as g,dK as h,d0 as i,_K as j,$K as k,Bn as l,PK as m,yt as n,AK as o,OK as p,Sr as q,Y as r,vK as s,J3 as t,wK as u,kr as v,B2 as w,ht as x,rK as y,cK as z};
